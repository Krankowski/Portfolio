(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},s=n.parcelRequire1d24;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},n.parcelRequire1d24=s),s.register("kram9",(function(t,n){e(t.exports,"useFeeBreakdown",(function(){return s("dMwYe").useFeeBreakdown})),e(t.exports,"useFetchSwapBuyAssetsList",(function(){return s("eFZiv").useFetchSwapBuyAssetsList})),e(t.exports,"useResetSwapperOnMount",(function(){return s("ezPKD").useResetSwapperOnMount})),e(t.exports,"useSwapCardProps",(function(){return s("dtI9r").useSwapCardProps})),e(t.exports,"useSwapConfirmationProps",(function(){return s("8vNNq").useSwapConfirmationProps})),e(t.exports,"useSwapProvidersProps",(function(){return s("lCzzn").useSwapProvidersProps})),e(t.exports,"useSwapReviewProps",(function(){return s("iTLyO").useSwapReviewProps})),e(t.exports,"useSwapSellAssetsList",(function(){return s("eOCBr").useSwapSellAssetsList})),e(t.exports,"useSwapSetBuyAsset",(function(){return s("4MMT9").useSwapSetBuyAsset})),e(t.exports,"useSwapSetSellAsset",(function(){return s("iA6sm").useSwapSetSellAsset})),e(t.exports,"useSwapperStore",(function(){return s("iTQ0V").useSwapperStore})),e(t.exports,"FUSE_SWAP_ASSET_SEARCH_CONFIG",(function(){return s("2UOPE").FUSE_SWAP_ASSET_SEARCH_CONFIG})),e(t.exports,"HIGH_PRICE_IMPACT_THRESHOLD",(function(){return s("2UOPE").HIGH_PRICE_IMPACT_THRESHOLD})),e(t.exports,"HIGH_SLIPPAGE_THRESHOLD",(function(){return s("2UOPE").HIGH_SLIPPAGE_THRESHOLD})),e(t.exports,"INITIAL_BUY_FUNGIBLE",(function(){return s("2UOPE").INITIAL_BUY_FUNGIBLE})),e(t.exports,"PHANTOM_SUPPORT_SWAP_FAILED_URL",(function(){return s("2UOPE").PHANTOM_SUPPORT_SWAP_FAILED_URL})),e(t.exports,"SWAP_ASSET_SELECT_TOKEN_STANDARDS",(function(){return s("2UOPE").SWAP_ASSET_SELECT_TOKEN_STANDARDS})),e(t.exports,"analyticsPayload",(function(){return s("igrkF").analyticsPayload})),e(t.exports,"extractUsdRate",(function(){return s("lDJ5X").extractUsdRate})),e(t.exports,"formatSecondsAsSwapTime",(function(){return s("60dsO").formatSecondsAsSwapTime})),e(t.exports,"isBridgeProviderRow",(function(){return s("8c6ro").isBridgeProviderRow})),e(t.exports,"createSwapperHooks",(function(){return s("2e392").createSwapperHooks})),e(t.exports,"useMultichainSwapSetBuyAsset",(function(){return s("dkOnS").useSwapSetBuyAsset})),e(t.exports,"useMultichainSwapSetSellAsset",(function(){return s("cfA1B").useSwapSetSellAsset})),e(t.exports,"useMultichainFeeBreakdown",(function(){return s("gb4iB").useFeeBreakdown})),e(t.exports,"useMultichainQuote",(function(){return s("2Upmy").useQuote})),e(t.exports,"SwapAssetSelectType",(function(){return s("iixDX").SwapAssetSelectType})),e(t.exports,"swapperShouldDehydrateQueryPredicate",(function(){return s("kRqRr").swapperShouldDehydrateQueryPredicate})),e(t.exports,"createSwapAnalytics",(function(){return s("3JFMB").createSwapAnalytics})),s("c6eRZ");s("dMwYe"),s("eFZiv"),s("ezPKD"),s("dtI9r"),s("8vNNq"),s("lCzzn"),s("iTLyO"),s("eOCBr"),s("4MMT9"),s("iA6sm"),s("iTQ0V");s("f2tU6");s("2JxpK"),s("30Tum"),s("azr2P"),s("gWWyM"),s("9XJOV"),s("bKooM"),s("31DM9"),s("7NBkj"),s("cH46O"),s("huZwj"),s("eH8pa"),s("9YFpa"),s("7SmhG"),s("8A1G6"),s("2UOPE"),s("kvuQ4");s("d0HjU");s("igrkF"),s("lDJ5X"),s("60dsO"),s("8c6ro"),s("2e392"),s("dkOnS"),s("cfA1B"),s("gb4iB"),s("2Upmy"),s("fQWxX"),s("lQOkI"),s("aH2Wm"),s("8vAsr"),s("iixDX"),s("kRqRr"),s("3JFMB")})),s.register("c6eRZ",(function(t,n){e(t.exports,"useFeeBreakdown",(function(){return s("dMwYe").useFeeBreakdown})),e(t.exports,"useFetchSwapBuyAssetsList",(function(){return s("eFZiv").useFetchSwapBuyAssetsList})),e(t.exports,"useResetSwapperOnMount",(function(){return s("ezPKD").useResetSwapperOnMount})),e(t.exports,"useSwapCardProps",(function(){return s("dtI9r").useSwapCardProps})),e(t.exports,"useSwapConfirmationProps",(function(){return s("8vNNq").useSwapConfirmationProps})),e(t.exports,"useSwapProvidersProps",(function(){return s("lCzzn").useSwapProvidersProps})),e(t.exports,"useSwapReviewProps",(function(){return s("iTLyO").useSwapReviewProps})),e(t.exports,"useSwapSellAssetsList",(function(){return s("eOCBr").useSwapSellAssetsList})),e(t.exports,"useSwapSetBuyAsset",(function(){return s("4MMT9").useSwapSetBuyAsset})),e(t.exports,"useSwapSetSellAsset",(function(){return s("iA6sm").useSwapSetSellAsset}));s("lgcfo"),s("I4BHf"),s("dMwYe"),s("eFZiv"),s("dsDYC"),s("iqqDn"),s("fxXvK"),s("8IOCk"),s("4xLuU"),s("8BJCs"),s("UWzy4"),s("iX5lP"),s("ezPKD"),s("bFhoc"),s("hVvmZ"),s("dtI9r"),s("8vNNq"),s("3pIvT"),s("lCzzn"),s("9PpHT"),s("iTLyO"),s("6M54M"),s("eOCBr"),s("4MMT9"),s("iA6sm"),s("h8AIo")})),s.register("lgcfo",(function(t,n){e(t.exports,"useAnalyticsPayload",(function(){return a}));var o=s("29o0l"),r=s("24hfq"),i=s("Nt4tV");function a({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:n,sellToken:r,buyAmount:s,sellAmount:a,phantomFee:d,priceImpact:p,provider:m}){return(0,o.useMemo)((()=>{if(t&&r){const o=c(s,t.decimals,e),f=c(a,r.decimals,n),g=l(o,f),h=u(d,t.decimals,e);return{data:{marketName:`${r.symbol}/${t.symbol}`,tradeDirection:"sell",swapSource:m,priceImpact:p,fromAssetSymbol:r.symbol,fromAssetAddress:r.mint,fromAssetAmount:(0,i.amountToUiAmount)(a,r.decimals),fromAssetUsdPrice:n,fromAssetUsdVolume:f,toAssetSymbol:t.symbol,toAssetAddress:t.mint,toAssetAmount:(0,i.amountToUiAmount)(s,t.decimals),toAssetUsdPrice:e,toAssetUsdVolume:o,totalUsdVolume:g,feeUsd:h}}}return{}}),[e,n,s,t,d,p,m,a,r])}const u=(e,t,n)=>n&&e>0?e/10**t*n:0,c=(e,t,n)=>{if(n){const o=(0,i.amountToUiAmount)(e,t);return new(0,r.BigNumber)(o).times(new(0,r.BigNumber)(n)).toNumber()}},l=(e,t)=>t&&e?t>e?t:e:null!=t?t:e})),s.register("I4BHf",(function(n,o){e(n.exports,"useExchangeRate",(function(){return c}));var r=s("kAKNF"),i=s("29o0l"),a=s("Nt4tV");const u=t(r)(1);function c(e,t,n){const[o,r]=(0,i.useState)(!1),s=(0,i.useCallback)((()=>r((e=>!e))),[]);return(0,i.useMemo)((()=>{let r=!1,i="";if(t&&n){const{buyToken:s,sellToken:c}=t,{buyAmount:l,sellAmount:d}=n,p=(0,a.amountToUiAmount)(l,s.decimals),m=(0,a.amountToUiAmount)(d,c.decimals),f=p.dividedBy(m),g=`1 ${c.symbol} ≈ ${(0,a.formatTokenAmount)(f)} ${s.symbol}`,h=`1 ${s.symbol} ≈ ${(0,a.formatTokenAmount)(u.dividedBy(f))} ${c.symbol}`;r=Number(n.buyAmount)===e,i=o?h:g}return{isBestRate:r,rate:i,flip:s}}),[e,n,o,t,s])}})),s.register("dMwYe",(function(t,n){e(t.exports,"useFeeBreakdown",(function(){return c}));var o=s("43063"),r=s("29o0l"),i=s("Nt4tV"),a=s("azr2P"),u=s("iX5lP");function c(e,t){const{t:n}=(0,o.useTranslation)(),{currentQuote:s}=(0,u.useQuote)();return(0,r.useMemo)((()=>{if(s&&t){const{phantomFee:o,serumAccountDeposits:r,tokenAccountDeposits:u}=s.fees;return{networkFee:{label:n("swapQuoteSolanaNetwork"),value:e},tokenAccountFee:{label:n("swapQuoteOneTimeTokenAccount"),value:(0,a.formatFee)(u.amount,t)},serumAccountFee:{label:n("swapQuoteOneTimeSerumAccount"),value:(0,a.formatFee)(r.amount,t)},phantomFeePercent:{label:o.pct?n("swapQuoteFeeDisclaimer",{feePercentage:(0,i.formatPercentage)(o.pct)}):"",value:o.pct?`${o.pct}`:""}}}}),[s,e,t,n])}})),s.register("azr2P",(function(t,n){e(t.exports,"formatFee",(function(){return r}));var o=s("Nt4tV");function r(e,t){if(e<=0)return"";const n=(0,o.lamportsToSolana)(e);return(null==t?void 0:t.usd)?`${(0,o.formatDollarAmount)(t.usd*n,{minimumAmount:1e-5,decimalFormatSmallNumbers:"0.[00000]",format:"0,0.[00]"})}`:`${(0,o.formatTokenAmount)(n)} SOL`}})),s.register("iX5lP",(function(t,n){e(t.exports,"useQuote",(function(){return i}));var o=s("29o0l"),r=s("iTQ0V");function i(){var e,t;const n=(0,r.useSwapperStore)((e=>e.quote)),s=(0,r.useSwapperStore)((e=>e.hasNoRoutes)),i=(0,r.useSwapperStore)((e=>e.selectedProviderIndex)),a=(0,o.useMemo)((()=>n?n.quotes:[]),[n]),u=a[i];return{bestBuyAmount:parseInt(null!==(t=null===(e=a[0])||void 0===e?void 0:e.buyAmount)&&void 0!==t?t:0),currentQuote:u,hasNoRoutes:s,quote:n,quotes:a,selectedProviderIndex:i}}})),s.register("iTQ0V",(function(n,o){e(n.exports,"useSwapperStore",(function(){return a}));var r=s("gTwcH");const i={buyAsset:void 0,buyFungible:void 0,buyUsdValue:void 0,sellAsset:void 0,sellFungible:void 0,sellUsdValue:void 0,sellAmount:"",uiSellAmount:"",quote:void 0,multichainQuoteResponse:void 0,selectedProviderIndex:0,gasEstimation:void 0,isFetchingGasEstimation:!1,maxGasEstimation:void 0,quoteFetchIntervalToggle:!0,refuelEnabled:!1,hasNoRoutes:!1,isFetchingQuote:!1,error:null},a=t(r)((e=>Object.assign(Object.assign({},i),{resetQuote:()=>e({quote:i.quote,multichainQuoteResponse:i.multichainQuoteResponse,isFetchingQuote:i.isFetchingQuote,hasNoRoutes:i.hasNoRoutes,selectedProviderIndex:i.selectedProviderIndex,error:i.error}),resetSwapper:()=>e({quote:i.quote,multichainQuoteResponse:i.multichainQuoteResponse,gasEstimation:i.gasEstimation,isFetchingGasEstimation:i.isFetchingGasEstimation,maxGasEstimation:i.maxGasEstimation,quoteFetchIntervalToggle:i.quoteFetchIntervalToggle,error:i.error,sellAmount:"",uiSellAmount:""}),setBuyAsset:t=>e({buyAsset:t}),setBuyFungible:t=>e({buyFungible:t}),setBuyUsdValue:t=>e({buyUsdValue:t}),setHasNoRoutes:t=>e({hasNoRoutes:t}),setIsFetchingQuote:t=>e({isFetchingQuote:t}),setQuote:t=>e({quote:t,hasNoRoutes:!1}),setMultichainQuoteResponse:t=>e({multichainQuoteResponse:t,hasNoRoutes:!1}),setSelectedProviderIndex:t=>e({selectedProviderIndex:t}),setGasEstimation:t=>e({gasEstimation:t}),setIsFetchingGasEstimation:t=>e({isFetchingGasEstimation:t}),setMaxGasEstimation:t=>e({maxGasEstimation:t}),setQuoteFetchIntervalToggle:t=>e({quoteFetchIntervalToggle:t}),setRefuelEnabled:t=>e({refuelEnabled:t}),setSellAmount:t=>e({sellAmount:t}),setSellUsdValue:t=>e({sellUsdValue:t}),setSellAsset:t=>e({sellAsset:t}),setSellFungible:t=>e({sellFungible:t}),setUiSellAmount:t=>e({uiSellAmount:t}),setError:t=>e({error:t})})))})),s.register("eFZiv",(function(t,n){e(t.exports,"useFetchSwapBuyAssetsList",(function(){return p}),(function(e){return p=e}));var o=s("5ekp2"),r=s("9CoSy"),i=s("3YDVy"),a=s("2UOPE"),u=s("iTQ0V");s("f2tU6");var c=s("7NBkj"),l=s("7SmhG"),d=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};function p(e,t){const{owner:n,cluster:s}=t,{data:p}=(0,i.useMintToAssetMap)(n,s),m=(0,u.useSwapperStore)((e=>e.sellAsset)),f=m&&"solana"!==m.type?m.data.mintPubKey:r.WRAPPED_SOLANA.address,g=!!f&&!!e,h=["fetch-swap-to-assets-list",f];return(0,o.useQuery)({enabled:g,queryKey:h,queryFn:function(){return d(this,void 0,void 0,(function*(){const e=yield(0,c.getSwapPairsAsync)([f]),t=[],o=e[f],{length:s}=o;for(let e=0;e<s;e++){const s=o[e],i=s.mint===r.WRAPPED_SOLANA.address&&a.SHOULD_UNWRAP_WRAPPED_SOL?"":s.mint;let u;const c=p.get(i),d=void 0!==c&&"spl-token"===c.type&&""!==c.data.pubkey,m=void 0!==c&&"solana"===c.type;u=d||m?c:(0,l.swapPairsAssetInfoToAsset)(s,n),u&&t.push(u)}return e?t.sort(i.assetSorter):[]}))}})}})),s.register("3YDVy",(function(t,n){e(t.exports,"SOLANA_STATIC_VALUES",(function(){return P}),(function(e){return P=e})),e(t.exports,"useLamportBalance",(function(){return C}),(function(e){return C=e})),e(t.exports,"useSPLTokenAccountsByStandard",(function(){return D}),(function(e){return D=e})),e(t.exports,"useSPLTokenPrices",(function(){return Q}),(function(e){return Q=e})),e(t.exports,"useFetchSPLTokenJSONMetadata",(function(){return G}),(function(e){return G=e})),e(t.exports,"useSelectBestMedia",(function(){return oe}),(function(e){return oe=e})),e(t.exports,"useBestCollectionName",(function(){return re}),(function(e){return re=e})),e(t.exports,"getImageThroughProxy",(function(){return ie}),(function(e){return ie=e})),e(t.exports,"getScaledImageURI",(function(){return ae}),(function(e){return ae=e})),e(t.exports,"getScaledImageURIExt",(function(){return ue}),(function(e){return ue=e})),e(t.exports,"assetKeyExtractor",(function(){return ce}),(function(e){return ce=e})),e(t.exports,"assetSorter",(function(){return de}),(function(e){return de=e})),e(t.exports,"getMintPubkeyFromAsset",(function(){return pe}),(function(e){return pe=e})),e(t.exports,"useSPLAssets",(function(){return me}),(function(e){return me=e})),e(t.exports,"useAssetsAndSPLTokenList",(function(){return ge}),(function(e){return ge=e})),e(t.exports,"useMintToAssetMap",(function(){return ye}),(function(e){return ye=e}));var o=s("8tcqI"),r=s("6ElgT"),i=s("56oyT"),a=s("hMVEP"),u=s("HlEsU"),c=s("csW2r"),l=s("RVqnc"),d=s("5ekp2"),p=s("7dHjq"),m=s("29o0l"),f=s("16XMG"),g=s("9CoSy"),h=s("dY6gO"),y=s("hRUHU"),S=s("6tBWY"),v=s("kAjeg"),w=s("lvcyB"),b=s("jF6Pg"),A=s("Nt4tV"),k=s("7qsqs"),T=s("lAsdm"),E=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const F=o.Buffer.from("metadata"),x=r.METADATA_PROGRAM_ID.toBuffer(),I=(0,l.toMilliseconds)({minutes:1}),P={coingeckoId:"solana",decimals:9,logoURI:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL"};Object.assign(Object.assign({},P),{amount:"0",usd:0,usd24hChange:0});function C(e,t){return(0,d.useQuery)({enabled:""!==e,queryKey:["cluster",t,"owner",e,"lamport-balance"],refetchInterval:I,queryFn(){return E(this,void 0,void 0,(function*(){const n=(0,w.getRPCURLByCluster)(t),o=yield function(e,t){return E(this,void 0,void 0,(function*(){const n=yield fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"getBalance",params:[t,{commitment:"confirmed"}]})}),o=yield n.json();if("error"in o)throw console.error(o.error,t),new Error(o.error.message);return o.result.value.toString()}))}(n,e);return o}))},onSuccess(n){(()=>{E(this,void 0,void 0,(function*(){const o=(yield(0,k.getStorageValue)(u.StorageKeys.OwnerToClusterToLamportBalance))||{},r=o[e]||{};(0,k.setStorageValue)(u.StorageKeys.OwnerToClusterToLamportBalance,Object.assign(Object.assign({},o),{[e]:Object.assign(Object.assign({},r),{[t]:n})}))}))})()}})}const N=e=>{const t=F;return a.PublicKey.findProgramAddressSync([t,x,e.toBuffer()],r.METADATA_PROGRAM_ID)};function M(e,t){return E(this,void 0,void 0,(function*(){const n=new Map,{Metadata:s}=yield(0,r.getMetaplexFoundationDeps)(),i=t.map((t=>E(this,void 0,void 0,(function*(){const r=yield function(e,t){return E(this,void 0,void 0,(function*(){const n=yield fetch(e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"getMultipleAccounts",params:[t,{encoding:"base64",commitment:"confirmed"}]})}),o=yield n.json();if("error"in o)throw console.error(o.error),new Error(o.error.message);return o}))}(e,t);for(const e of r.result.value)if(e){const[t]=s.deserialize(o.Buffer.from(e.data[0],"base64"));n.set(t.mint.toString(),t)}}))));return yield Promise.all(i),n}))}const U="SPLTokenAccounts";var O,R;(R=O||(O={})).NonFungible="NonFungible",R.SemiFungible="SemiFungible",R.Fungible="Fungible",R.NonFungibleEdition="NonFungibleEdition",R.ProgrammableNonFungible="ProgrammableNonFungible";class L extends Error{getMessage(){return`Something went wrong: ${this.message}`}constructor(e){super(e),this.statusCode=400,Object.setPrototypeOf(this,L.prototype),this.name="FungibleError"}}function _(e=101){return E(this,void 0,void 0,(function*(){try{const t=(yield(yield fetch("https://static.phantom.app/assets/solana.tokenlist.json")).json()).tokens.filter((t=>t.chainId===e)),n=new Map;for(const e of t)n.set(e.address,e);return n}catch(e){throw c.telemetry.captureError(e,c.FeatureTag.Fungibles),new L("Failed to get SPL token map")}}))}function D(e,t){const n=(0,p.useQueryClient)();return(0,d.useQuery)({enabled:""!==e,queryKey:[U,{pubkey:e,cluster:t}],refetchInterval:I,queryFn({queryKey:e}){var n,o;return E(this,void 0,void 0,(function*(){const[,{pubkey:r}]=e,s=(0,w.getTokenListNetworkIDByCluster)(t),[i,a]=yield Promise.all([B(r,s),_(s)]),u=null===(n=null==i?void 0:i.response)||void 0===n?void 0:n.results;if(u.infos=a,!u)return null;if(null===(o=yield(0,k.getStorageValue)("hideSuspiciousCollectibles"))||void 0===o||o){const e=yield(0,S.getNFTBlocklist)(),t=[O.SemiFungible,O.NonFungible,O.NonFungibleEdition,O.ProgrammableNonFungible];for(const n of t){const t=u[n].filter((({mintPubKey:t})=>!e.includes(t)));u[n]=t}}return u}))},onSuccess(o){(()=>{E(this,void 0,void 0,(function*(){const r=o.Fungible.reduce(((e,t)=>(t.coingeckoId&&e.push(t.coingeckoId),e)),["solana"]),s=yield(0,k.getStorageValue)(u.StorageKeys.PriceMap);(0,i.getPricesByCoingeckoId)(r).then((e=>E(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},s),e);n.setQueryData([H],t),(0,k.setStorageValue)(u.StorageKeys.PriceMap,t)})))).catch(console.error);(function(e,t){var n;return E(this,void 0,void 0,(function*(){const o=new Set,r=[[]],s=new Map;for(const e of[t.NonFungible,t.NonFungibleEdition,t.SemiFungible,t.ProgrammableNonFungible])for(const t of e){let{collectionPubKey:e}=t;if(e&&!o.has(e)){o.add(e);const t=new(0,a.PublicKey)(e),[n]=yield N(t),s=r[r.length-1];s&&s.length<100?s.push(n.toString()):r.push([n.toString()])}if(!e){if(t.creators){const n=t.creators.find((e=>e.verified));n&&(e=null==n?void 0:n.address.toString())}e||(e=t.mintPubKey)}const i=null!==(n=s.get(e))&&void 0!==n?n:[];i.push(t),s.set(e,i)}let i=new Map;try{i=yield M(e,r)}catch(e){console.error(e)}const u=[];for(const[e,t]of s){t.sort(((e,t)=>{var n,o;const r=null!==(n=e.name)&&void 0!==n?n:"",s=null!==(o=t.name)&&void 0!==o?o:"",i=r.localeCompare(s);if(r.localeCompare(s))return i;const a=e.pubkey,u=t.pubkey;return a.localeCompare(u)}));const[n]=t;if(n){const o=i.get(e);o?u.push({key:e,name:o.data.name,uri:n.uri||o.data.uri,items:t}):u.push({key:e,name:null,uri:n.uri,items:t})}}return u.sort(((e,t)=>{var n,o;if(e.items.length>t.items.length)return-1;if(t.items.length>e.items.length)return 1;const r=null!==(n=e.name)&&void 0!==n?n:e.key,s=null!==(o=t.name)&&void 0!==o?o:t.key;return r.localeCompare(s)})),u}))})((0,w.getRPCURLByCluster)(t),o).then((o=>{n.setQueryData([V,{pubkey:e,cluster:t}],o)})).catch(console.error)}))})()}})}const B=(e,t)=>E(void 0,void 0,void 0,(function*(){const n=new URLSearchParams;n.append("ownerPubKey",e),n.append("chainId",t.toString());const o=`${(0,f.getAPIEnvironment)()}/solana/spl_token_accounts?${n.toString()}`,r=yield fetch(o,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!r.ok){const e="Error fetching spl token accounts";throw console.error(e),new Error(e)}return yield r.json()}));const H="SPLTokenPrices";function Q(){const e=(0,p.useQueryClient)(),[t,n]=(0,m.useState)((()=>{var t;return null!==(t=e.getQueryData([H]))&&void 0!==t?t:null}));return(0,m.useEffect)((()=>e.getQueryCache().subscribe((()=>{var t;const o=null!==(t=e.getQueryData([H]))&&void 0!==t?t:null;o&&n(o)}))),[e]),t}const V="SPLTokenCollections";const j="SPLTokenJSONMetadata";function G(e){const t=[j,e];return(0,d.useQuery)({queryKey:t,queryFn(){return E(this,void 0,void 0,(function*(){return yield function(e){return E(this,void 0,void 0,(function*(){if(!e)return null;const t=z(e);if(t)return t;const n=`https://metaplex-cache.phantom.app/?url=${encodeURIComponent(e)}`;for(const t of[n,e])try{const e=yield fetch(t,{headers:{"content-type":"application/json"}});if(e.ok){const t=yield e.json();if(t&&"object"==typeof t)return t}}catch(e){console.error(`Failed to fetch URL ${t}`)}return console.error("Failed to fetch collectible metadata from origin server"),null}))}(e)}))},staleTime:T.CacheTime.Short,cacheTime:T.CacheTime.Long})}const z=e=>{const t=new RegExp(/(data:)([\w/+-]*)(;charset=[\w-]+|;base64){0,1},(.*)/i);if(!t.test(e))return;const n=t.exec(e);if(!n)return;const o=n[2],r=n[3],s=n[4];return"application/json"===o&&";base64"!==r?JSON.parse(s):void 0};const K=new Set(["image","audio","video","model"]),q=new Set([y.FileExtension.JPEG,y.FileExtension.JPG,y.FileExtension.PNG,y.FileExtension.GIF,y.FileExtension.SVG]),$=new Set([y.FileExtension.MP3,y.FileExtension.WAV,y.FileExtension.OGA,y.FileExtension.FLAC]),W=new Set([y.FileExtension.WEBM,y.FileExtension.MP4,y.FileExtension.M4V,y.FileExtension.OGV,y.FileExtension.OGG,y.FileExtension.MOV]),J=new Set([y.FileExtension.GLTF,y.FileExtension.GLTFBINARY,y.FileExtension.GLB]),Y=e=>q.has(e)?`image/${e}`:W.has(e)?`video/${e}`:J.has(e)?"model/gltf-binary":$.has(e)?`audio/${e}`:void 0,X=e=>{const t=(0,l.parseURL)(e);if(!t)return null;if("http:"!==t.protocol&&"https:"!==t.protocol)return null;const n=t.searchParams.get("ext");if(n){const t=Y(n);if(t)return{type:t,uri:e}}const o=(0,l.getLast)(e.split("."));if(o){const t=Y(o);if(t)return{type:t,uri:e}}return null},Z=e=>{const{image:t}=e;if(t){const e=X(t);return e||{type:"image/png",uri:t}}return null},ee=e=>{const{animation_url:t}=e;if(t){const n=X(t);if(n)return n;const o=(0,l.parseURL)(t);if(o&&("http:"===o.protocol||"https:"===o.protocol)){if("html"===o.searchParams.get("ext"))return null}const{properties:r}=e;if(null==r?void 0:r.category){const{category:e}=r;let n="";switch(e){case"image":n="image/png";break;case"video":n="video/mp4";break;case"audio":n="audio/mp3";break;case"model":case"vr":n="model/gltf-binary"}if(n)return{type:n,uri:t}}}return null},te=e=>{if(!(e=>K.has(e))(e))switch(e){case"image":return 0;case"audio":return 1;case"video":return 2;case"model":return 3}return 0},ne=e=>{var t,n,o;return null!==(o=null!==(n=null!==(t=(e=>{var t,n;let o=null!==(n=null===(t=e.properties)||void 0===t?void 0:t.files)&&void 0!==n?n:[];Array.isArray(o)||(o=[o]);let r=null;for(const e of o){let t=null;if("string"==typeof e)t=X(e);else if((null==e?void 0:e.type)&&(null==e?void 0:e.uri)){if(e.cdn)return e;t={type:e.type,uri:e.uri}}t&&r&&te(r.type)<te(t.type)&&(r=t)}})(e))&&void 0!==t?t:ee(e))&&void 0!==n?n:Z(e))&&void 0!==o?o:null},oe=e=>(0,m.useMemo)((()=>e?ne(e):null),[e]),re=e=>(0,m.useMemo)((()=>e?(e=>{const{collection:t}=e;if(t){const{name:e,family:n}=t;if(e)return e;if(n)return n}const{external_url:n}=e;if(n){const e=(0,l.formatURL)({url:n,format:"domain"});if(e)return e}const{name:o}=e;if(o){const e=(0,v.parseName)(o);if(e)return e}const{symbol:r}=e;return r||null})(e):null),[e]),se=e=>(0,b.getDevicePixelRatio)()*e,ie=(e,t=!1)=>`https://api.phantom.app/image-proxy/?image=${encodeURIComponent(e)}${t?"&anim=false":""}`,ae=(e,t,n,o=!1)=>{const r=se(n);return`${ie(e)}&fit=scale-down&${t}=${r}${o?"&anim=false":""}`},ue=(e,t,n,o=!1)=>{const r=se(t),s=se(n);return`${ie(e)}&fit=cover&width=${r}&height=${s}${o?"&anim=false":""}`},ce=(e,t)=>{switch(e.type){case"solana":return"solana";case"spl-token":return`${e.data.pubkey}-${t}`}},le=(e,t,n)=>{var o,r;const s=n[e],i=null!==(o=null==s?void 0:s.usd)&&void 0!==o?o:0,a=null!==(r=null==s?void 0:s.usd_24h_change)&&void 0!==r?r:0,u=i*t.toNumber();return{usd:u,usd24hChange:u-u/(1+a/100)}},de=(e,t,n)=>{let o=0;n&&(o=((e,t)=>{const n=e.data.usd,o=t.data.usd;return n&&o?n>o?-1:n<o?1:0:n&&!o?-1:o&&!n?1:0})(e,t));const r=((e,t)=>{const n=(0,A.amountToUiAmount)(e.data.amount,e.data.decimals),o=(0,A.amountToUiAmount)(t.data.amount,t.data.decimals);return n.isGreaterThan(o)?-1:n.isLessThan(o)?1:0})(e,t),s=((e,t)=>{var n,o,r,s,i,a;const u=null!==(o=null===(n=e.data.name)||void 0===n?void 0:n.toUpperCase())&&void 0!==o?o:null===(r=e.data.symbol)||void 0===r?void 0:r.toUpperCase(),c=null!==(i=null===(s=t.data.name)||void 0===s?void 0:s.toUpperCase())&&void 0!==i?i:null===(a=t.data.symbol)||void 0===a?void 0:a.toUpperCase();if(u&&c){if(u>c)return 1;if(u<c)return-1}return u&&!c?-1:c&&!u?1:0})(e,t);return o||r||s};function pe(e){return"solana"===e.type?g.SOLANA_ID:e.data.coingeckoId===g.USDT_COINGECKO_ID?h.USDT_MINT_ADDRESS:e.data.mintPubKey}const me=({publicKey:e,standards:t,cluster:n,cachedLamportBalance:o,cachedSPLTokensByStandard:r,cachedPrices:s={},hiddenMints:i,sortByPrice:a=!1})=>{var u,c;const l=C(e,n),d=null!==(u=l.data)&&void 0!==u?u:o,p=!d&&!l.isFetched,f=D(e,n),g=null!==(c=f.data)&&void 0!==c?c:r,h=!g&&!f.isFetched,y=Q(),S=null!=y?y:s,v=(0,m.useMemo)((()=>{if(!g||!d)return[];const e=[];if(!(null==i?void 0:i.has("solana"))){const t=Object.assign({amount:d},P),n=le(t.coingeckoId,(0,A.amountToUiAmount)(t.amount,t.decimals),S),o={type:"solana",data:Object.assign(Object.assign({},t),n)};e.push(o)}for(const n of t){const t=g[n];for(const n of t){if(null==i?void 0:i.has(n.mintPubKey))continue;const t={type:"spl-token",data:Object.assign(Object.assign({},n),{usd:0,usd24hChange:0})};if(n.coingeckoId){const e=(0,A.amountToUiAmount)(n.amount,n.decimals),o=le(n.coingeckoId,e,S);t.data.usd=o.usd,t.data.usd24hChange=o.usd24hChange}e.push(t)}}return e}),[g,d,t,i,S]),w=(0,m.useMemo)((()=>v.sort(((e,t)=>de(e,t,a?S:void 0)))),[v,a,S]),b=(0,m.useCallback)((()=>{E(void 0,void 0,void 0,(function*(){yield f.refetch(),yield l.refetch()}))}),[f,l]);return{data:w,dataUpdatedAt:f.dataUpdatedAt,isFetching:p||h,error:l.error||f.error,refetch:b}},fe=["Fungible"],ge=(e,t)=>{const n=me({publicKey:e,standards:fe,cluster:t,sortByPrice:!0}),{data:o}=n,r=D(e,t),{data:s}=r,i=null==s?void 0:s.infos,a=(0,m.useMemo)((()=>i),[i]),u=(0,m.useMemo)((()=>{const t=new Map;for(const e of o)switch(e.type){case"solana":break;case"spl-token":t.set(e.data.mintPubKey,e)}if(!a)return[];const n=Array.from(a.values()),r=[];for(const o of n){if(t.has(o.address)||0===o.decimals)continue;const n=Se({info:o,publicKey:e});r.push(n),t.set(o.address,n)}return r}),[a,o,e]),c=(0,m.useMemo)((()=>o.concat(u)),[o,u]),l=n.isFetching||!r.isFetched,d=n.error||r.error,p=n.refetch,f=r.refetch;return{data:c,isFetching:l,error:d,refetch:(0,m.useCallback)((()=>{p(),f()}),[p,f])}},he=["Fungible"],ye=(e,t)=>{const n=me({publicKey:e,standards:he,cluster:t}),{data:o}=n,r=D(e,t),{data:s}=r,i=null==s?void 0:s.infos,a=(0,m.useMemo)((()=>i),[i]),u=(0,m.useMemo)((()=>{const t=new Map;if(!a)return t;for(const e of o){const n="solana"===e.type?"":e.data.mintPubKey;t.set(n,e)}const n=Array.from(a.values());for(const o of n){if(t.has(o.address))continue;const n=0===o.decimals?O.SemiFungible:O.Fungible,r=Se({info:o,publicKey:e,tokenStandard:n});t.set(o.address,r)}return t}),[a,o,e]),c=n.isFetching||!r.isFetched,l=n.error||r.error,d=n.refetch,p=r.refetch;return{data:u,isFetching:c,error:l,refetch:(0,m.useCallback)((()=>{d(),p()}),[d,p])}},Se=({info:e,publicKey:t,tokenStandard:n})=>{var o,r,s;const i={standard:null!=n?n:O.Fungible,pubkey:"",mintPubKey:e.address,ownerPubKey:t,decimals:e.decimals,amount:"0",delegate:null,delegatedAmount:"0",logoURI:null!==(o=e.logoURI)&&void 0!==o?o:null,name:e.name,symbol:e.symbol,coingeckoId:null!==(s=null===(r=e.extensions)||void 0===r?void 0:r.coingeckoId)&&void 0!==s?s:null,state:"uninitialized",collectionPubKey:"",uses:null,creators:[],uri:""};return{type:"spl-token",data:Object.assign(Object.assign({},i),{usd:0,usd24hChange:0})}}})),s.register("dY6gO",(function(t,n){e(t.exports,"PRICES_FETCH_TIMEOUT_MS",(function(){return r})),e(t.exports,"COLLECTIBLES_FETCH_TIMEOUT_MS",(function(){return i})),e(t.exports,"USDT_MINT_ADDRESS",(function(){return a}));var o=s("RVqnc");(0,o.toMilliseconds)({seconds:30});const r=(0,o.toMilliseconds)({seconds:10}),i=((0,o.toMilliseconds)({seconds:10}),(0,o.toMilliseconds)({seconds:5}),(0,o.toMilliseconds)({seconds:15})),a="Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"})),s.register("hRUHU",(function(t,n){var o,r,s,i,a,u,c,l;e(t.exports,"SecretType",(function(){return o})),e(t.exports,"FileExtension",(function(){return s})),e(t.exports,"CollectibleMediaType",(function(){return a})),e(t.exports,"StakeAccountType",(function(){return c})),(r=o||(o={})).PrivateKey="privateKey",r.Mnemonic="mnemonic",(i=s||(s={})).SVG="svg",i.PNG="png",i.GIF="gif",i.JPG="jpg",i.JPEG="jpeg",i.WEBM="webm",i.MP4="mp4",i.M4V="m4v",i.OGV="ogv",i.OGG="ogg",i.MOV="mov",i.MP3="mp3",i.WAV="wav",i.OGA="oga",i.FLAC="flac",i.GLTF="gltf",i.GLTFBINARY="gltf-binary",i.GLB="glb",(u=a||(a={})).Image="image",u.Video="video",u.Audio="audio",u.VR="vr",(l=c||(c={})).Initialized="initialized",l.Delegated="delegated"})),s.register("kAjeg",(function(t,n){e(t.exports,"groupCollectibles",(function(){return W}),(function(e){return W=e})),e(t.exports,"parseName",(function(){return Y}),(function(e){return Y=e})),e(t.exports,"getMetadata",(function(){return X}),(function(e){return X=e})),e(t.exports,"getCollectibleUriData",(function(){return Z}),(function(e){return Z=e})),e(t.exports,"parseCollectibles",(function(){return ee}),(function(e){return ee=e}));var o=s("iOvk1"),r=s("hMVEP"),i=s("RVqnc"),a=s("dY6gO"),u=s("fxm4i"),c=s("hRUHU"),l=s("24hfq");s("izATd");var d,p,m=s("cBVvR"),f=s("lvcyB"),g=s("8tcqI").Buffer,h=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};(p=d||(d={}))[p.Uninitialized=0]="Uninitialized",p[p.MetadataV1=4]="MetadataV1",p[p.EditionV1=1]="EditionV1",p[p.MasterEditionV1=2]="MasterEditionV1",p[p.MasterEditionV2=6]="MasterEditionV2",p[p.EditionMarker=7]="EditionMarker";class y{constructor(e){this.address=e.address,this.verified=e.verified,this.share=e.share}}class S{constructor(e){this.name=e.name,this.symbol=e.symbol,this.uri=e.uri,this.sellerFeeBasisPoints=e.sellerFeeBasisPoints,this.creators=e.creators}}class v{constructor(e){var t;this.key=d.MetadataV1,this.updateAuthority=e.updateAuthority,this.mint=e.mint,this.data=e.data,this.primarySaleHappened=e.primarySaleHappened,this.isMutable=e.isMutable,this.editionNonce=null!==(t=e.editionNonce)&&void 0!==t?t:null}}const w=new Map([[S,{kind:"struct",fields:[["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[y]}]]}],[y,{kind:"struct",fields:[["address","pubkey"],["verified","u8"],["share","u8"]]}],[v,{kind:"struct",fields:[["key","u8"],["updateAuthority","pubkey"],["mint","pubkey"],["data",S],["primarySaleHappened","u8"],["isMutable","u8"],["editionNonce",{kind:"option",type:"u8"}]]}]]),b=new RegExp("\0","g"),A=e=>{const t=(0,m.deserializeUnchecked)(w,v,e);return t.data.name=t.data.name.replace(b,""),t.data.uri=t.data.uri.replace(b,""),t.data.symbol=t.data.symbol.replace(b,""),t},k=[c.FileExtension.JPEG,c.FileExtension.JPG,c.FileExtension.PNG,c.FileExtension.GIF],T=new Set(k),E=[c.FileExtension.WEBM,c.FileExtension.MP4,c.FileExtension.M4V,c.FileExtension.OGV,c.FileExtension.OGG,c.FileExtension.MOV],F=new Set(E),x=[c.FileExtension.MP3,c.FileExtension.WAV,c.FileExtension.OGA,c.FileExtension.FLAC],I=new Set(x),P=[c.FileExtension.GLTF,c.FileExtension.GLTFBINARY,c.FileExtension.GLB],C=new Set(P),N=[...k,...E,...P,...x],M=new Set(N),U=e=>M.has(e),O=e=>T.has(e)?`image/${e}`:F.has(e)?`video/${e}`:C.has(e)?`model/${e}`:I.has(e)?`audio/${e}`:void 0,R=e=>{if(!e||"object"!=typeof e)return!1;const t="string"==typeof e.trait_type,n="string"==typeof e.value||"number"==typeof e.value;return t&&n},L=e=>R(e)?[e]:Array.isArray(e)?e.filter(R):[],_=e=>(e=>{if(!e||"object"!=typeof e)return!1;if(!e.category||"string"!=typeof e.category)return!1;if(!/^(image|video|audio|vr|html)$/.test(e.category))return!1;if(!Array.isArray(e.files))return!1;for(const t of e.files)if(!D(t))return!1;return!0})(e)?e:(e=>{if(!e||"object"!=typeof e)return!1;if(!e.category||"string"!=typeof e.category)return!1;if(!/^(image|video|audio|vr|html)$/.test(e.category))return!1;if(!Array.isArray(e.files))return!1;for(const t of e.files)if("string"!=typeof t)return!1;return!0})(e)?{category:e.category,files:e.files.map((e=>B(e))).filter((e=>!!e))}:void 0,D=e=>{if(!e||"object"!=typeof e)return!1;if(!e.type||"string"!=typeof e.type)return!1;if(!e.uri||"string"!=typeof e.uri)return!1;const t=typeof e.cdn;return"undefined"===t||"boolean"===t},B=e=>{const t=(0,i.parseURL)(e);if(!t)return;if("http:"!==t.protocol&&"https:"!==t.protocol)return;const n=t.searchParams.get("ext");if(n&&U(n)){const t=O(n);if(t)return{type:t,uri:e}}const o=(0,i.getLast)(e.split("."));if(o&&U(o)){const t=O(o);if(t)return{type:t,uri:e}}},H=e=>{const t=(e=>{const[t,n]=e.split("/");if(t&&n)return t.startsWith("image")&&T.has(n)?c.CollectibleMediaType.Image:t.startsWith("video")&&F.has(n)?c.CollectibleMediaType.Video:t.startsWith("model")&&C.has(n)?c.CollectibleMediaType.VR:t.startsWith("audio")&&I.has(n)?c.CollectibleMediaType.Audio:void 0})(e.type);if(t){return{type:t,fileUri:e.uri}}},Q=e=>{if(!("object"==typeof e&&null!==e))return!1;return Object.values(e).every((e=>"string"==typeof e||void 0===e))},V=(e,t,n)=>{var r,s,i,a,u,c,d,p;const{mint:m,updateAuthority:f}=t,g=m.toString(),{creators:h=[],symbol:y,uri:S}=t.data,v=t.data.name,w=null!=n?n:{mint:g,name:v},b=w.name||v,A=z(w),k=null!==(i=null===(s=null===(r=null==h?void 0:h.find((e=>1===e.verified)))||void 0===r?void 0:r.address)||void 0===s?void 0:s.toString())&&void 0!==i?i:"",{collection:T,external_url:E,description:F,image:x,attributes:I}=w;return{type:"collectible",chain:o.Chain.Solana,address:g,account:e.pubkey,collectionFamily:null!==(a=null==T?void 0:T.family)&&void 0!==a?a:"",collectionName:null!==(u=null==T?void 0:T.name)&&void 0!==u?u:"",collectionKey:k,name:b,symbol:y,uri:S,externalUrl:E,description:F,image:x,media:A,decimals:null!==(c=e.tokenAmount.decimals)&&void 0!==c?c:0,balance:null!==(d=e.tokenAmount.uiAmount)&&void 0!==d?d:1,delegate:e.delegate,attributes:I,baseBalance:new(0,l.BigNumber)(null!==(p=e.tokenAmount.amount)&&void 0!==p?p:1),updateAuthority:f,metaName:v}},j=(e,t)=>{const{mintAddress:n}=e,{name:r,symbol:s,websiteUrl:i,iconUrl:a,imageUrl:u,description:c,animationUrl:d}=t,p=(e=>{const t=B(e);if(t)return H(t)})(null!=d?d:"");return{type:"collectible",chain:o.Chain.Solana,address:n,account:e.pubkey,collectionFamily:"",collectionName:"",collectionKey:"",name:r,symbol:s,uri:"",externalUrl:i,description:c,image:null!=u?u:a,media:p,decimals:e.tokenAmount.decimals,balance:e.tokenAmount.uiAmount,delegate:e.delegate,baseBalance:new(0,l.BigNumber)(e.tokenAmount.amount),updateAuthority:null,metaName:null}},G=(e,t)=>h(void 0,void 0,void 0,(function*(){const n=yield fetch(e);if(!n.ok)throw new Error(`Failed to fetch data from ${e}`);return((e,t)=>{const n=t&&"object"==typeof t?t:{},{collection:o,description:r,external_url:s,name:i,image:a,animation_url:u,attributes:c}=n,l=_(n.properties);return{name:"string"==typeof i?i:"",mint:e,image:"string"==typeof a||null===a?a:void 0,collection:Q(o)?o:void 0,description:"string"==typeof r?r:void 0,external_url:"string"==typeof s?s:void 0,animation_url:"string"==typeof u?u:void 0,properties:_(l),attributes:L(c)}})(t,yield n.json())})),z=e=>{var t,n,o;const r=e.animation_url;if(r){const n=B(r);if(n){const e=H(n);if(e)return e}if(!n&&(null===(t=e.properties)||void 0===t?void 0:t.category)){if(/^(image|video|audio|vr)$/.test(e.properties.category))return{type:e.properties.category,fileUri:r}}}const s=null!==(o=null===(n=e.properties)||void 0===n?void 0:n.files)&&void 0!==o?o:[];let i;for(const e of s){const t=H(e);if(t){if(e.cdn)return t;(!i||i&&K(i.type)<K(t.type))&&(i=t)}}return i},K=e=>{switch(e){case c.CollectibleMediaType.VR:return 3;case c.CollectibleMediaType.Video:return 2;case c.CollectibleMediaType.Audio:return 1;case c.CollectibleMediaType.Image:return 0}},q=e=>h(void 0,void 0,void 0,(function*(){const t=[g.from("metadata"),u.METADATA_PROGRAM_ID.toBuffer(),e.toBuffer()];return(yield r.PublicKey.findProgramAddress(t,u.METADATA_PROGRAM_ID))[0]})),$=e=>h(void 0,void 0,void 0,(function*(){const t=[];let n=0;for(const o of Object.values(e)){const{data:e}=o;t.push(A(e)),n++,n%15==0&&(yield Promise.resolve())}return t})),W=e=>{var t;const n=new Map;for(const o of e){const e=o.collectionKey||o.address,r=null!==(t=n.get(e))&&void 0!==t?t:{collectibles:[],key:e,name:J(o)};r.collectibles=[...r.collectibles,o],r.collectibles.sort(((e,t)=>e.name.localeCompare(t.name))),n.set(e,r)}const o=[...n.values()];return o.sort(((e,t)=>{const n=t.collectibles.length-e.collectibles.length;return n||e.name.localeCompare(t.name)})),o},J=e=>{const{collectionFamily:t,collectionName:n,collectionKey:o,externalUrl:r,metaName:s,name:a,symbol:u}=e;if(n)return n;if(t)return t;if(r){const e=(0,i.formatURL)({url:r,format:"domain"});if(e)return e}if(s||a){const e=Y(s)||Y(a);if(e)return e}return u||o},Y=e=>e?e.replace(/(\/|-|_|#)+?\d+(?!-|_|\/)+/g,"").replace(/\d+( of )\d+/g,"").trim():null,X=(e,t)=>h(void 0,void 0,void 0,(function*(){return((e,t)=>h(void 0,void 0,void 0,(function*(){const n=e.map((e=>new(0,r.PublicKey)(e))),o=yield Promise.all((0,i.chunks)(n,15).map((e=>e.map(q))).flat()),s=yield(0,f.getMultipleAccountsAsync)(t,o,"confirmed");return $(s)})))(t.filter((e=>e.tokenAmount.uiAmount>0)).map((e=>e.mintAddress)),e)})),Z=e=>h(void 0,void 0,void 0,(function*(){const t=e.filter((e=>e.data.uri));if(t.length>0){const e=yield Promise.all((0,i.chunks)(t,5).map((e=>e.map((e=>h(void 0,void 0,void 0,(function*(){const{mint:t,data:{name:n,uri:o}}=e,r=t.toString();try{return yield(0,i.withTimeout)(G(o,r),a.COLLECTIBLES_FETCH_TIMEOUT_MS)}catch(e){return{mint:r,name:n}}})))))).flat());return(0,i.objectArrayToMap)(e,"mint")}return{}})),ee=(e,t,n,o)=>{const r=null!=t?t:{},s=o.reduce(((e,t)=>t.data.uri?(e.set(t.mint.toString(),t),e):e),new Map),i=[];for(const t of n){if(0===t.tokenAmount.uiAmount)continue;const n=t.mintAddress.toString(),o=s.get(n),a=r[n];if(o&&a){const e=V(t,o,a);i.push(e);continue}if(t.tokenAmount.uiAmount<=0)continue;const u=e[n];if(!u||!u.isCollectible)continue;const c=j(t,u);i.push(c)}return i}})),s.register("izATd",(function(t,n){e(t.exports,"deserializeBorsh",(function(){return s("cBVvR").deserializeUnchecked}));var o=s("hMVEP");s("cBVvR").BinaryReader.prototype.readPubkey=function(){const e=this.readFixedArray(32);return new(0,o.PublicKey)(e)}})),s.register("jF6Pg",(function(t,n){e(t.exports,"getDevicePixelRatio",(function(){return o}));const o=()=>(null===window||void 0===window?void 0:window.devicePixelRatio)||1})),s.register("lAsdm",(function(t,n){e(t.exports,"CacheTime",(function(){return o}));var o,r,i=s("RVqnc");(r=o||(o={}))[r.Always=1/0]="Always",r[r.Short=(0,i.toMilliseconds)({days:1})]="Short",r[r.Medium=(0,i.toMilliseconds)({days:3})]="Medium",r[r.Long=(0,i.toMilliseconds)({days:7})]="Long"})),s.register("2UOPE",(function(n,o){e(n.exports,"SWAPPER_BASE_URL",(function(){return l})),e(n.exports,"LEGACY_DEFAULT_SLIPPAGE",(function(){return d})),e(n.exports,"MAX_NUMBER_OF_QUOTES",(function(){return p})),e(n.exports,"QUOTE_FETCH_INTERVAL_MS",(function(){return m})),e(n.exports,"SHOULD_UNWRAP_WRAPPED_SOL",(function(){return f})),e(n.exports,"HIGH_PRICE_IMPACT_THRESHOLD",(function(){return g})),e(n.exports,"HIGH_SLIPPAGE_THRESHOLD",(function(){return h})),e(n.exports,"DEFAULT_SLIPPAGE",(function(){return y})),e(n.exports,"INITIAL_BUY_ASSET",(function(){return x})),e(n.exports,"INITIAL_SELL_ASSET",(function(){return I})),e(n.exports,"INITIAL_BUY_FUNGIBLE",(function(){return P})),e(n.exports,"INITIAL_SELL_FUNGIBLE",(function(){return C})),e(n.exports,"SWAP_ASSET_SELECT_TOKEN_STANDARDS",(function(){return N})),e(n.exports,"CHAIN_TO_NATIVE_FUNGIBLE",(function(){return M})),e(n.exports,"CHAIN_TO_USDC_FUNGIBLE",(function(){return U})),e(n.exports,"FUSE_SWAP_ASSET_SEARCH_CONFIG",(function(){return O})),e(n.exports,"PHANTOM_SUPPORT_SWAP_FAILED_URL",(function(){return R})),e(n.exports,"BALANCE_HIDDEN_TEXT",(function(){return L}));var r=s("iOvk1"),i=s("5slFC"),a=s("kAKNF"),u=s("16XMG"),c=s("3YDVy");const l=`${(0,u.getAPIEnvironment)()}/solana/swap/v1`,d=.5,p=5,m=2e4,f=!0,g=5,h=2,y=1,S={id:r.Chains.solana.mainnetID,imageUrl:r.Chains.solana.iconUrl,name:r.Chains.solana.name,symbol:r.Chains.solana.tokenSymbol},v={type:"solana",data:Object.assign(Object.assign({},c.SOLANA_STATIC_VALUES),{amount:"0",usd:0,usd24hChange:0})},w={type:i.FungibleTokenType.SolanaNative,data:{amount:"0",balance:new(t(a))(0),chain:S,coingeckoId:"solana",decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:""}},b={type:"spl-token",data:{amount:"0",coingeckoId:"usd-coin",collectionPubKey:null,creators:[],decimals:6,delegate:null,delegatedAmount:"0",logoURI:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/solana/assets/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintPubKey:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",ownerPubKey:"EtiWtHKB9RRHcSsprD4QVmUt5jjUFbfTZ6bXDc58yC2g",pubkey:"72iTmWTJZmHKWr6rh8a15YFpReJWdaZ8EQNJP32yceKz",standard:i.SPLTokenStandard.Fungible,state:"initialized",symbol:"USDC",uri:"",usd:0,usd24hChange:0,uses:null}},A={type:i.FungibleTokenType.SPL,data:{amount:"0",balance:new(t(a))(0),chain:S,coingeckoId:"usd-coin",decimals:6,key:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",logoUri:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",splTokenAccountPubkey:"EAF7dH8Jy43Xgp68PhyybKhfKxk46NFRkWN4PMCLqMfS",symbol:"USDC",tokenAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",walletAddress:"",programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"}},k={type:i.FungibleTokenType.PolygonNative,data:{chain:{id:r.Chains.polygon.mainnetID,name:r.Chains.polygon.name,symbol:r.Chains.polygon.tokenSymbol,imageUrl:r.Chains.polygon.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://wallet-asset.matic.network/img/tokens/matic.svg",name:"Polygon",symbol:"MATIC",coingeckoId:"matic-network",balance:new(t(a))(72.1728063520574),key:"PolygonNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0}},T={type:i.FungibleTokenType.ERC20,data:{amount:"0",balance:new(t(a))(0),coingeckoId:null,decimals:6,key:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",walletAddress:"",chain:{id:r.Chains.polygon.mainnetID,imageUrl:r.Chains.polygon.iconUrl,name:r.Chains.polygon.name,symbol:r.Chains.polygon.tokenSymbol},contractAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174"}},E={type:i.FungibleTokenType.EthereumNative,data:{chain:{id:r.Chains.ethereum.mainnetID,name:r.Chains.ethereum.name,symbol:r.Chains.ethereum.tokenSymbol,imageUrl:r.Chains.ethereum.iconUrl},walletAddress:"",decimals:18,amount:"45824381294194610",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",coingeckoId:"ethereum",balance:new(t(a))(.04582438129419461),key:"EthereumNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0}},F={type:i.FungibleTokenType.ERC20,data:{chain:{id:r.Chains.ethereum.mainnetID,name:r.Chains.ethereum.name,symbol:r.Chains.ethereum.tokenSymbol,imageUrl:r.Chains.ethereum.iconUrl},walletAddress:"",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,amount:"1881092",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",coingeckoId:null,balance:new(t(a))(1.881092),key:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",tokenAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411}},x=b,I=v,P=A,C=w,N=[i.SPLTokenStandard.Fungible,i.SPLTokenStandard.SemiFungible],M=new Map([[r.NetworkIDs.Solana.Mainnet,w],[r.NetworkIDs.Ethereum.Mainnet,E],[r.NetworkIDs.Polygon.Mainnet,k]]),U=new Map([[r.NetworkIDs.Solana.Mainnet,A],[r.NetworkIDs.Ethereum.Mainnet,F],[r.NetworkIDs.Polygon.Mainnet,T]]),O={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"data.name",weight:.4},{name:"data.symbol",weight:.4},{name:"data.amount",weight:.1},{name:"data.mint",weight:.1}]},R="https://help.phantom.app/hc/en-us/articles/5985106844435",L="••••••"})),s.register("f2tU6",(function(t,n){e(t.exports,"getSwapPairsAsync",(function(){return s("7NBkj").getSwapPairsAsync})),e(t.exports,"getSwapQuoteAsync",(function(){return s("cH46O").getSwapQuoteAsync})),e(t.exports,"parseSwapError",(function(){return s("huZwj").parseSwapError})),e(t.exports,"updateSellAssetAmount",(function(){return s("8A1G6").updateSellAssetAmount})),e(t.exports,"swapPairsAssetInfoToAsset",(function(){return s("7SmhG").swapPairsAssetInfoToAsset}));s("2JxpK"),s("30Tum"),s("azr2P"),s("gWWyM"),s("9XJOV"),s("bKooM"),s("31DM9"),s("7NBkj"),s("cH46O"),s("huZwj"),s("eH8pa"),s("9YFpa"),s("8A1G6"),s("7SmhG")})),s.register("2JxpK",(function(t,n){function o(e,t){return"solana"===e.type||"solana"===t.type?e.type===t.type:e.data.mintPubKey===t.data.mintPubKey}e(t.exports,"areAssetsEqual",(function(){return o}))})),s.register("30Tum",(function(t,n){function o(e){return"0"!==e.data.amount}e(t.exports,"canSellAsset",(function(){return o}))})),s.register("gWWyM",(function(t,n){e(t.exports,"getAnalyticsAsset",(function(){return i}));var o=s("iOvk1"),r=s("5slFC");function i(e){return{chain:o.Chain.Solana,type:"spl-token"===e.type&&e.data.standard!==r.SPLTokenStandard.Fungible?"collectible":"fungible",address:"spl-token"===e.type?e.data.mintPubKey:void 0,symbol:e.data.symbol}}})),s.register("9XJOV",(function(t,n){e(t.exports,"getMaxSellAmount",(function(){return u}));var o=s("5slFC"),r=s("9CoSy"),i=s("Nt4tV"),a=s("9YFpa");function u(e){const t=e?e.data.decimals:0,n=e?e.data.amount:0,s=(0,i.amountToUiAmount)(n,t).toNumber();return e&&("solana"===e.type||e.type===o.FungibleTokenType.SolanaNative)&&s>r.ESTIMATED_SOL_TRADE_FEE?(0,a.subtractTokenAmounts)(s,r.ESTIMATED_SOL_TRADE_FEE):s}})),s.register("9YFpa",(function(t,n){e(t.exports,"subtractTokenAmounts",(function(){return r}));var o=s("24hfq");function r(e,t){return new(0,o.BigNumber)(e).minus(t).toNumber()}})),s.register("bKooM",(function(t,n){function o(e){if(void 0===e)return"#999";const t=parseFloat(e.toFixed(2));switch(!0){case t>=5:return"#EB3742";case t>=1&&e<5:return"#FFDC62";case e>=0&&e<1:return"#21E56F";default:return"#777777"}}e(t.exports,"getPriceImpactColor",(function(){return o}))})),s.register("31DM9",(function(t,n){function o(e){if(void 0===e)return"-";switch(!0){case e>=1e3:return">1000%";case e>=.01&&e<1e3:return`${e.toFixed(2)}%`;case e>0&&e<.01:return"<0.01%";case 0===e:return"0%";default:return"-"}}e(t.exports,"getPriceImpactText",(function(){return o}))})),s.register("7NBkj",(function(t,n){e(t.exports,"getSwapPairsAsync",(function(){return i}),(function(e){return i=e}));var o=s("2UOPE"),r=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};function i(e){return r(this,void 0,void 0,(function*(){const t=`${o.SWAPPER_BASE_URL}/pairs?tokens=${e}&includeMetadata=true`,n=yield fetch(t);if(200!==n.status)throw new Error(`Failed to fetch swap pairs for the following mints: ${e.join(", ")}.`);return yield n.json()}))}})),s.register("cH46O",(function(t,n){e(t.exports,"getSwapQuoteAsync",(function(){return i}),(function(e){return i=e}));var o=s("2UOPE"),r=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};function i(e){return r(this,void 0,void 0,(function*(){const t=new URLSearchParams([...Object.entries(e)]),n=new URL(`${o.SWAPPER_BASE_URL}/quote?${t}`).toString(),r=yield fetch(n);if(200!==r.status)throw new Error(`Failed to fetch quote for ${e.sellToken} and ${e.buyToken} pair.`);return yield r.json()}))}})),s.register("huZwj",(function(t,n){function o(e){var t;return"string"==typeof e?new Error(e):"object"==typeof e&&"logs"in e&&(null===(t=e.logs)||void 0===t?void 0:t.length)?new Error(e.logs.join("\n")):e}e(t.exports,"parseSwapError",(function(){return o}))})),s.register("eH8pa",(function(t,n){function o(e){if(e){const t=[];for(const n of e)t.includes(n.name)||t.push(n.name);return t.join(" + ")}return""}e(t.exports,"parseSwapSources",(function(){return o}))})),s.register("8A1G6",(function(t,n){function o({currentQuote:e,sellAsset:t,setSellAsset:n}){if(t&&e){const o=Object.assign({},t);o.data.amount=String(Number(t.data.amount)-Number(e.sellAmount)),n(o)}}e(t.exports,"updateSellAssetAmount",(function(){return o}))})),s.register("7SmhG",(function(t,n){e(t.exports,"swapPairsAssetInfoToAsset",(function(){return r}));var o=s("5slFC");const r=(e,t)=>{var n;return e.decimals&&e.name&&e.symbol?{type:"spl-token",data:{standard:o.SPLTokenStandard.Fungible,pubkey:"",mintPubKey:e.mint,ownerPubKey:t,decimals:e.decimals,amount:"0",delegate:null,delegatedAmount:"0",logoURI:null!==(n=e.imageUrl)&&void 0!==n?n:null,name:e.name,symbol:e.symbol,coingeckoId:null,state:"uninitialized",collectionPubKey:"",uses:null,creators:[],uri:"",usd:0,usd24hChange:0}}:null}})),s.register("dsDYC",(function(t,n){e(t.exports,"useFetchSwapQuote",(function(){return u}),(function(e){return u=e}));var o=s("5ekp2"),r=s("2UOPE");s("f2tU6");var i=s("cH46O"),a=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};function u({publicKey:e,sellAmount:t,sellTokenMint:n,buyTokenMint:s}){const u=!!(e&&t&&n&&s),c=["fetch-phantom-swap-quote",e,t,n,s];return(0,o.useQuery)({cacheTime:0,enabled:u,queryKey:c,queryFn:function(){return a(this,void 0,void 0,(function*(){if(!e)throw new Error("Unable to fetch swap quote: no public key");if(!t||!n||!s)return;return yield(0,i.getSwapQuoteAsync)({buyToken:s,maxNumberOfQuotes:r.MAX_NUMBER_OF_QUOTES,sellToken:n,sellAmount:t,slippageTolerance:r.LEGACY_DEFAULT_SLIPPAGE,taker:e,wrapUnwrapSOL:r.SHOULD_UNWRAP_WRAPPED_SOL})}))},refetchInterval:r.QUOTE_FETCH_INTERVAL_MS,retry:!1})}})),s.register("iqqDn",(function(t,n){e(t.exports,"useFetchUsdPrices",(function(){return c}),(function(e){return c=e}));var o=s("56oyT"),r=s("RVqnc"),i=s("5ekp2"),a=s("dY6gO"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};function c(e,t){var n,s;const c=null!==(n=null==e?void 0:e.data.coingeckoId)&&void 0!==n?n:null,l=null!==(s=null==t?void 0:t.data.coingeckoId)&&void 0!==s?s:null,d=!!c||!!l,p=["fetch-usd-prices",c,l];return(0,i.useQuery)({queryKey:p,queryFn:function(){return u(this,void 0,void 0,(function*(){const n=[];return[e,t].forEach((e=>{e&&e.data.coingeckoId&&n.push(e.data.coingeckoId)})),yield(0,r.withTimeout)((0,o.getPricesByCoingeckoId)(n),a.PRICES_FETCH_TIMEOUT_MS)}))},enabled:d})}})),s.register("fxXvK",(function(e,t){var n=s("5slFC");s("29o0l"),s("3YDVy"),s("2UOPE"),s("iTQ0V");n.SPLTokenStandard.Fungible})),s.register("8IOCk",(function(t,n){function o(e){return e?e.phantomFee.pct:0}e(t.exports,"usePhantomFee",(function(){return o}))})),s.register("4xLuU",(function(t,n){e(t.exports,"usePriceImpact",(function(){return a}));var o=s("29o0l"),r=s("bKooM"),i=s("31DM9");function a(e){return(0,o.useMemo)((()=>{let t="",n="";if(void 0===e)return;const o=100*e;return t=(0,r.getPriceImpactColor)(o),n=(0,i.getPriceImpactText)(o),{color:t,text:n,percentage:o}}),[e])}})),s.register("8BJCs",(function(t,n){e(t.exports,"useSlippage",(function(){return a}));var o=s("29o0l"),r=s("XQLa4"),i=s("eJK8G");function a(e){return(0,o.useMemo)((()=>{let t="",n="";if(void 0===e)return;const o=100*e;return t=(0,r.getSlippageColor)(o),n=(0,i.getSlippageText)(o),{color:t,text:n,percentage:o}}),[e])}})),s.register("XQLa4",(function(t,n){function o(e){if(void 0===e)return"#999";const t=parseFloat(e.toFixed(2));switch(!0){case t>2:return"#EB3742";case t>=1&&e<=2:return"#FFDC62";default:return"#777777"}}e(t.exports,"getSlippageColor",(function(){return o}))})),s.register("eJK8G",(function(t,n){function o(e){if(void 0===e)return"-";switch(!0){case e>=1e3:return">1000%";case e>=.01&&e<1e3:return`${e.toFixed(2)}%`;case e>0&&e<.01:return"<0.01%";case 0===e:return"0%";default:return"-"}}e(t.exports,"getSlippageText",(function(){return o}))})),s.register("UWzy4",(function(t,n){e(t.exports,"useProvider",(function(){return i}));var o=s("29o0l"),r=s("eH8pa");function i(e){return(0,o.useMemo)((()=>(0,r.parseSwapSources)(e)),[e])}})),s.register("ezPKD",(function(t,n){e(t.exports,"useResetSwapperOnMount",(function(){return i}));var o=s("29o0l"),r=s("iTQ0V");function i(){const e=(0,r.useSwapperStore)((e=>e.resetSwapper));(0,o.useEffect)((()=>{e()}),[])}})),s.register("bFhoc",(function(e,t){s("29o0l"),s("9CoSy"),s("Nt4tV"),s("iTQ0V"),s("dsDYC")})),s.register("hVvmZ",(function(e,t){s("29o0l"),s("Nt4tV"),s("2UOPE"),s("iTQ0V"),s("iX5lP"),s("4MMT9"),s("iA6sm")})),s.register("4MMT9",(function(t,n){e(t.exports,"useSwapSetBuyAsset",(function(){return a}));var o=s("29o0l"),r=s("iTQ0V"),i=s("gWWyM");function a(e){const t=(0,r.useSwapperStore)((e=>e.setBuyAsset));return(0,o.useCallback)((n=>{const o=(0,i.getAnalyticsAsset)(n);e.capture("swapperUpdateToAsset",{asset:o}),t(n)}),[e,t])}})),s.register("iA6sm",(function(t,n){e(t.exports,"useSwapSetSellAsset",(function(){return u}));var o=s("29o0l"),r=s("iTQ0V"),i=s("2JxpK"),a=s("gWWyM");function u(e){const t=(0,r.useSwapperStore)((e=>e.buyAsset)),n=(0,r.useSwapperStore)((e=>e.sellAsset)),s=(0,r.useSwapperStore)((e=>e.setBuyAsset)),u=(0,r.useSwapperStore)((e=>e.setSellAsset));return(0,o.useCallback)((o=>{const r=(0,a.getAnalyticsAsset)(o);e.capture("swapperUpdateFromAsset",{asset:r}),u(o),t&&n&&(0,i.areAssetsEqual)(o,t)&&s(n)}),[e,t,n,s,u])}})),s.register("dtI9r",(function(t,n){e(t.exports,"useSwapCardProps",(function(){return l}));var o=s("I4BHf"),r=s("8IOCk"),i=s("4xLuU"),a=s("UWzy4"),u=s("iX5lP"),c=s("h8AIo");function l(e){const{bestBuyAmount:t,currentQuote:n,hasNoRoutes:s,quote:l}=(0,u.useQuote)(),d=(0,o.useExchangeRate)(t,l,n),p=(0,i.usePriceImpact)(null==n?void 0:n.priceImpact),m=(0,a.useProvider)(null==n?void 0:n.sources),f=(0,r.usePhantomFee)(null==n?void 0:n.fees),{networkFeeInCurrencyFormatted:g,totalFeesInCurrencyFormatted:h}=(0,c.useTotalFees)(n,e);return{exchangeRate:d,hasNoRoutes:s,phantomFee:f,priceImpact:p,provider:m,quote:l,networkFee:g,totalFees:h}}})),s.register("h8AIo",(function(t,n){e(t.exports,"useTotalFees",(function(){return i}));var o=s("29o0l"),r=s("azr2P");function i(e,t){return(0,o.useMemo)((()=>{const n=null==e?void 0:e.fees;if(n&&t){const{networkFees:e,serumAccountDeposits:o,tokenAccountDeposits:s}=n,i=e.amount+o.amount+s.amount;return{networkFeeInCurrencyFormatted:(0,r.formatFee)(e.amount,t),totalFeesInLamports:i,totalFeesInCurrencyFormatted:(0,r.formatFee)(i,t)}}return{networkFeeInCurrencyFormatted:"",totalFeesInLamports:void 0,totalFeesInCurrencyFormatted:""}}),[null==e?void 0:e.fees,t])}})),s.register("8vNNq",(function(t,n){e(t.exports,"useSwapConfirmationProps",(function(){return y}),(function(e){return y=e}));var o=s("hMVEP"),r=s("29o0l"),i=s("bQvNK"),a=s("3YDVy"),u=s("guHTU"),c=s("iTQ0V");s("f2tU6");var l=s("8A1G6"),d=s("huZwj"),p=s("lgcfo"),m=s("UWzy4"),f=s("iX5lP"),g=s("3pIvT"),h=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};function y({analytics:e,connection:t,explorer:n,isLedger:s,signer:y,splAssetsArgs:S,onError:v}){const{cluster:w}=S,{currentQuote:b,quote:A}=(0,f.useQuote)(),k=(0,c.useSwapperStore)((e=>e.sellAsset)),T=(0,c.useSwapperStore)((e=>e.buyUsdValue)),E=(0,c.useSwapperStore)((e=>e.sellUsdValue)),F=(0,c.useSwapperStore)((e=>e.setSellAsset)),x=(0,c.useSwapperStore)((e=>e.resetSwapper)),{refetch:I}=(0,a.useSPLAssets)(S),P=(0,m.useProvider)(null==b?void 0:b.sources),C=(0,p.useAnalyticsPayload)({buyToken:null==A?void 0:A.buyToken,sellToken:null==A?void 0:A.sellToken,buyAmount:null==b?void 0:b.buyAmount,sellAmount:null==b?void 0:b.sellAmount,phantomFee:null==b?void 0:b.fees.phantomFee.amount,priceImpact:null==b?void 0:b.priceImpact,provider:P,buyAssetUsdValue:T,sellAssetUsdValue:E}),N=null==A?void 0:A.buyToken.symbol,[M,U]=(0,r.useState)(),O=w&&M?(0,u.generateTxExplorerUrl)(M,w,n):"",R=(null==b?void 0:b.transactionData.length)||0,[L,_]=(0,r.useState)("loading"),D="success"===L,B="failure"===L,[H,Q]=(0,r.useState)(void 0),{notEnoughSol:V,txErrorMessage:j}=(0,g.useSwapError)(H),G=(0,r.useCallback)((()=>h(this,void 0,void 0,(function*(){if(_("loading"),U(void 0),Q(void 0),!b)throw new Error("Trying to execute swap with no current quote");if(!t||!y)throw new Error("Trying to execute swap with no connection or signer.");try{const{transactionData:n}=b;for(const e of n){const n=(0,o.transactionStringToTransaction)(e,"bs58");(0,o.setRecentBlockhash)(n,yield(0,i.getLatestBlockhash)(t,"finalized"));const r=yield(0,i.signAndSendTransactionAsync)(t,y,n,{skipPreflight:!0});U(r),yield(0,i.waitForTransactionConfirmationAsync)(t,r,"confirmed")}_("success"),e.capture("swapperSwapSuccess",C),x(),(0,l.updateSellAssetAmount)({currentQuote:b,sellAsset:k,setSellAsset:F}),I()}catch(t){console.error(t);const n=(0,d.parseSwapError)(t);_("failure"),Q(n),v&&v(n),e.capture("swapperSwapFailure",C)}}))),[e,C,t,b,v,I,x,k,F,y]);return{buyAssetSymbol:N,isSuccess:D,isFailure:B,isLedger:s,notEnoughSol:V,txError:H,txErrorMessage:j,txLink:O,executeSwap:G,resetSwapper:x,useExecuteSwapOnMount:()=>{(0,r.useEffect)((()=>{s||G()}),[])},numberOfTransactions:R}}})),s.register("3pIvT",(function(t,n){e(t.exports,"useSwapError",(function(){return p}));var o=s("43063"),r=s("7gANb"),i=s("29o0l");const a='"Custom":301',u=r.ERROR_SOLANA_NO_FUNDS_FEE,c="lower balance than rent-exempt minimum",l="insufficient lamports",d=r.ERROR_SOLANA_NO_SOL_TOKENS;function p(e){const{t:t}=(0,o.useTranslation)();return(0,i.useMemo)((()=>e&&e.message?{notEnoughSol:[u,l,d,c].some((t=>e.message.includes(t))),txErrorMessage:e.message.includes(a)?t("swapTxConfirmationSwapFailedSlippageLimit"):t("swapTxConfirmationSwapFailedTryAgain")}:{notEnoughSol:!1,txErrorMessage:""}),[e,t])}})),s.register("lCzzn",(function(t,n){e(t.exports,"useSwapProvidersProps",(function(){return l}));var o=s("43063"),r=s("29o0l"),i=s("Nt4tV"),a=s("iTQ0V"),u=s("eH8pa"),c=s("iX5lP");function l(){const{t:e}=(0,o.useTranslation)(),{bestBuyAmount:t,quote:n,quotes:s,selectedProviderIndex:l}=(0,c.useQuote)(),d=(0,a.useSwapperStore)((e=>e.setSelectedProviderIndex));return{rows:(0,r.useMemo)((()=>n?s.map((o=>{const{buyAmount:r,sources:s}=o,a=Number(r),c=t-a,l=(0,i.amountToFormattedAmount)(c,n.buyToken.decimals);return{label:(0,u.parseSwapSources)(s),value:0===c?e("swapFeesBestPrice"):`- ${l} ${n.buyToken.symbol}`}})):[]),[t,n,s,e]),selectedProviderIndex:l,setSelectedProviderIndex:d}}})),s.register("9PpHT",(function(e,t){s("iTQ0V"),s("9XJOV"),s("iX5lP")})),s.register("iTLyO",(function(n,o){e(n.exports,"useSwapReviewProps",(function(){return m}));var r=s("kAKNF"),i=s("29o0l"),a=s("3YDVy"),u=s("Nt4tV"),c=s("iTQ0V"),l=s("gCUUK"),d=s("iqqDn"),p=s("iX5lP");function m(){const e=(0,c.useSwapperStore)((e=>e.buyAsset)),n=(0,c.useSwapperStore)((e=>e.sellAsset)),o=(0,c.useSwapperStore)((e=>e.sellAmount)),s=(0,c.useSwapperStore)((e=>e.setBuyUsdValue)),m=(0,c.useSwapperStore)((e=>e.setSellUsdValue)),{currentQuote:f,quote:g}=(0,p.useQuote)(),{data:h}=(0,d.useFetchUsdPrices)(n,e);return(0,i.useMemo)((()=>{var i,c;let d="",p="",y="",S="";if(!g||!e||!n)return{sellAmountText:y,sellAmountUsdText:S,buyAmountText:d,buyAmountUsdText:p};const{buyToken:v,sellToken:w}=g,{buyAmount:b}=f,A=(0,u.amountToUiAmount)(b,g.buyToken.decimals),k=t(r)(o),T=String(A).split(".")[0].length,E=o.split(".")[0].length,F=v.symbol.length,x=w.symbol.length,I=T&&F?T+F:0,P=E&&x?E+x:0;if(y=`${(0,l.formatTokenAmountForReviewScreen)(k,P)} ${w.symbol}`,d=`${(0,l.formatTokenAmountForReviewScreen)(A,I)} ${v.symbol}`,h){const t=(0,a.getMintPubkeyFromAsset)(e),o=(0,a.getMintPubkeyFromAsset)(n),r=h[t],l=h[o];if(r){const e=A.multipliedBy(null!==(i=r.usd)&&void 0!==i?i:0);p=`$${(0,u.formatTokenAmount)(e)}`,s(r.usd)}if(l){const e=k.multipliedBy(null!==(c=l.usd)&&void 0!==c?c:0);S=`$${(0,u.formatTokenAmount)(e)}`,m(l.usd)}}return{sellAmountText:y,sellAmountUsdText:S,buyAmountText:d,buyAmountUsdText:p}}),[g,e,n,f,o,h,s,m])}})),s.register("gCUUK",(function(n,o){e(n.exports,"formatTokenAmountForReviewScreen",(function(){return i}));var r=s("gXOkW");const i=(e,n)=>{const o=t(r)(e),s=o.value();if(Math.abs(s)>0&&Math.abs(s)<1e-5){return`< ${s<0?"-":""}0.00001`}return n>=12?o.format("0,0.[0]"):n>=9?o.format("0,0.[000]"):o.format("0,0.[00000]")}})),s.register("6M54M",(function(e,t){s("29o0l"),s("9CoSy");s("m2d5Y");s("haFjI"),s("3YDVy"),s("Nt4tV"),s("2UOPE"),s("iTQ0V"),s("2JxpK"),s("9XJOV")})),s.register("m2d5Y",(function(t,n){e(t.exports,"useDebouncedState",(function(){return s("haFjI").useDebouncedState})),e(t.exports,"useDebouncedChangeHandler",(function(){return s("haFjI").useDebouncedChangeHandler})),e(t.exports,"FUSE_ASSET_SEARCH_CONFIG",(function(){return s("4L8CE").FUSE_ASSET_SEARCH_CONFIG})),e(t.exports,"FUSE_SEARCH_CONFIG_FUNGIBLES",(function(){return s("4L8CE").FUSE_SEARCH_CONFIG_FUNGIBLES})),e(t.exports,"FUSE_SEARCH_CONFIG_TOKEN_WITH_PROVIDERS",(function(){return s("4L8CE").FUSE_SEARCH_CONFIG_TOKEN_WITH_PROVIDERS})),e(t.exports,"fuseAssetSearchConfig",(function(){return s("4L8CE").fuseAssetSearchConfig})),e(t.exports,"fuseValidatorSearchConfig",(function(){return s("4L8CE").fuseValidatorSearchConfig})),e(t.exports,"useFuse",(function(){return s("4L8CE").useFuse})),e(t.exports,"ClusterHooks",(function(){return s("6iYLU").ClusterHooks})),e(t.exports,"GetClusterError",(function(){return s("6iYLU").GetClusterError})),e(t.exports,"QUERY_KEY_SOLANA_RPC_CONNECTION",(function(){return s("6iYLU").QUERY_KEY_SOLANA_RPC_CONNECTION})),e(t.exports,"SetClusterError",(function(){return s("6iYLU").SetClusterError})),e(t.exports,"StorageKeyCluster",(function(){return s("6iYLU").StorageKeyCluster})),e(t.exports,"StorageValueCluster",(function(){return s("6iYLU").StorageValueCluster})),e(t.exports,"createClusterHooks",(function(){return s("6iYLU").createClusterHooks})),e(t.exports,"getCluster",(function(){return s("6iYLU").getCluster})),e(t.exports,"useNetworkHealth",(function(){return s("2akTI").useNetworkHealth})),e(t.exports,"NetworkHealthResponse",(function(){return s("2akTI").NetworkHealthResponse})),e(t.exports,"useRemoveAccountWarning",(function(){return s("19pTF").useRemoveAccountWarning})),e(t.exports,"useToastProps",(function(){return s("3Qbu5").useToastProps})),e(t.exports,"useDebouncedCallback",(function(){return s("fFnf5").useDebouncedCallback}));s("haFjI"),s("4L8CE"),s("6iYLU"),s("2akTI"),s("19pTF"),s("3Qbu5"),s("fFnf5")})),s.register("haFjI",(function(t,n){e(t.exports,"useDebouncedChangeHandler",(function(){return r})),e(t.exports,"useDebouncedState",(function(){return i}));var o=s("29o0l");function r(e,t,n=100){const[r,s]=(0,o.useState)((()=>e)),i=(0,o.useRef)(),a=(0,o.useCallback)((e=>{s(e),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{t(e),i.current=void 0}),n)}),[n,t]);return(0,o.useEffect)((()=>{i.current&&(clearTimeout(i.current),i.current=void 0),s(e)}),[e]),[r,a]}function i(e,t=100){const[n,r]=(0,o.useState)(e),s=(0,o.useRef)();return(0,o.useEffect)((()=>(s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{r(e)}),t),()=>{s.current&&clearTimeout(s.current)})),[r,e,t]),n}})),s.register("4L8CE",(function(t,n){e(t.exports,"fuseAssetSearchConfig",(function(){return i})),e(t.exports,"fuseValidatorSearchConfig",(function(){return a})),e(t.exports,"FUSE_ASSET_SEARCH_CONFIG",(function(){return u})),e(t.exports,"FUSE_SEARCH_CONFIG_FUNGIBLES",(function(){return c})),e(t.exports,"FUSE_SEARCH_CONFIG_TOKEN_WITH_PROVIDERS",(function(){return l})),e(t.exports,"useFuse",(function(){return d}));var o=s("4qm9q"),r=s("29o0l");const i={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"symbol",weight:.5},{name:"name",weight:.4},{name:"address",weight:.1}]},a={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"info.name",weight:.5},{name:"info.keybaseUsername",weight:.3},{name:"info.website",weight:.1},{name:"voteAccountPubkey",weight:.1},{name:"identityPubkey",weight:.1}]},u={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"data.name",weight:.4},{name:"data.symbol",weight:.3},{name:"data.amount",weight:.2},{name:"data.mint",weight:.1}]},c={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"data.name",weight:.4},{name:"data.symbol",weight:.4},{name:"data.chain.name",weight:.2}]},l={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"token.name",weight:.4},{name:"token.symbol",weight:.4},{name:"token.caip19.chainId",weight:.2}]},d=(e,t,n)=>{const s=(0,r.useMemo)((()=>new(0,o.default)(e,n)),[e,n]);return(0,r.useMemo)((()=>t?s.search(t).map((e=>e.item)):e),[s,e,t])}})),s.register("4qm9q",(function(t,n){function o(e){return Array.isArray?Array.isArray(e):"[object Array]"===p(e)}e(t.exports,"default",(function(){return X}));const r=1/0;function s(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-r?"-0":t}(e)}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e}function u(e){return!0===e||!1===e||function(e){return c(e)&&null!==e}(e)&&"[object Boolean]"==p(e)}function c(e){return"object"==typeof e}function l(e){return null!=e}function d(e){return!e.trim().length}function p(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const m=e=>`Invalid value for key ${e}`,f=e=>`Pattern length exceeds max of ${e}.`,g=e=>`Missing ${e} property in key`,h=e=>`Property 'weight' in key '${e}' must be a positive integer`,y=Object.prototype.hasOwnProperty;class S{get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=v(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}}function v(e){let t=null,n=null,r=null,s=1;if(i(e)||o(e))r=e,t=w(e),n=b(e);else{if(!y.call(e,"name"))throw new Error(g("name"));const o=e.name;if(r=o,y.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(h(o));t=w(o),n=b(o)}return{path:t,id:n,weight:s,src:r}}function w(e){return o(e)?e:e.split(".")}function b(e){return o(e)?e.join("."):e}var A={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let n=[],r=!1;const c=(e,t,d)=>{if(l(e))if(t[d]){const p=e[t[d]];if(!l(p))return;if(d===t.length-1&&(i(p)||a(p)||u(p)))n.push(s(p));else if(o(p)){r=!0;for(let e=0,n=p.length;e<n;e+=1)c(p[e],t,d+1)}else t.length&&c(p,t,d+1)}else n.push(e)};return c(e,i(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const k=/[^ ]+/g;class T{setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,i(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();i(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!l(e)||d(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,r)=>{let s=this.getFn(e,t.path);if(l(s))if(o(s)){let e=[];const t=[{nestedArrIndex:-1,value:s}];for(;t.length;){const{nestedArrIndex:n,value:r}=t.pop();if(l(r))if(i(r)&&!d(r)){let t={v:r,i:n,n:this.norm.get(r)};e.push(t)}else o(r)&&r.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[r]=e}else if(!d(s)){let e={v:s,n:this.norm.get(s)};n.$[r]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}constructor({getFn:e=A.getFn,fieldNormWeight:t=A.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,o=Math.pow(10,t);return{get(t){const r=t.match(k).length;if(n.has(r))return n.get(r);const s=1/Math.pow(r,.5*e),i=parseFloat(Math.round(s*o)/o);return n.set(r,i),i},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}}function E(e,t,{getFn:n=A.getFn,fieldNormWeight:o=A.fieldNormWeight}={}){const r=new T({getFn:n,fieldNormWeight:o});return r.setKeys(e.map(v)),r.setSources(t),r.create(),r}function F(e,{errors:t=0,currentLocation:n=0,expectedLocation:o=0,distance:r=A.distance,ignoreLocation:s=A.ignoreLocation}={}){const i=t/e.length;if(s)return i;const a=Math.abs(o-n);return r?i+a/r:a?1:i}const x=32;function I(e,t,n,{location:o=A.location,distance:r=A.distance,threshold:s=A.threshold,findAllMatches:i=A.findAllMatches,minMatchCharLength:a=A.minMatchCharLength,includeMatches:u=A.includeMatches,ignoreLocation:c=A.ignoreLocation}={}){if(t.length>x)throw new Error(f(x));const l=t.length,d=e.length,p=Math.max(0,Math.min(o,d));let m=s,g=p;const h=a>1||u,y=h?Array(d):[];let S;for(;(S=e.indexOf(t,g))>-1;){let e=F(t,{currentLocation:S,expectedLocation:p,distance:r,ignoreLocation:c});if(m=Math.min(e,m),g=S+l,h){let e=0;for(;e<l;)y[S+e]=1,e+=1}}g=-1;let v=[],w=1,b=l+d;const k=1<<l-1;for(let o=0;o<l;o+=1){let s=0,a=b;for(;s<a;){F(t,{errors:o,currentLocation:p+a,expectedLocation:p,distance:r,ignoreLocation:c})<=m?s=a:b=a,a=Math.floor((b-s)/2+s)}b=a;let u=Math.max(1,p-a+1),f=i?d:Math.min(p+a,d)+l,S=Array(f+2);S[f+1]=(1<<o)-1;for(let s=f;s>=u;s-=1){let i=s-1,a=n[e.charAt(i)];if(h&&(y[i]=+!!a),S[s]=(S[s+1]<<1|1)&a,o&&(S[s]|=(v[s+1]|v[s])<<1|1|v[s+1]),S[s]&k&&(w=F(t,{errors:o,currentLocation:i,expectedLocation:p,distance:r,ignoreLocation:c}),w<=m)){if(m=w,g=i,g<=p)break;u=Math.max(1,2*p-g)}}if(F(t,{errors:o+1,currentLocation:p,expectedLocation:p,distance:r,ignoreLocation:c})>m)break;v=S}const T={isMatch:g>=0,score:Math.max(.001,w)};if(h){const e=function(e=[],t=A.minMatchCharLength){let n=[],o=-1,r=-1,s=0;for(let i=e.length;s<i;s+=1){let i=e[s];i&&-1===o?o=s:i||-1===o||(r=s-1,r-o+1>=t&&n.push([o,r]),o=-1)}return e[s-1]&&s-o>=t&&n.push([o,s-1]),n}(y,a);e.length?u&&(T.indices=e):T.isMatch=!1}return T}function P(e){let t={};for(let n=0,o=e.length;n<o;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<o-n-1}return t}class C{searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:o,distance:r,threshold:s,findAllMatches:i,minMatchCharLength:a,ignoreLocation:u}=this.options;let c=[],l=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:p,startIndex:m})=>{const{isMatch:f,score:g,indices:h}=I(e,t,p,{location:o+m,distance:r,threshold:s,findAllMatches:i,minMatchCharLength:a,includeMatches:n,ignoreLocation:u});f&&(d=!0),l+=g,f&&h&&(c=[...c,...h])}));let p={isMatch:d,score:d?l/this.chunks.length:1};return d&&n&&(p.indices=c),p}constructor(e,{location:t=A.location,threshold:n=A.threshold,distance:o=A.distance,includeMatches:r=A.includeMatches,findAllMatches:s=A.findAllMatches,minMatchCharLength:i=A.minMatchCharLength,isCaseSensitive:a=A.isCaseSensitive,ignoreLocation:u=A.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:o,includeMatches:r,findAllMatches:s,minMatchCharLength:i,isCaseSensitive:a,ignoreLocation:u},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:P(e),startIndex:t})},l=this.pattern.length;if(l>x){let e=0;const t=l%x,n=l-t;for(;e<n;)c(this.pattern.substr(e,x),e),e+=x;if(t){const e=l-x;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}}class N{static isMultiMatch(e){return M(e,this.multiRegex)}static isSingleMatch(e){return M(e,this.singleRegex)}search(){}constructor(e){this.pattern=e}}function M(e,t){const n=e.match(t);return n?n[1]:null}class U extends N{static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}constructor(e,{location:t=A.location,threshold:n=A.threshold,distance:o=A.distance,includeMatches:r=A.includeMatches,findAllMatches:s=A.findAllMatches,minMatchCharLength:i=A.minMatchCharLength,isCaseSensitive:a=A.isCaseSensitive,ignoreLocation:u=A.ignoreLocation}={}){super(e),this._bitapSearch=new C(e,{location:t,threshold:n,distance:o,includeMatches:r,findAllMatches:s,minMatchCharLength:i,isCaseSensitive:a,ignoreLocation:u})}}class O extends N{static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const o=[],r=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+r,o.push([t,n-1]);const s=!!o.length;return{isMatch:s,score:s?0:1,indices:o}}constructor(e){super(e)}}const R=[class extends N{static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}constructor(e){super(e)}},O,class extends N{static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}constructor(e){super(e)}},class extends N{static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}constructor(e){super(e)}},class extends N{static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}constructor(e){super(e)}},class extends N{static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}constructor(e){super(e)}},class extends N{static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}constructor(e){super(e)}},U],L=R.length,_=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,D="|";const B=new Set([U.type,O.type]);const H=[];function Q(e,t){for(let n=0,o=H.length;n<o;n+=1){let o=H[n];if(o.condition(e,t))return new o(e,t)}return new C(e,t)}const V="$and",j="$or",G={PATH:"$path",PATTERN:"$val"},z=e=>!(!e[V]&&!e[j]),K=e=>!!e[G.PATH],q=e=>!o(e)&&c(e)&&!z(e),$=e=>({[V]:Object.keys(e).map((t=>({[t]:e[t]})))});function W(e,t,{auto:n=!0}={}){const r=e=>{let s=Object.keys(e);const a=K(e);if(!a&&s.length>1&&!z(e))return r($(e));if(q(e)){const o=a?e[G.PATH]:s[0],r=a?e[G.PATTERN]:e[o];if(!i(r))throw new Error(m(o));const u={keyId:b(o),pattern:r};return n&&(u.searcher=Q(r,t)),u}let u={children:[],operator:s[0]};return s.forEach((t=>{const n=e[t];o(n)&&n.forEach((e=>{u.children.push(r(e))}))})),u};return z(e)||(e=$(e)),r(e)}function J(e,t){const n=e.matches;t.matches=[],l(n)&&n.forEach((e=>{if(!l(e.indices)||!e.indices.length)return;const{indices:n,value:o}=e;let r={indices:n,value:o};e.key&&(r.key=e.key.src),e.idx>-1&&(r.refIndex=e.idx),t.matches.push(r)}))}function Y(e,t){t.score=e.score}class X{setCollection(e,t){if(this._docs=e,t&&!(t instanceof T))throw new Error("Incorrect 'index' type");this._myIndex=t||E(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){l(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,o=this._docs.length;n<o;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,o-=1,t.push(r))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:o,shouldSort:r,sortFn:s,ignoreFieldNorm:u}=this.options;let c=i(e)?i(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=A.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:o,score:r})=>{const s=e?e.weight:null;n*=Math.pow(0===r&&s?Number.EPSILON:r,(s||1)*(t?1:o))})),e.score=n}))}(c,{ignoreFieldNorm:u}),r&&c.sort(s),a(t)&&t>-1&&(c=c.slice(0,t)),function(e,t,{includeMatches:n=A.includeMatches,includeScore:o=A.includeScore}={}){const r=[];return n&&r.push(J),o&&r.push(Y),e.map((e=>{const{idx:n}=e,o={item:t[n],refIndex:n};return r.length&&r.forEach((t=>{t(e,o)})),o}))}(c,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(e){const t=Q(e,this.options),{records:n}=this._myIndex,o=[];return n.forEach((({v:e,i:n,n:r})=>{if(!l(e))return;const{isMatch:s,score:i,indices:a}=t.searchIn(e);s&&o.push({item:e,idx:n,matches:[{score:i,value:e,norm:r,indices:a}]})})),o}_searchLogical(e){const t=W(e,this.options),n=(e,t,o)=>{if(!e.children){const{keyId:n,searcher:r}=e,s=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:r});return s&&s.length?[{idx:o,item:t,matches:s}]:[]}const r=[];for(let s=0,i=e.children.length;s<i;s+=1){const i=e.children[s],a=n(i,t,o);if(a.length)r.push(...a);else if(e.operator===V)return[]}return r},o=this._myIndex.records,r={},s=[];return o.forEach((({$:e,i:o})=>{if(l(e)){let i=n(t,e,o);i.length&&(r[o]||(r[o]={idx:o,item:e,matches:[]},s.push(r[o])),i.forEach((({matches:e})=>{r[o].matches.push(...e)})))}})),s}_searchObjectList(e){const t=Q(e,this.options),{keys:n,records:o}=this._myIndex,r=[];return o.forEach((({$:e,i:o})=>{if(!l(e))return;let s=[];n.forEach(((n,o)=>{s.push(...this._findMatches({key:n,value:e[o],searcher:t}))})),s.length&&r.push({idx:o,item:e,matches:s})})),r}_findMatches({key:e,value:t,searcher:n}){if(!l(t))return[];let r=[];if(o(t))t.forEach((({v:t,i:o,n:s})=>{if(!l(t))return;const{isMatch:i,score:a,indices:u}=n.searchIn(t);i&&r.push({score:a,key:e,value:t,idx:o,norm:s,indices:u})}));else{const{v:o,n:s}=t,{isMatch:i,score:a,indices:u}=n.searchIn(o);i&&r.push({score:a,key:e,value:o,norm:s,indices:u})}return r}constructor(e,t={},n){this.options={...A,...t},this.options.useExtendedSearch,this._keyStore=new S(this.options.keys),this.setCollection(e,n)}}X.version="6.5.3",X.createIndex=E,X.parseIndex=function(e,{getFn:t=A.getFn,fieldNormWeight:n=A.fieldNormWeight}={}){const{keys:o,records:r}=e,s=new T({getFn:t,fieldNormWeight:n});return s.setKeys(o),s.setIndexRecords(r),s},X.config=A,X.parseQuery=W,function(...e){H.push(...e)}(class{static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:o}=this.options;e=o?e:e.toLowerCase();let r=0,s=[],i=0;for(let o=0,a=t.length;o<a;o+=1){const a=t[o];s.length=0,r=0;for(let t=0,o=a.length;t<o;t+=1){const o=a[t],{isMatch:u,indices:c,score:l}=o.search(e);if(!u){i=0,r=0,s.length=0;break}if(r+=1,i+=l,n){const e=o.constructor.type;B.has(e)?s=[...s,...c]:s.push(c)}}if(r){let e={isMatch:!0,score:i/r};return n&&(e.indices=s),e}}return{isMatch:!1,score:1}}constructor(e,{isCaseSensitive:t=A.isCaseSensitive,includeMatches:n=A.includeMatches,minMatchCharLength:o=A.minMatchCharLength,ignoreLocation:r=A.ignoreLocation,findAllMatches:s=A.findAllMatches,location:i=A.location,threshold:a=A.threshold,distance:u=A.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:o,findAllMatches:s,ignoreLocation:r,location:i,threshold:a,distance:u},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split(D).map((e=>{let n=e.trim().split(_).filter((e=>e&&!!e.trim())),o=[];for(let e=0,r=n.length;e<r;e+=1){const r=n[e];let s=!1,i=-1;for(;!s&&++i<L;){const e=R[i];let n=e.isMultiMatch(r);n&&(o.push(new e(n,t)),s=!0)}if(!s)for(i=-1;++i<L;){const e=R[i];let n=e.isSingleMatch(r);if(n){o.push(new e(n,t));break}}}return o}))}(this.pattern,this.options)}})})),s.register("2akTI",(function(t,n){e(t.exports,"useNetworkHealth",(function(){return l}),(function(e){return l=e}));var o,r,i=s("5ekp2"),a=s("16XMG"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};(r=o||(o={})).ok="ok",r.degraded="degraded",r.majorOutage="majorOutage";const c=e=>`${(0,a.getAPIEnvironment)()}/solana/health/v1?locale=${e}`;function l(e,t=!0){return(0,i.useQuery)({queryKey:["solana","health",{locale:e}],refetchInterval:15e4,enabled:t,queryFn(){return u(this,void 0,void 0,(function*(){const t=yield function(e){return u(this,void 0,void 0,(function*(){const t=yield fetch(c(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(200!==t.status)throw new Error("Failed to retrieve Solana network health");return yield t.json()}))}(e);return t}))}})}})),s.register("19pTF",(function(t,n){e(t.exports,"useRemoveAccountWarning",(function(){return i}));var o=s("4xbAj"),r=s("43063");const i=e=>{const{t:t}=(0,r.useTranslation)();switch(e){case o.AccountType.PrivateKey:return t("removeAccountWarningPrivateKey");case o.AccountType.Seed:return t("removeAccountWarningSeed");case o.AccountType.Ledger:return t("removeAccountWarningLedger");case o.AccountType.SeedVault:return t("removeAccountWarningSeedVault");case o.AccountType.ReadOnly:return"[Internal Only] Nothing to worry about here, this account is read only - IO-1551"}}})),s.register("3Qbu5",(function(n,o){e(n.exports,"useToastProps",(function(){return a}));var r=s("29o0l"),i=s("lBoqf");const a=()=>{const[e,n]=(0,r.useState)(!1),[o,s]=(0,r.useState)(""),[a,u]=(0,r.useState)("default"),c=t(i)(),l=(0,r.useCallback)(((e,t)=>{s(e),u(t),n(!0),setTimeout((()=>{c()&&n(!1)}),3e3)}),[c]);return(0,r.useMemo)((()=>({showToast:e,toastMessage:o,toastType:a,triggerToastMessage:l})),[e,o,a,l])}})),s.register("lBoqf",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0});var n=s("29o0l");e.exports.default=function(){var e=n.useRef(!1),t=n.useCallback((function(){return e.current}),[]);return n.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),t}})),s.register("fFnf5",(function(t,n){e(t.exports,"useDebouncedCallback",(function(){return r}));var o=s("29o0l");const r=(e,t=1e3)=>{const n=(0,o.useRef)(!1);return(0,o.useCallback)((()=>{n.current||(n.current=!0,e(),setTimeout((()=>{n.current=!1}),t))}),[e,t])}})),s.register("eOCBr",(function(t,n){e(t.exports,"useSwapSellAssetsList",(function(){return c}));var o=s("29o0l"),r=s("3YDVy"),i=s("iTQ0V"),a=s("2JxpK"),u=s("30Tum");function c(e){const{data:t,error:n,isFetching:s}=(0,r.useSPLAssets)(e),c=(0,i.useSwapperStore)((e=>e.sellAsset));return{data:(0,o.useMemo)((()=>{if(c){const e=t.findIndex((e=>(0,a.areAssetsEqual)(e,c))),n=t[e];n&&n.data.amount!==c.data.amount&&(t[e]=c)}return t.filter((e=>(0,u.canSellAsset)(e)))}),[t,c]),isError:!!n,isFetching:s}}})),s.register("kvuQ4",(function(e,t){})),s.register("d0HjU",(function(t,n){e(t.exports,"extractUsdRate",(function(){return s("lDJ5X").extractUsdRate})),e(t.exports,"analyticsPayload",(function(){return s("igrkF").analyticsPayload})),e(t.exports,"isBridgeProviderRow",(function(){return s("8c6ro").isBridgeProviderRow})),e(t.exports,"formatSecondsAsSwapTime",(function(){return s("60dsO").formatSecondsAsSwapTime})),e(t.exports,"formatTokenAmountForReviewScreen",(function(){return s("gCUUK").formatTokenAmountForReviewScreen}));s("lDJ5X"),s("igrkF"),s("8c6ro"),s("60dsO"),s("gCUUK")})),s.register("lDJ5X",(function(t,n){e(t.exports,"extractUsdRate",(function(){return r}));var o=s("5slFC");const r=(e,t)=>{if(void 0!==t)return e.type===o.FungibleTokenType.BitcoinNative?t[o.BITCOIN_TOKEN_VALUES.coingeckoId]:e.type===o.FungibleTokenType.SolanaNative?t[o.SOLANA_TOKEN_VALUES.coingeckoId]:e.type===o.FungibleTokenType.EthereumNative?t[o.ETHER_TOKEN_VALUES.coingeckoId]:e.type===o.FungibleTokenType.PolygonNative?t[o.MATIC_TOKEN_VALUES.coingeckoId]:e.type===o.FungibleTokenType.SPL?t[e.data.mintAddress]:e.type===o.FungibleTokenType.ERC20?t[e.data.contractAddress]:e.type===o.FungibleTokenType.BRC20?t[e.data.firstCreatedInscriptionId]:void 0}})),s.register("igrkF",(function(t,n){e(t.exports,"legacyAnalyticsPayload",(function(){return l})),e(t.exports,"analyticsPayload",(function(){return d}));var o=s("iOvk1"),r=s("24hfq"),i=s("Nt4tV"),a=s("aglkA");const u=(e,t,n)=>{if(n){return(0,i.amountToUiAmount)(e,t).times((0,r.BigNumber)(n)).toNumber()}},c=(e,t)=>t&&e?t>e?t:e:null!=t?t:e;function l({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:n,sellToken:r,buyAmount:s,sellAmount:a,phantomFeeUiAmount:l,priceImpact:d,provider:p}){var m,f;if(t&&r){const g=u(s,t.data.decimals,e),h=u(a,r.data.decimals,n),y=c(g,h);return{networkId:r.data.chain.id,chainId:o.Chains.getChainID(r.data.chain.id),toNetworkId:t.data.chain.id,toChainId:o.Chains.getChainID(t.data.chain.id),isBridge:r.data.chain.id!==t.data.chain.id,marketName:`${r.data.symbol}/${t.data.symbol}`,tradeDirection:"sell",swapSource:p,priceImpact:d,fromAssetSymbol:null!==(m=r.data.symbol)&&void 0!==m?m:"",fromAssetAddress:r.data.tokenAddress,fromAssetAmount:(0,i.amountToUiAmount)(a,r.data.decimals),fromAssetUsdPrice:n,fromAssetUsdVolume:h,toAssetSymbol:null!==(f=t.data.symbol)&&void 0!==f?f:"",toAssetAddress:t.data.tokenAddress,toAssetAmount:(0,i.amountToUiAmount)(s,t.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:g,totalUsdVolume:y,feeUsd:l}}return null}function d({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:n,sellToken:o,quote:r}){var s,l,d,p,m,f,g;if(t&&o){const{buyAmount:h,sellAmount:y}=r,S="priceImpact"in r?r.priceImpact:0,v="sources"in r?(0,a.parseSwapSources)(r.sources):"",w=null!==(l="fees"in r?null===(s=r.fees.find((e=>"phantom"===e.type)))||void 0===s?void 0:s.amount.toString():"")&&void 0!==l?l:"",b=u(h,t.data.decimals,e),A=u(y,o.data.decimals,n),k=c(b,A);return{chainId:null!==(d=o.data.chain.id)&&void 0!==d?d:t.data.chain.id,swap:{marketName:`${o.data.symbol}/${t.data.symbol}`,tradeDirection:"sell",swapSource:v,priceImpact:S,fromAssetSymbol:null!==(p=o.data.symbol)&&void 0!==p?p:"",fromAssetAddress:null!==(m=o.data.tokenAddress)&&void 0!==m?m:"",fromAssetAmount:(0,i.amountToUiAmount)(y,o.data.decimals),fromAssetUsdPrice:null!=n?n:0,fromAssetUsdVolume:null!=A?A:0,toAssetSymbol:null!==(f=t.data.symbol)&&void 0!==f?f:"",toAssetAddress:null!==(g=t.data.tokenAddress)&&void 0!==g?g:"",toAssetAmount:(0,i.amountToUiAmount)(h,t.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:b,totalUsdVolume:null!=k?k:0,feeUsd:Number(w)}}}return null}})),s.register("aglkA",(function(t,n){function o(e){const t=e.reduce(((e,t)=>e.add(t.name)),new Set);return Array.from(t).join(" + ")}e(t.exports,"parseSwapSources",(function(){return o}))})),s.register("8c6ro",(function(t,n){e(t.exports,"isBridgeProviderRow",(function(){return r}));var o=s("iixDX");const r=e=>o.BridgeProviderRow.safeParse(e).success})),s.register("iixDX",(function(t,n){e(t.exports,"ErrorResponse",(function(){return a})),e(t.exports,"SwapToken",(function(){return c})),e(t.exports,"SolanaSwapQuote",(function(){return g})),e(t.exports,"EvmSwapQuote",(function(){return h})),e(t.exports,"BridgeQuote",(function(){return b})),e(t.exports,"QuoteType",(function(){return k})),e(t.exports,"SwapperQuoteResponse",(function(){return T})),e(t.exports,"SwapProviderRow",(function(){return C})),e(t.exports,"BridgeProviderRow",(function(){return N})),e(t.exports,"SwapAssetSelectType",(function(){return M}));var o=s("iOvk1"),r=s("cFUcx"),i=s("7XqVB");const a=i.z.object({name:i.z.string(),message:i.z.string()}),u=i.z.object({coingeckoId:i.z.optional(i.z.string())}),c=i.z.object({chainId:o.NetworkID,address:i.z.optional(i.z.string()),name:i.z.string(),symbol:i.z.string(),decimals:i.z.number(),logoURI:i.z.optional(i.z.string()),resourceType:i.z.string(),extensions:i.z.optional(u),includesBridge:i.z.optional(i.z.boolean())}),l=i.z.enum(["network","phantom"]),d=i.z.object({name:i.z.string(),percentage:i.z.number(),amount:i.z.number(),type:l}),p=i.z.object({name:i.z.string(),proportion:i.z.string()}),m=i.z.object({sellAmount:i.z.string(),buyAmount:i.z.string()}),f=m.extend({priceImpact:i.z.number(),sources:i.z.array(p),fees:i.z.array(d)}),g=f.extend({transactionData:i.z.array(i.z.string())}),h=f.extend({allowanceTarget:i.z.string(),exchangeAddress:i.z.string(),gas:i.z.number(),value:i.z.string(),transactionData:i.z.string()}),y=i.z.object({name:i.z.string(),amount:i.z.string(),token:o.FungibleCaip19,percentage:i.z.string(),included:i.z.boolean()}),S=i.z.object({name:i.z.string(),key:i.z.string(),logoURI:i.z.string()}),v=i.z.object({name:i.z.string(),symbol:i.z.string()}),w=i.z.object({transactionData:i.z.string(),buyToken:o.FungibleCaip19,sellToken:o.FungibleCaip19,nonIncludedNonGasFees:i.z.string(),feeCosts:i.z.array(y),chainId:o.NetworkID,tool:S,value:i.z.optional(i.z.string()),allowanceTarget:i.z.optional(i.z.string()),approvalMetadata:i.z.optional(v),exchangeAddress:i.z.optional(i.z.string()),gasCosts:i.z.optional(i.z.array(i.z.number()))}),b=m.extend({executionDuration:i.z.number(),tags:i.z.array(i.z.string()),steps:i.z.array(w),refuelAmount:i.z.optional(i.z.string())}),A=i.z.union([g,h,b]),k=i.z.enum(["solana","eip155","xchain"]),T=i.z.object({type:k,taker:o.FungibleCaip19,buyToken:o.FungibleCaip19,sellToken:o.FungibleCaip19,slippageTolerance:i.z.number(),simulationTolerance:i.z.optional(i.z.number()),gasBuffer:i.z.optional(i.z.number()),quotes:i.z.array(A)}),E=i.z.enum(["swap-approval","swap","bridge-approval","bridge"]),F=i.z.enum(["swap","bridge"]),x=i.z.object({sellToken:o.FungibleCaip19,buyToken:o.FungibleCaip19,approvalMetadata:i.z.optional(v)}),I=i.z.object({type:i.z.literal("solana"),transactions:i.z.array(i.z.string()),transactionTypes:i.z.array(F),transactionPairs:i.z.optional(i.z.array(x))}),P=i.z.object({type:i.z.literal("evm"),transactions:i.z.array(r.EthUnsignedTransactionObject),transactionTypes:i.z.array(E),transactionPairs:i.z.optional(i.z.array(x))}),C=(i.z.union([I,P]),i.z.object({name:i.z.string(),fee:i.z.string()}).strict()),N=i.z.object({name:i.z.string(),fee:i.z.string(),amount:i.z.string(),tags:i.z.array(i.z.object({key:i.z.string(),text:i.z.string()})),time:i.z.object({text:i.z.string(),isFast:i.z.boolean()}),logoURI:i.z.string()});i.z.union([C,N]);var M,U;(U=M||(M={})).Buy="buy",U.Sell="sell"})),s.register("60dsO",(function(t,n){e(t.exports,"formatSecondsAsSwapTime",(function(){return o}));const o=(e,t)=>{const n=Math.floor(e/3600),o=Math.floor((e-3600*n)/60),r=e%60;if(n>0)return t("swapProviderEstimatedTimeHM",{hours:n,minutes:o});if(o>0){return t("swapProviderEstimatedTimeM",{minutes:r>0?o+1:o})}return t("swapProviderEstimatedTimeS",{seconds:r})}})),s.register("2e392",(function(t,n){e(t.exports,"createSwapperHooks",(function(){return T}));var o=s("7gANb"),r=s("aH2Wm"),i=s("l7Y64"),a=s("fz9J3"),u=s("a6NKv"),c=s("9IHYJ"),l=s("i5bCR"),d=s("fI7vj"),p=s("2so4T"),m=s("6aawr"),f=s("fPjP5"),g=s("9gwVO"),h=s("8vAsr"),y=s("ipDsT"),S=s("lQOkI"),v=s("5WhLj"),w=s("5Soz0"),b=s("jVgYF"),A=s("6CB7N"),k=s("02Lw2");function T(e,t,n,s,T,E,F,x,I,P,C){const N=new(0,o.PriorityFeeService);return{useSwapTransactions:e=>(0,u.useSwapTransactions)(Object.assign(Object.assign({},e),{accountHooks:I,priorityFeeService:N})),useSwapQuotes:e=>(0,a.useSwapQuotes)(Object.assign(Object.assign({},e),{getApiEnvironment:n,analytics:T})),useSwapRefuelProps:()=>(0,S.useSwapRefuelProps)({fungibleHooks:x,analytics:T}),useSwapCardProps:()=>(0,g.useSwapCardProps)({transactionHooks:C,priceHooks:F,accountHooks:I}),useSwapSellAssetProps:e=>(0,k.useSwapSellAssetProps)(Object.assign(Object.assign({},e),{transactionHooks:C,priceHooks:F,fungibleHooks:x,accountHooks:I,getApiEnvironment:n,queryClient:s})),useSwapProvidersProps:e=>(0,y.useSwapProvidersProps)(Object.assign(Object.assign({},e),{accountHooks:I,fungibleHooks:x,transactionHooks:C,priceHooks:F,getApiEnvironment:n,analytics:T})),useSwapReviewProps:()=>(0,w.useSwapReviewProps)({accountHooks:I,priceHooks:F,getApiEnvironment:n}),useSwapReviewButtonProps:()=>(0,v.useSwapReviewButtonProps)({accountHooks:I,fungibleHooks:x,transactionHooks:C,priceHooks:F}),useSwapConfirmationProps:n=>(0,h.useSwapConfirmationProps)(Object.assign(Object.assign({},n),{accountSigner:e,storage:t,fungibleHooks:x,priceHooks:F,settingsHooks:P,analytics:T,asyncSwapAnalytics:E,accountHooks:I,transactionHooks:C,priorityFeeService:N})),useSwapSellAssetList:()=>(0,A.useSwapSellAssetList)({fungibleHooks:x}),useSwapBuyAssetProps:()=>(0,f.useSwapBuyAssetProps)(F,T),useSwapBuyAssetList:e=>(0,m.useSwapBuyAssetList)(Object.assign(Object.assign({},e),{fungibleHooks:x,accountHooks:I,getApiEnvironment:n})),useLegacyInitialAssets:e=>(0,l.useLegacyInitialAssets)(Object.assign(Object.assign({},e),{accountHooks:I})),useInitialAssets:e=>(0,c.useInitialAssets)(Object.assign(Object.assign({},e),{accountHooks:I,fungibleHooks:x,getApiEnvironment:n})),useSubscribeSwapQuoteToQueries:e=>(0,p.useSubscribeSwapQuoteToQueries)(Object.assign(Object.assign({},e),{accountHooks:I,fungibleHooks:x,priceHooks:F,getApiEnvironment:n,analytics:T})),useSubscribeGasEstimation:()=>(0,d.useSubscribeGasEstimation)({accountHooks:I,transactionHooks:C,priorityFeeService:N}),useSwapScanTransaction:e=>(0,b.useSwapScanTransaction)(Object.assign(Object.assign({},e),{accountHooks:I})),useBridgeRefuelProps:()=>(0,r.useBridgeRefuelProps)({fungibleHooks:x,priceHooks:F,analytics:T}),useMultichainSwapFungibles:e=>(0,i.useMultichainSwapFungibles)(Object.assign(Object.assign({},e),{storage:t}))}}})),s.register("aH2Wm",(function(n,o){e(n.exports,"useBridgeRefuelProps",(function(){return l}));var r=s("56oyT"),i=s("kAKNF"),a=s("Nt4tV"),u=s("lQOkI"),c=s("2Upmy");const l=({fungibleHooks:e,priceHooks:n,analytics:o})=>{const{isFetchingQuote:s}=(0,c.useQuote)(),{refuelEnabled:l,setRefuelEnabled:d,refuelAmount:p,uiRefuelAmount:m,buyNativeToken:{symbol:f,balance:g,decimals:h,priceId:y}}=(0,u.useSwapRefuelProps)({fungibleHooks:e,analytics:o}),{data:S}=n.usePrice({query:{type:"id",data:y}});let v="";if((null==S?void 0:S.usd)&&p&&h){const e=(0,r.assetToDollars)((0,a.amountToUiAmount)(new(t(i))(p),h).toNumber(),S.usd);v=(0,a.formatDollarAmount)(e)}return{symbol:f,balance:g,refuelAmount:p,uiRefuelAmount:m,estimatedCost:v,refuelEnabled:l,setRefuelEnabled:d,isFetchingQuote:s}}})),s.register("lQOkI",(function(t,n){e(t.exports,"useSwapRefuelProps",(function(){return f}));var o=s("iOvk1"),r=s("5slFC"),i=s("43063"),a=s("29o0l"),u=s("Nt4tV"),c=s("iTQ0V"),l=s("56CT8"),d=s("iHaNO"),p=s("cEoZi"),m=s("2Upmy");const f=({fungibleHooks:e,analytics:t})=>{var n,s,f,g;const{currentQuote:h}=(0,m.useQuote)(),y=(0,p.useIsRefuelSupported)({fungibleHooks:e}),S=(0,c.useSwapperStore)((e=>e.buyFungible)),v=null==S?void 0:S.data.chain.id,{fungible:w}=e.useFungible({key:v?(0,r.networkIdToNativeTokenFungibleKey)(v):void 0}),b=v?o.Chains.getTokenSymbol(v):"",A=null!==(n=null==w?void 0:w.data.decimals)&&void 0!==n?n:0,k=(0,c.useSwapperStore)((e=>e.refuelEnabled)),T=(0,c.useSwapperStore)((e=>e.setRefuelEnabled)),E=(0,a.useCallback)((e=>{t.capture("swapperRefuelToggle",{data:{value:e}}),T(e)}),[T,t]),F=(0,d.isBridgeQuote)(h)?h.refuelAmount:void 0,x=F?`${(0,u.amountToFormattedAmount)(null!=F?F:0,A)} ${b}`:void 0,I=(0,u.amountToFormattedAmount)(null!==(s=null==w?void 0:w.data.amount)&&void 0!==s?s:0,A),P=(0,l.shouldShowRefuelOption)(y,k,F);return{label:i.i18next.t("bridgeRefuelTitle"),refuelSupported:y,refuelEnabled:k,setRefuelEnabled:E,refuelAmount:F,uiRefuelAmount:x,showRefuelOption:P,buyNativeToken:{priceId:null!==(g=null===(f=null==w?void 0:w.data)||void 0===f?void 0:f.coingeckoId)&&void 0!==g?g:"",symbol:b,balance:I,decimals:A}}}})),s.register("56CT8",(function(t,n){e(t.exports,"shouldShowRefuelOption",(function(){return o}));const o=(e,t,n)=>!(!e||t&&!n)})),s.register("iHaNO",(function(t,n){e(t.exports,"isBridgeQuote",(function(){return r})),e(t.exports,"isSolanaSwapQuote",(function(){return i})),e(t.exports,"isEvmSwapQuote",(function(){return a})),e(t.exports,"isSingleNetworkSwapQuote",(function(){return u}));var o=s("iixDX");function r(e){return o.BridgeQuote.safeParse(e).success}function i(e){return o.SolanaSwapQuote.safeParse(e).success}function a(e){return o.EvmSwapQuote.safeParse(e).success}function u(e){return i(e)||a(e)}})),s.register("cEoZi",(function(n,o){e(n.exports,"useIsRefuelSupported",(function(){return p}));var r=s("iOvk1"),i=s("5slFC"),a=s("kAKNF"),u=s("29o0l"),c=s("iTQ0V"),l=s("hCIG6"),d=s("eJ1ND");const p=({fungibleHooks:e})=>{const[n,o]=(0,u.useState)(!1),s=(0,c.useSwapperStore)((e=>e.sellFungible)),p=(0,c.useSwapperStore)((e=>e.buyFungible)),m=null==p?void 0:p.data.chain.id,f=(0,d.isBridgeSwap)(null==s?void 0:s.data.chain.id,null==p?void 0:p.data.chain.id),{fungible:g}=e.useFungible({key:m?(0,i.networkIdToNativeTokenFungibleKey)(m):void 0});return(0,u.useEffect)((()=>{var e;if(!g)return void o(!1);const n=l.DEFAULT_FEES[f?"bridge":"swap"][r.Chains.getChainID(g.data.chain.id)],s=new(t(a))(null!==(e=g.data.amount)&&void 0!==e?e:0).gte(n);o(f&&!s)}),[g,f,o]),n}})),s.register("hCIG6",(function(n,o){e(n.exports,"DEFAULT_FEES",(function(){return c})),e(n.exports,"getMaxSellAmount",(function(){return l}));var r=s("iOvk1"),i=s("5slFC"),a=s("kAKNF"),u=s("Nt4tV");const c={swap:{[r.Chain.Bitcoin]:new(t(a))(0),[r.Chain.Solana]:new(t(a))(3e6),[r.Chain.Ethereum]:new(t(a))(2.5*10**16),[r.Chain.Polygon]:new(t(a))(6*10**16)},bridge:{[r.Chain.Bitcoin]:new(t(a))(0),[r.Chain.Solana]:new(t(a))(3e6),[r.Chain.Ethereum]:new(t(a))(3.75*10**16),[r.Chain.Polygon]:new(t(a))(6*10**16)}};function l(e,n,o=!1){const{decimals:s,amount:l,chain:d}=e.data,p=new(t(a))(l),m=(0,i.isNative)(e.type)?c[o?"bridge":"swap"][r.Chains.getChainID(d.id)]:n,f=e&&(0,i.isNative)(e.type)&&p.gt(m)?p.minus(m).toString():p.toString();return(0,u.amountToUiAmountString)(f,s)}})),s.register("eJ1ND",(function(t,n){e(t.exports,"isBridgeSwap",(function(){return r}));var o=s("iOvk1");const r=(e,t)=>!!e&&!!t&&0!==o.Chains.compareNetworkID(e,t)})),s.register("2Upmy",(function(t,n){e(t.exports,"useQuote",(function(){return i}));var o=s("29o0l"),r=s("iTQ0V");function i(){var e,t;const n=(0,r.useSwapperStore)((e=>e.multichainQuoteResponse)),s=(0,r.useSwapperStore)((e=>e.hasNoRoutes)),i=(0,r.useSwapperStore)((e=>e.selectedProviderIndex)),a=(0,r.useSwapperStore)((e=>e.isFetchingQuote)),u=(0,o.useMemo)((()=>n?n.quotes:[]),[n]),c=u.length>0?u[i]:void 0;return{bestBuyAmount:null!==(t=null===(e=u[0])||void 0===e?void 0:e.buyAmount)&&void 0!==t?t:"",currentQuote:c,hasNoRoutes:s,multichainQuoteResponse:n,quotes:u,selectedProviderIndex:i,isFetchingQuote:a}}})),s.register("l7Y64",(function(t,n){e(t.exports,"useMultichainSwapFungibles",(function(){return c}),(function(e){return c=e}));var o=s("7mQ3Y"),r=s("9W7fs"),i=s("5e414"),a=s("9SFZy"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const c=({accountIdentifier:e,networkID:t,accountSigner:n,storage:s})=>(0,r.useMutation)({mutationFn:r=>u(void 0,void 0,void 0,(function*(){const{swapTransactions:u,type:c}=r;if("evm"===u.type&&c===o.AddressType.EVM){const{gasEstimation:o,pendingApprovalActivityRows:a,pendingSwapActivityRows:l}=r,d=yield(0,i.swapTransactionEvm)({transactions:u.transactions,transactionTypes:u.transactionTypes,networkID:t,gasEstimation:o,pendingSwapActivityRows:l,pendingApprovalActivityRows:a,accountIdentifier:e,accountSigner:n,storage:s});return{networkID:t,chainType:c,id:d}}if("solana"===u.type&&c===o.AddressType.Solana){const{callerAddress:o,connection:i,pendingSwapActivityRows:l}=r;if(!i)throw new Error("missing connection");const d=yield(0,a.swapTransactionSolana)({callerAddress:o,connection:i,networkID:t,transactions:u.transactions,pendingSwapActivityRows:l,accountIdentifier:e,accountSigner:n,storage:s});return{networkID:t,chainType:c,id:d}}throw new Error("unsupported")}))})})),s.register("5e414",(function(t,n){e(t.exports,"swapTransactionEvm",(function(){return u}),(function(e){return u=e}));var o=s("cFUcx"),r=s("7gANb"),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const a=({networkID:e,unsignedTransaction:t,pendingActivityRows:n,accountIdentifier:o,accountSigner:s,storage:i,includeCallPayload:a})=>Object.assign(Object.assign({accountSigner:s,accountIdentifier:o,networkID:e,unsignedTransaction:t},a&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}}),{pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:r.PendingTransactionType.Swap,display:{summary:n}},storage:i}),u=({transactions:e,transactionTypes:t,networkID:n,gasEstimation:s,pendingApprovalActivityRows:u,pendingSwapActivityRows:c,accountIdentifier:l,accountSigner:d,storage:p})=>i(void 0,void 0,void 0,(function*(){let i=!0,m="";for(const[f,g]of e.entries()){const e=s[f],h={gas:`0x${e.gasLimit.toString(16)}`,maxFeePerGas:`0x${e.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${e.maxPriorityFeePerGas.toString(16)}`},y=o.EthUnsignedTransactionObject.parse(Object.assign(Object.assign({},g),h)),S=t[f].includes("approval")?u:c,v=a({networkID:n,accountIdentifier:l,pendingActivityRows:S.shift(),accountSigner:d,storage:p,unsignedTransaction:y,includeCallPayload:i});m=yield(0,r.signAndSendEthereumTransactionAsync)(v),i&&(i=!1)}return m}))})),s.register("9SFZy",(function(t,n){e(t.exports,"swapTransactionSolana",(function(){return c}),(function(e){return c=e}));var o=s("hMVEP"),r=s("7gANb"),i=s("bQvNK"),a=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const u=({networkID:e,transaction:t,feePayer:n,connection:o,pendingActivityRows:s,accountIdentifier:i,accountSigner:a,storage:u})=>({accountSigner:a,accountIdentifier:i,transaction:t,feePayer:n,connection:o,opts:{skipPreflight:!0},pendingTransactionInput:{ownerAddress:n.toBase58(),networkID:e,data:{signature:""},type:r.PendingTransactionType.Swap,display:{summary:s}},storage:u}),c=({callerAddress:e,connection:t,networkID:n,transactions:s,pendingSwapActivityRows:c,accountIdentifier:l,accountSigner:d,storage:p})=>a(void 0,void 0,void 0,(function*(){const a=new(0,o.PublicKey)(e),m=(yield t.getLatestBlockhash("confirmed")).blockhash;let f;for(const[e,g]of s.entries()){const s=(0,o.transactionStringToTransaction)(g,"bs58");(0,o.setRecentBlockhash)(s,m);const h=u({networkID:n,transaction:s,feePayer:a,connection:t,pendingActivityRows:c[e],accountIdentifier:l,accountSigner:d,storage:p});f=yield(0,r.signAndSendSolanaTransactionAsync)(h),yield(0,i.waitForTransactionConfirmationAsync)(t,f)}return null!=f?f:""}))})),s.register("fz9J3",(function(t,n){e(t.exports,"useSwapQuotes",(function(){return c}),(function(e){return c=e}));var o=s("5ekp2"),r=s("jx8aE"),i=s("dOGoW"),a=s("6BFZj"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const c=({sellToken:e,buyToken:t,taker:n,takerDestination:s,sellAmount:c,slippageTolerance:l,refuelEnabled:d,enableNextJupiterClient:p,getApiEnvironment:m,analytics:f})=>{const g=!!c&&!!t&&!!e,h=i.swapperQueryKeys.quotes(e,t,n,c,l,d,p,s);return(0,o.useQuery)({queryKey:h,enabled:g,cacheTime:0,staleTime:0,refetchInterval:a.RefetchInterval.Short,queryFn({queryKey:[,,{sellToken:e,buyToken:t,taker:n,sellAmount:o,slippageTolerance:i}]}){return u(this,void 0,void 0,(function*(){if(!o||!t||!e)throw new Error("missing necessary args");const a=m(),u=yield(0,r.getSwapQuotes)({apiEnv:a,sellToken:e,buyToken:t,taker:n,takerDestination:s,sellAmount:o,slippageTolerance:i,refuelEnabled:d,enableNextJupiterClient:p});return f.capture("swapperQuotesResult",{data:{numQuotes:u.quotes.length,sellToken:e,fromNetworkId:e.chainId,toNetworkId:t.chainId}}),u}))}})}})),s.register("jx8aE",(function(n,o){e(n.exports,"getSwapQuotes",(function(){return f}),(function(e){return f=e}));var r=s("iOvk1"),i=s("43063"),a=s("1LpD3"),u=s("b4wfG"),c=s("9GQfW"),l=s("gouXv"),d=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const p="swap-quotes",m=["SwapperNoQuotes","UnsupportedCountry","UnknownError"];function f({apiEnv:e,sellToken:n,buyToken:o,taker:s,takerDestination:f,sellAmount:g,slippageTolerance:h,refuelEnabled:y,enableNextJupiterClient:S}){return d(this,void 0,void 0,(function*(){let d;try{(0,r.isEvmCaip19Address)(s)&&(s.address=s.address.toLowerCase()),f&&(0,r.isEvmCaip19Address)(f)&&(f.address=f.address.toLowerCase()),(0,r.isEvmCaip19Address)(o)&&(o.address=o.address.toLowerCase()),(0,r.isEvmCaip19Address)(n)&&(n.address=n.address.toLowerCase());const i=`${e}/swap/v2/quotes`,u=yield t(a)(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign(Object.assign({sellToken:n,buyToken:o,taker:s,takerDestination:f,sellAmount:g,slippageTolerance:h},y?{refuel:1,ignoreRefuelFailures:!0}:{}),{enableNextJupiterClient:S}))});return d=u.status,yield(0,c.handleBadResponse)(u,p),(0,l.parseSwapQuotesResponse)(yield u.json(),y)}catch(t){const r=t instanceof i.LocalizedError?t:new(0,i.LocalizedError);throw m.includes(r.code)||(0,u.captureClientError)(r,d,p,{apiEnv:e,sellToken:n,buyToken:o,sellAmount:g,slippageTolerance:h}),r}}))}})),s.register("b4wfG",(function(t,n){e(t.exports,"captureClientError",(function(){return r}));var o=s("csW2r");const r=(e,t,n,r)=>{(!t||t>=400&&t<500)&&(o.telemetry.addBreadcrumb(n,JSON.stringify(r),o.Severity.Info),o.telemetry.captureError(e,o.FeatureTag.Swapper))}})),s.register("9GQfW",(function(t,n){e(t.exports,"handleBadResponse",(function(){return u}),(function(e){return u=e}));var o=s("43063"),r=s("csW2r"),i=s("iixDX"),a=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const u=(e,t,n)=>a(void 0,void 0,void 0,(function*(){if(e.ok)return;let s;try{s=yield e.json()}catch(e){throw new(0,o.LocalizedError)({key:n})}const a=i.ErrorResponse.safeParse(s);if(a.success)throw r.telemetry.addBreadcrumb(t,JSON.stringify(a.data),r.Severity.Info),new(0,o.LocalizedError)({key:a.data.name});throw new(0,o.LocalizedError)({key:n})}))})),s.register("gouXv",(function(t,n){e(t.exports,"parseSwapQuotesResponse",(function(){return i}));var o=s("43063"),r=s("iixDX");const i=(e,t)=>{const n=new(0,o.LocalizedError)({key:"SwapperNoQuotes"});if(!1===r.QuoteType.safeParse(null==e?void 0:e.type).success)throw new Error("Invalid input");const s=r.SwapperQuoteResponse.safeParse(e);if(!s.success)throw n;if(0===s.data.quotes.length){if(t)throw new(0,o.LocalizedError)({key:"SwapperRefuelNoQuotes"});throw n}return s.data}})),s.register("dOGoW",(function(t,n){e(t.exports,"SWAPPER_QUERY_KEYS_PREFIX",(function(){return r})),e(t.exports,"swapperQueryKeys",(function(){return i}));const o="swapper";var r,s;(s=r||(r={})).pairs="pairs",s.quotes="quotes",s.transactions="transactions";const i={pairs:(e,t,n,s,i)=>[o,r.pairs,{sellToken:e,supportedNetworkIds:t,enableBridgePairs:n,enableNextJupiterClient:s,enableNativeBridgePairs:i}],quotes:(e,t,n,s,i,a,u,c)=>[o,r.quotes,{sellToken:e,buyToken:t,taker:n,takerDestination:c,sellAmount:s,slippageTolerance:i,refuelEnabled:a,enableNextJupiterClient:u}],transactions:e=>[o,r.transactions,e]}})),s.register("6BFZj",(function(t,n){e(t.exports,"CacheTime",(function(){return o})),e(t.exports,"StaleTime",(function(){return i})),e(t.exports,"RefetchInterval",(function(){return u}));var o,r,i,a,u,c,l=s("RVqnc");(r=o||(o={}))[r.Always=1/0]="Always",r[r.Short=(0,l.toMilliseconds)({days:1})]="Short",r[r.Medium=(0,l.toMilliseconds)({days:3})]="Medium",r[r.Long=(0,l.toMilliseconds)({days:7})]="Long",(a=i||(i={}))[a.Immediate=0]="Immediate",a[a.Short=(0,l.toMilliseconds)({minutes:1})]="Short",a[a.Medium=(0,l.toMilliseconds)({minutes:2.5})]="Medium",a[a.Long=(0,l.toMilliseconds)({minutes:60})]="Long",a[a.Never=1/0]="Never",(c=u||(u={}))[c.Short=(0,l.toMilliseconds)({seconds:20})]="Short",c[c.Medium=(0,l.toMilliseconds)({minutes:2.5})]="Medium",c[c.Long=(0,l.toMilliseconds)({minutes:5})]="Long"})),s.register("a6NKv",(function(n,o){e(n.exports,"useSwapTransactions",(function(){return S}),(function(e){return S=e}));var r=s("iOvk1"),i=s("cFUcx"),a=s("hMVEP"),u=s("csW2r"),c=s("7gANb"),l=s("5ekp2"),d=s("kAKNF"),p=s("iHaNO"),m=s("dOGoW"),f=s("6BFZj"),g=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const h=({callerAddress:e,contractAddress:n,networkId:o,sellAmount:s,allowanceTarget:a,exchangeAddress:u,value:l,transactionData:p,type:m})=>g(void 0,void 0,void 0,(function*(){const f=[],g=[];if(n){if((yield(0,c.getERC20Allowance)({callerAddress:e,spender:a,networkId:o,contractAddress:n})).lt(s.toString())){const t=yield(0,c.getERC20Approval)({callerAddress:e,spender:a,networkId:o,contractAddress:n});f.push(t),g.push(`${m}-approval`)}}const h=i.EthUnsignedTransactionObject.parse(Object.assign({type:i.TransactionTypes.eip1559,from:e,data:p,chainId:r.Chains.getEVMNetworkIDValue(o),to:u},"0"===l?{}:{value:`0x${new(t(d))(l).toString(16)}`}));return f.push(h),g.push(m),{transactions:f,transactionTypes:g}})),y=({quote:e,priorityFeeService:t,connection:n})=>g(void 0,void 0,void 0,(function*(){const o=e.transactionData.map((e=>((e,t,n)=>g(void 0,void 0,void 0,(function*(){const o=(0,a.transactionStringToTransaction)(e,"bs58");return yield t.addPriorityFee(o,{connection:n,transactionType:c.TransactionTypeValue.Swap,calculators:{budget:new(0,c.StaticLimitCalculator)(c.COMPUTE_UNIT_LIMIT)}})})))(e,t,n))),r=(yield Promise.all(o)).map((e=>c.TransactionSerializationUtils.serialize(e).transaction));return{type:"solana",transactionTypes:r.map((()=>"swap")),transactions:r}})),S=({accountHooks:e,priorityFeeService:t,callerAddress:n,sellFungible:o,quote:s})=>{const{connection:i}=e.useSelectedSolanaConnection(),a=m.swapperQueryKeys.transactions(s);return(0,l.useQuery)({queryKey:a,enabled:!!s,cacheTime:0,staleTime:0,refetchInterval:f.RefetchInterval.Short,onError(e){e instanceof Error&&u.telemetry.captureError(e,u.FeatureTag.Swapper)},queryFn(){return g(this,void 0,void 0,(function*(){if(!s)throw new Error("Missing quote");const e=null==o?void 0:o.data.chain.id;if((0,p.isSingleNetworkSwapQuote)(s)){if(r.Chains.isEVMNetworkID(e)&&(0,p.isEvmSwapQuote)(s))return(({networkId:e,callerAddress:t,quote:n,sellFungible:o})=>g(void 0,void 0,void 0,(function*(){var r;const s=null!==(r=null==o?void 0:o.data.tokenAddress)&&void 0!==r?r:"",{allowanceTarget:i,exchangeAddress:a,sellAmount:u,value:c}=n,l=yield h({callerAddress:t,contractAddress:s,networkId:e,sellAmount:u,allowanceTarget:i,exchangeAddress:a,value:c,transactionData:n.transactionData,type:"swap"});return Object.assign({type:"evm"},l)})))({networkId:e,callerAddress:n,quote:s,sellFungible:o});if(r.Chains.isSolanaNetworkID(e)&&(0,p.isSolanaSwapQuote)(s))return y({quote:s,priorityFeeService:t,connection:i});throw new Error(`Single network swap quote not supported for network ID ${e}`)}if((0,p.isBridgeQuote)(s)){if(r.Chains.isEVMNetworkID(e))return(({networkId:e,callerAddress:t,quote:n})=>g(void 0,void 0,void 0,(function*(){const{sellAmount:o,steps:s}=n,i=[],a=[],u=[];for(const n of s){const{allowanceTarget:s,exchangeAddress:c,value:l,transactionData:d,sellToken:p,buyToken:m,approvalMetadata:f}=n,g=p.resourceType===r.Caip19ResourceType.address?p.address:null,y=0===r.Chains.compareNetworkID(p.chainId,m.chainId)?"swap":"bridge";if(!(s&&c&&d&&l))throw new Error("Missing bridge step data for EVM bridge quote.");const S=yield h({callerAddress:t,contractAddress:g,networkId:e,sellAmount:o,allowanceTarget:s,exchangeAddress:c,value:l,transactionData:d,type:y});i.push(...S.transactions),a.push(...S.transactionTypes),u.push({sellToken:p,buyToken:m,approvalMetadata:f}),2==S.transactionTypes.length&&S.transactionTypes.find((e=>e.includes("approval")))&&u.push({sellToken:p,buyToken:m,approvalMetadata:f})}return{type:"evm",transactions:i,transactionTypes:a,transactionPairs:u}})))({networkId:e,callerAddress:n,quote:s});if(r.Chains.isSolanaNetworkID(e))return(e=>g(void 0,void 0,void 0,(function*(){const t=e.steps.reduce(((e,t)=>{const{transactionData:n,sellToken:o,buyToken:s}=t,i=0===r.Chains.compareNetworkID(o.chainId,s.chainId)?"swap":"bridge",a=[...e.transactions],u=[...e.transactionTypes],c=[...e.transactionPairs];return a.push(n),u.push(i),c.push({sellToken:o,buyToken:s}),{transactions:a,transactionTypes:u,transactionPairs:c}}),{transactions:[],transactionTypes:[],transactionPairs:[]});return Object.assign({type:"solana"},t)})))(s);throw new Error(`Bridge quote not supported for network ID ${e}`)}throw new Error("Swap quote type not supported")}))}})}})),s.register("9IHYJ",(function(t,n){e(t.exports,"useInitialAssets",(function(){return f}));var o=s("iOvk1"),r=s("5slFC"),i=s("29o0l"),a=s("2UOPE"),u=s("iTQ0V"),c=s("997BK"),l=s("6aawr"),d=s("6CB7N");const p=e=>{if(e)try{return(0,o.decodeCaip19)(e)}catch(e){return}},m=(e,t)=>e.find((e=>{const n=(0,r.getFungibleTokenTypeFromFungibleCaip19)(t);return!(!(0,r.isNative)(n)||n!==e.type)||(t.resourceType===o.Caip19ResourceType.address?t.address===(0,r.parseFungibleKey)(e):void 0)}));function f({paramsSellFungible:e,paramsSellAmount:t,paramsBuyFungible:n,enableBridgePairs:o,enableNextJupiterClient:s,enableNativeBridgePairs:f,accountHooks:g,fungibleHooks:h,getApiEnvironment:y}){const S=(0,i.useMemo)((()=>p(e)),[e]),v=(0,i.useMemo)((()=>p(n)),[n]),w=t,{data:b}=g.useSelectedMultiChainAccount(),{assets:A,isLoading:k}=(0,d.useSwapSellAssetList)({fungibleHooks:h}),{assets:T,isLoading:E}=(0,l.useSwapBuyAssetList)({fungibleHooks:h,accountHooks:g,getApiEnvironment:y,enableBridgePairs:o,enableNextJupiterClient:s,enableNativeBridgePairs:f,enableQuery:!!v}),F=(0,c.useInitialSellFungible)({accountHooks:g}),x=(0,u.useSwapperStore)((e=>e.setBuyFungible)),I=(0,u.useSwapperStore)((e=>e.setSellFungible)),P=(0,u.useSwapperStore)((e=>e.setUiSellAmount)),C=(0,u.useSwapperStore)((e=>e.setSellAmount)),N=(0,u.useSwapperStore)((e=>e.buyFungible)),M=(0,u.useSwapperStore)((e=>e.sellFungible));(0,i.useEffect)((()=>{if(!S&&v)return(0,r.isNative)((0,r.getFungibleTokenTypeFromFungibleCaip19)(v))?void I(a.CHAIN_TO_USDC_FUNGIBLE.get(v.chainId)):void I(a.CHAIN_TO_NATIVE_FUNGIBLE.get(v.chainId));if(k||!S)return;let e=m(A,S);e||((0,r.isNative)((0,r.getFungibleTokenTypeFromFungibleCaip19)(S))?e=a.CHAIN_TO_NATIVE_FUNGIBLE.get(S.chainId):v&&v.chainId===S.chainId&&(e=(0,r.isNative)((0,r.getFungibleTokenTypeFromFungibleCaip19)(v))?a.CHAIN_TO_USDC_FUNGIBLE.get(v.chainId):a.CHAIN_TO_NATIVE_FUNGIBLE.get(v.chainId))),I(e)}),[S,v,k,I]),(0,i.useEffect)((()=>{if(E||!v)return;let e=m(T,v);!e&&(0,r.isNative)((0,r.getFungibleTokenTypeFromFungibleCaip19)(v))&&(e=a.CHAIN_TO_NATIVE_FUNGIBLE.get(v.chainId)),x(e)}),[v,E,x]),(0,i.useEffect)((()=>(S||v||I(F),v||x(void 0),()=>{I(void 0),x(void 0)})),[null==b?void 0:b.identifier]),(0,i.useEffect)((()=>{w&&(C(w),P(w))}),[w,P,C]);return{isLoading:!!S&&!M&&k||!!v&&!N&&E}}})),s.register("997BK",(function(t,n){e(t.exports,"useInitialSellFungible",(function(){return i}));var o=s("29o0l"),r=s("dJBKs");const i=({accountHooks:e})=>{const t=e.useSelectedNetworks();return(0,o.useMemo)((()=>(0,r.getInitialSellFungible)(t)),[t])}})),s.register("dJBKs",(function(t,n){e(t.exports,"getInitialSellFungible",(function(){return r}));var o=s("2UOPE");const r=e=>{var t;return 0===e.length?o.INITIAL_SELL_FUNGIBLE:null!==(t=o.CHAIN_TO_NATIVE_FUNGIBLE.get(e[0]))&&void 0!==t?t:o.INITIAL_SELL_FUNGIBLE}})),s.register("6aawr",(function(t,n){e(t.exports,"useSwapBuyAssetList",(function(){return m}));var o=s("iOvk1"),r=s("5slFC"),i=s("29o0l"),a=s("9CoSy"),u=s("j3ma1"),c=s("iTQ0V"),l=s("aBD8n"),d=s("k03LJ"),p=s("5KI92");function m({fungibleHooks:e,accountHooks:t,getApiEnvironment:n,enableBridgePairs:s,enableNextJupiterClient:m,enableNativeBridgePairs:f,enableQuery:g=!0}){var h,y,S;const v=(0,c.useSwapperStore)((e=>e.sellFungible)),{fungibles:w,isLoadingTokens:b,isRefetchingTokens:A,tokensError:k}=e.useFungibles(),T=(0,p.useSwapAssetCaip19)(v),{data:E}=t.useSelectedChainAddress({address:null===(h=null==v?void 0:v.data)||void 0===h?void 0:h.walletAddress,networkID:null===(y=null==v?void 0:v.data)||void 0===y?void 0:y.chain.id}),F=null!==(S=null==E?void 0:E.address)&&void 0!==S?S:"",x=(0,d.useSupportedNetworkIDs)({accountHooks:t}),{data:I=[],isLoading:P,error:C}=(0,u.useSwapPairs)({sellToken:T,supportedNetworkIDs:x,enableBridgePairs:s,enableNextJupiterClient:m,enableNativeBridgePairs:f,getApiEnvironment:n,enableQuery:g}),N=(0,i.useMemo)((()=>new Map(w.map((e=>[e.data.key,e])))),[w]),M=(0,i.useMemo)((()=>{if(0===I.length)return[];return I.reduce(((e,t)=>{let n="";const s=t.address;let i;t.address===a.WRAPPED_SOLANA.address?n=r.FungibleTokenType.SolanaNative:t.resourceType===o.Caip19ResourceType.nativeToken?n=(0,r.networkIdToNativeTokenFungibleKey)(t.chainId):s&&(n=s);const u=N.get(n);return i=u&&u.data.balance?u:(0,l.swapTokenToFungible)(t,F),i&&e.push(i),e}),[]).sort(r.compareFungibleBalance)}),[N,I,F]);return(0,i.useMemo)((()=>({assets:M,initialFilterKey:null==v?void 0:v.data.chain.id,isLoading:b||P,isFetching:b||P||A,error:null!=k?k:C})),[M,b,P,A,k,C,v])}})),s.register("j3ma1",(function(t,n){e(t.exports,"useSwapPairs",(function(){return l}),(function(e){return l=e})),e(t.exports,"prefetchSwapPairs",(function(){return d}),(function(e){return d=e}));var o=s("5ekp2"),r=s("kA1kJ"),i=s("dOGoW"),a=s("6BFZj"),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const c=({sellToken:e,supportedNetworkIDs:t,enableBridgePairs:n,enableNextJupiterClient:o,enableNativeBridgePairs:s,getApiEnvironment:i})=>u(void 0,void 0,void 0,(function*(){if(!e)throw new Error("missing sell token");const a=i();return(0,r.getSwapPairs)({apiEnv:a,sellToken:e,supportedNetworkIDs:t,enableBridgePairs:n,enableNextJupiterClient:o,enableNativeBridgePairs:s})})),l=({sellToken:e,supportedNetworkIDs:t,enableBridgePairs:n,enableNextJupiterClient:r,enableNativeBridgePairs:s,enableQuery:u=!0,getApiEnvironment:l})=>(0,o.useQuery)({queryKey:i.swapperQueryKeys.pairs(e,t,n,r,s),cacheTime:a.CacheTime.Always,staleTime:a.StaleTime.Long,refetchInterval:a.RefetchInterval.Short,enabled:!!e&&u,queryFn:()=>c({sellToken:e,supportedNetworkIDs:t,enableBridgePairs:n,enableNextJupiterClient:r,enableNativeBridgePairs:s,getApiEnvironment:l})}),d=({sellToken:e,supportedNetworkIDs:t,enableBridgePairs:n,enableNextJupiterClient:o,enableNativeBridgePairs:r,getApiEnvironment:s,queryClient:a})=>{a.prefetchQuery(i.swapperQueryKeys.pairs(e,t,n,o,r),(()=>c({sellToken:e,supportedNetworkIDs:t,enableBridgePairs:n,enableNextJupiterClient:o,enableNativeBridgePairs:r,getApiEnvironment:s})))}})),s.register("kA1kJ",(function(n,o){e(n.exports,"getSwapPairs",(function(){return m}),(function(e){return m=e}));var r=s("iOvk1"),i=s("43063"),a=s("1LpD3"),u=s("b4wfG"),c=s("9GQfW"),l=s("1m0w7"),d=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const p="swap-pairs";function m({apiEnv:e,sellToken:n,supportedNetworkIDs:o,enableBridgePairs:s,enableNextJupiterClient:m,enableNativeBridgePairs:f}){return d(this,void 0,void 0,(function*(){let d;try{(0,r.isEvmCaip19Address)(n)&&(n.address=n.address.toLowerCase());const i=`${e}/swap/v2/pairs`,u=yield t(a)(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tokens:[n],includeBridgePairs:s,enableNextJupiterClient:m,enableNativeBridgePairs:f,supportedNetworkIDs:o})});return d=u.status,yield(0,c.handleBadResponse)(u,p),(0,l.parseSwapPairsResponse)(yield u.json())}catch(t){const o=t instanceof i.LocalizedError?t:new(0,i.LocalizedError);throw(0,u.captureClientError)(o,d,p,{apiEnv:e,sellToken:n}),o}}))}})),s.register("1m0w7",(function(t,n){e(t.exports,"parseSwapPairsResponse",(function(){return i}));var o=s("iOvk1"),r=s("iixDX");const i=e=>{var t;if(!e.tokens)return[];const n=[],s=Object.keys(e.tokens)[0];if(o.BRI.safeParse(s).success){(null!==(t=e.tokens[s])&&void 0!==t?t:[]).forEach((e=>{const t=r.SwapToken.safeParse(e);t.success&&n.push(t.data)}))}return n}})),s.register("aBD8n",(function(n,o){e(n.exports,"swapTokenToFungible",(function(){return d}));var r=s("iOvk1"),i=s("5slFC"),a=s("kAKNF");const u={id:r.Chains.solana.mainnetID,imageUrl:r.Chains.solana.iconUrl,name:r.Chains.solana.name,symbol:r.Chains.solana.tokenSymbol},c={id:r.Chains.ethereum.mainnetID,imageUrl:r.Chains.ethereum.iconUrl,name:r.Chains.ethereum.name,symbol:r.Chains.ethereum.tokenSymbol},l={id:r.Chains.polygon.mainnetID,imageUrl:r.Chains.polygon.iconUrl,name:r.Chains.polygon.name,symbol:r.Chains.polygon.tokenSymbol},d=(e,n)=>{var o,s;const d={amount:"0",balance:new(t(a))(0),coingeckoId:null!==(s=null===(o=e.extensions)||void 0===o?void 0:o.coingeckoId)&&void 0!==s?s:null,decimals:e.decimals,key:e.address,logoUri:e.logoURI,mintAddress:e.address,name:e.name,splTokenAccountPubkey:"",symbol:e.symbol,tokenAddress:e.address,walletAddress:n};if(e.chainId===r.NetworkIDs.Ethereum.Mainnet){if(e.resourceType===r.Caip19ResourceType.nativeToken)return{type:i.FungibleTokenType.EthereumNative,data:Object.assign(Object.assign({},d),{chain:c})};if(e.resourceType===r.Caip19ResourceType.address)return{type:i.FungibleTokenType.ERC20,data:Object.assign(Object.assign({},d),{chain:c,contractAddress:e.address})}}else if(e.chainId===r.NetworkIDs.Polygon.Mainnet){if(e.resourceType===r.Caip19ResourceType.nativeToken)return{type:i.FungibleTokenType.PolygonNative,data:Object.assign(Object.assign({},d),{chain:l})};if(e.resourceType===r.Caip19ResourceType.address)return{type:i.FungibleTokenType.ERC20,data:Object.assign(Object.assign({},d),{chain:l,contractAddress:e.address})}}else if(e.chainId===r.NetworkIDs.Solana.Mainnet){if(e.resourceType===r.Caip19ResourceType.nativeToken)return{type:i.FungibleTokenType.SolanaNative,data:Object.assign(Object.assign({},d),{chain:u})};if(e.resourceType===r.Caip19ResourceType.address)return{type:i.FungibleTokenType.SPL,data:Object.assign(Object.assign({},d),{chain:u,mintAddress:e.address})}}return null}})),s.register("k03LJ",(function(t,n){e(t.exports,"useSupportedNetworkIDs",(function(){return i}));var o=s("iOvk1"),r=s("29o0l");const i=({accountHooks:e})=>{const{data:t}=e.useSelectedMultiChainAccount();return(0,r.useMemo)((()=>{var e;return[...new Set((null!==(e=null==t?void 0:t.addresses)&&void 0!==e?e:[]).map((e=>e.networkID)).filter((e=>o.SolanaNetworkID.Mainnet===e||o.EthereumNetworkID.Mainnet===e||o.PolygonNetworkID.Mainnet===e)))]}),[t])}})),s.register("5KI92",(function(t,n){e(t.exports,"useSwapAssetCaip19",(function(){return i}));var o=s("5slFC"),r=s("29o0l");function i(e){return(0,r.useMemo)((()=>void 0===e?void 0:(0,o.getFungibleCaip19FromFungible)(e)),[e])}})),s.register("6CB7N",(function(t,n){e(t.exports,"useSwapSellAssetList",(function(){return c}));var o=s("iOvk1"),r=s("29o0l"),i=s("iTQ0V"),a=s("2REEw"),u=s("30Tum");function c({fungibleHooks:e}){const{fungibles:t,isLoadingTokens:n,tokensError:s}=e.useFungibles(),c=t.filter((e=>o.Chains.isSolanaNetworkID(e.data.chain.id)||o.Chains.isEVMNetworkID(e.data.chain.id))),l=(0,i.useSwapperStore)((e=>e.sellFungible)),d=(0,r.useMemo)((()=>{if(l){const e=c.findIndex((e=>(0,a.areFungiblesEqual)(e,l))),t=c[e];t&&t.data.amount!==l.data.amount&&(c[e]=l)}return c.filter((e=>(0,u.canSellAsset)(e)))}),[c,l]);return(0,r.useMemo)((()=>({assets:d,isLoading:n,error:s})),[d,n,s])}})),s.register("2REEw",(function(t,n){function o(e,t){return e.data.key===t.data.key}e(t.exports,"areFungiblesEqual",(function(){return o}))})),s.register("i5bCR",(function(t,n){e(t.exports,"useLegacyInitialAssets",(function(){return u}));var o=s("29o0l"),r=s("2UOPE"),i=s("iTQ0V"),a=s("997BK");function u({skipBuyFungible:e,accountHooks:t}){const{data:n}=t.useSelectedMultiChainAccount(),s=(0,a.useInitialSellFungible)({accountHooks:t}),u=(0,i.useSwapperStore)((e=>e.setBuyFungible)),c=(0,i.useSwapperStore)((e=>e.setSellFungible));(0,o.useEffect)((()=>{c(s),u(e?void 0:r.CHAIN_TO_USDC_FUNGIBLE.get(s.data.chain.id))}),[null==n?void 0:n.identifier])}})),s.register("fI7vj",(function(t,n){e(t.exports,"useSubscribeGasEstimation",(function(){return a}));var o=s("29o0l"),r=s("iTQ0V"),i=s("kBlcI");function a({accountHooks:e,transactionHooks:t,priorityFeeService:n}){const s=(0,r.useSwapperStore)((e=>e.setGasEstimation)),a=(0,r.useSwapperStore)((e=>e.setIsFetchingGasEstimation)),u=(0,r.useSwapperStore)((e=>e.setMaxGasEstimation)),c=(0,r.useSwapperStore)((e=>e.quoteFetchIntervalToggle)),{gasEstimation:l,isFetching:d}=(0,i.useSwapGasEstimation)({accountHooks:e,transactionHooks:t,priorityFeeService:n}),{gasEstimation:p}=(0,i.useSwapGasEstimation)({accountHooks:e,transactionHooks:t,priorityFeeService:n,includeGasBuffer:!0});(0,o.useEffect)((()=>{c?(a(d),s(l),u(p)):a(!1)}),[c,s,u,a,l,p,d])}})),s.register("kBlcI",(function(n,o){e(n.exports,"useSwapGasEstimation",(function(){return y}));var r=s("iOvk1"),i=s("7mQ3Y"),a=s("7gANb"),u=s("kAKNF"),c=s("29o0l"),l=s("a6NKv"),d=s("iTQ0V"),p=s("iHaNO"),m=s("i8bL0"),f=s("997BK"),g=s("2Upmy");const h=e=>{switch(e){case r.NetworkIDs.Ethereum.Mainnet:case r.NetworkIDs.Ethereum.Goerli:case r.NetworkIDs.Ethereum.Sepolia:return 8e5;case r.NetworkIDs.Polygon.Mainnet:case r.NetworkIDs.Polygon.Mumbai:return 5e5;default:return 0}},y=({accountHooks:e,transactionHooks:n,priorityFeeService:o,includeGasBuffer:s=!1})=>{var y,S,v;const{currentQuote:w,multichainQuoteResponse:b}=(0,g.useQuote)(),A=(0,f.useInitialSellFungible)({accountHooks:e}),k=null!==(y=(0,d.useSwapperStore)((e=>e.sellFungible)))&&void 0!==y?y:A,T=null!==(S=null==k?void 0:k.data.chain.id)&&void 0!==S?S:r.NetworkIDs.Solana.Mainnet,{data:E}=e.useSelectedChainAddress({address:k.data.walletAddress,networkID:k.data.chain.id}),F=null!==(v=null==E?void 0:E.address)&&void 0!==v?v:"",{data:x}=n.useEthereumGasEstimation({networkID:r.Chains.isEVMNetworkID(T)?T:r.NetworkIDs.Ethereum.Mainnet,transactionSpeed:a.TransactionSpeed.standard,gasLimit:new(t(u))(1),refetchInterval:2e4}),{data:I,isFetching:P}=(0,l.useSwapTransactions)({accountHooks:e,priorityFeeService:o,callerAddress:F,sellFungible:k,quote:w});let C=null;"evm"===(null==I?void 0:I.type)&&r.Chains.isEVMNetworkID(T)&&(C={networkID:T,origin:"https://phantom.app",userAccount:F,transactions:I.transactions}),"solana"===(null==I?void 0:I.type)&&r.Chains.isSolanaNetworkID(T)&&(C={networkID:T,origin:"https://phantom.app",userAccount:F,transactions:I.transactions});const N=a.simulations.useScanTransaction({label:"useSwapGasEstimation",params:C}),M=N.data,{data:U,isFetching:O}=(0,m.useEstimateSolanaNetworkFee)({swapTransactions:I,chainId:r.Chains.isSolanaNetworkID(T)?T:r.NetworkIDs.Solana.Mainnet}),R=(0,c.useMemo)((()=>{if(r.Chains.isEVMNetworkID(T)&&((0,p.isEvmSwapQuote)(w)||(0,p.isBridgeQuote)(w))&&x){const{maxFeePerGas:n,maxPriorityFeePerGas:o}=x;let r=(0,p.isEvmSwapQuote)(w)?[w.gas]:(e=T,w.steps.flatMap((t=>{var n;return null!==(n=t.gasCosts)&&void 0!==n?n:[h(e)]})));if((null==M?void 0:M.chainType)===i.AddressType.EVM){const e=M.evaluation.gas;if(e){const t=e.map((e=>{var t;return null!==(t=parseInt(e,10))&&void 0!==t?t:0}));e.reduce(((e,t)=>e+parseInt(t,10)),0)>0&&(r=t)}}return r.map((e=>{var r;return{maxFeePerGas:n,maxPriorityFeePerGas:o,networkID:T,gasLimit:new(t(u))(e).multipliedBy(s?null!==(r=null==b?void 0:b.gasBuffer)&&void 0!==r?r:1.3:1).integerValue(t(u).ROUND_CEIL)}}))}var e;if(r.Chains.isSolanaNetworkID(T)&&void 0!==U)return U.map((e=>({networkID:T,value:e})))}),[T,w,x,U,M,b,s]),L=O||P||N.isFetching;return(0,c.useMemo)((()=>({gasEstimation:R,isFetching:L,isError:void 0===x})),[R,L,x])}})),s.register("i8bL0",(function(t,n){e(t.exports,"useEstimateSolanaNetworkFee",(function(){return l}),(function(e){return l=e}));var o=s("hMVEP"),r=s("7gANb"),i=s("5ekp2"),a=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const u="swap-priority-fee",c=(e,t)=>a(void 0,void 0,void 0,(function*(){const n=(0,o.transactionStringToTransaction)(e,"bs58");return{networkFeeEstimation:yield(0,r.estimateFeeFromMessage)(t,n.message)}}));function l({swapTransactions:e,chainId:t}){const n=[u,e],o=!!e&&e.transactions.length>0&&"solana"===e.type&&!!t;return(0,i.useQuery)({queryKey:n,queryFn:()=>a(this,void 0,void 0,(function*(){if(!e)throw new Error("No swap transactions");if("solana"!==e.type)throw new Error("Trying estimate network fee for non-solana txs");if(!t)throw new Error("Trying to execute swap with no chain id.");try{const n=e.transactions.map((e=>c(e,t))),o=yield Promise.all(n);return o.map((e=>e.networkFeeEstimation.value))}catch(e){return[0]}})),enabled:o})}})),s.register("2so4T",(function(n,o){e(n.exports,"useSubscribeSwapQuoteToQueries",(function(){return y}));var r=s("43063"),i=s("kAKNF"),a=s("29o0l"),u=s("2neO6"),c=s("Nt4tV"),l=s("2UOPE"),d=s("fz9J3"),p=s("iTQ0V"),m=s("eJ1ND"),f=s("2nOi3"),g=s("cEoZi"),h=s("5KI92");function y({accountHooks:e,fungibleHooks:n,priceHooks:o,enableBridgePairs:s,enableNextJupiterClient:y,skipInitialBuyFungible:S,getApiEnvironment:v,analytics:w}){var b,A;const k=(0,p.useSwapperStore)((e=>e.sellAmount)),T=(0,p.useSwapperStore)((e=>e.buyFungible)),E=null!=T?T:S?void 0:l.INITIAL_BUY_FUNGIBLE,F=(0,h.useSwapAssetCaip19)(E),x=(0,p.useSwapperStore)((e=>e.sellFungible)),I=(0,p.useSwapperStore)((e=>e.refuelEnabled)),P=(0,p.useSwapperStore)((e=>e.setRefuelEnabled)),C=(0,h.useSwapAssetCaip19)(x),N=(0,p.useSwapperStore)((e=>e.quoteFetchIntervalToggle)),M=(0,p.useSwapperStore)((e=>e.resetQuote)),U=(0,p.useSwapperStore)((e=>e.setHasNoRoutes)),O=(0,p.useSwapperStore)((e=>e.setError)),R=(0,p.useSwapperStore)((e=>e.setIsFetchingQuote)),L=(0,p.useSwapperStore)((e=>e.setMultichainQuoteResponse)),_=(0,p.useSwapperStore)((e=>e.setSelectedProviderIndex)),D=(0,g.useIsRefuelSupported)({fungibleHooks:n});(0,a.useEffect)((()=>P(D)),[D,E,P]);const B=(0,f.useHasSwapMinimumSellAmount)(o),H=t(u)(B),Q=(0,a.useMemo)((()=>new(t(i))(k).isGreaterThan(0)&&x?(0,c.uiAmountToAmount)(k,x.data.decimals).toString():(M(),"")),[M,k,x]),V=(0,m.isBridgeSwap)(null===(b=null==x?void 0:x.data)||void 0===b?void 0:b.chain.id,null==E?void 0:E.data.chain.id);(0,a.useEffect)((()=>{V&&w.capture("swapperRefuelDefault",{data:{default:D}})}),[D,w,V]);const{data:j}=e.useSelectedChainAddress(null===(A=null==x?void 0:x.data)||void 0===A?void 0:A.chain.id),{data:G}=e.useSelectedChainAddress(null==E?void 0:E.data.chain.id),z=(0,a.useMemo)((()=>j?{chainId:j.networkID,address:j.address,resourceType:"address"}:{}),[j]),K=(0,a.useMemo)((()=>{if(s&&V)return{chainId:null==G?void 0:G.networkID,address:null==G?void 0:G.address,resourceType:"address"}}),[s,V,null==G?void 0:G.address,null==G?void 0:G.networkID]),{data:q,error:$,isFetching:W}=(0,d.useSwapQuotes)({sellToken:C,buyToken:F,taker:z,takerDestination:K,sellAmount:B?Q:"",slippageTolerance:l.DEFAULT_SLIPPAGE,refuelEnabled:I,enableNextJupiterClient:y,getApiEnvironment:v,analytics:w}),J=(0,a.useCallback)((e=>{O(null),_(0),R(!1),U(!1),L(e)}),[O,U,R,L,_]),Y=(0,a.useCallback)((e=>{M(),R(!1),U(!0),O(e)}),[M,O,U,R]);(0,a.useEffect)((()=>{N&&(W?R(!0):q?J(q):$&&Y($))}),[$,q,W,J,Y,R,N,B]),(0,a.useEffect)((()=>{B?!1===H&&B&&(O(null),U(!1)):(O(new(0,r.LocalizedError)({key:"InsufficientSellAmount"})),U(!0))}),[B,H,O,U])}})),s.register("2neO6",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0});var n=s("29o0l");e.exports.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}})),s.register("2nOi3",(function(t,n){e(t.exports,"useHasSwapMinimumSellAmount",(function(){return c}));var o=s("iOvk1"),r=s("5slFC"),i=s("56oyT"),a=s("iTQ0V");const u={[o.Chain.Bitcoin]:0,[o.Chain.Solana]:0,[o.Chain.Ethereum]:20,[o.Chain.Polygon]:0},c=e=>{const t=(0,a.useSwapperStore)((e=>e.sellFungible)),n=(0,a.useSwapperStore)((e=>e.buyFungible)),s=(0,a.useSwapperStore)((e=>e.sellAmount)),c=t?(0,r.getFungibleCaip19FromFungible)(t):null,{data:l}=e.usePrice(Object.assign({},c?(0,i.getPriceQueryFromFungibleCaip19)(c):{query:{type:"id",data:""}})),d=null==t?void 0:t.data.chain.id,p=null==n?void 0:n.data.chain.id,m=null==l?void 0:l.usd;if(!(d&&p&&s&&m&&0!==o.Chains.compareNetworkID(d,p)))return!0;const f=(0,i.assetToDollars)(Number(s),m),g=u[o.Chains.getChainID(d)],h=u[o.Chains.getChainID(p)];return g<=f&&h<=f}})),s.register("fPjP5",(function(t,n){e(t.exports,"useSwapBuyAssetProps",(function(){return p}));var o=s("iOvk1"),r=s("5slFC"),i=s("56oyT"),a=s("Nt4tV"),u=s("iTQ0V"),c=s("ePUBc"),l=s("2Upmy");const d={chainId:o.NetworkIDs.Solana.Mainnet,slip44:o.Slip44.Solana,resourceType:o.Caip19ResourceType.nativeToken};function p(e,t){var n,o;const s=(0,u.useSwapperStore)((e=>e.buyFungible)),p=(0,u.useSwapperStore)((e=>e.isFetchingQuote)),m=null!==(n=null==s?void 0:s.data.symbol)&&void 0!==n?n:"",f=null!==(o=null==s?void 0:s.data.decimals)&&void 0!==o?o:0,{currentQuote:g,multichainQuoteResponse:h}=(0,l.useQuote)(),y=String(g&&h&&s?(0,a.amountToFormattedAmount)(g.buyAmount,f):""),S=(0,c.useOnSwitchTokens)(t),v=s?(0,r.getFungibleCaip19FromFungible)(s):null,{data:w}=e.usePrice(Object.assign({},(0,i.getPriceQueryFromFungibleCaip19)(v||d)));let b=(null==g?void 0:g.buyAmount)?"":(0,a.formatDollarAmount)(0);if((null==w?void 0:w.usd)&&(null==g?void 0:g.buyAmount)&&s){const e=(0,i.assetToDollars)((0,a.amountToUiAmount)(g.buyAmount,f).toNumber(),w.usd);b=(0,a.formatDollarAmount)(e)}return{assetButtonTitle:m,buyAmount:y,currencyValue:b,decimals:f,buyFungible:s,isFetchingQuote:p,onSwitchTokens:S}}})),s.register("ePUBc",(function(t,n){e(t.exports,"useOnSwitchTokens",(function(){return d}));var o=s("29o0l"),r=s("Nt4tV"),i=s("2UOPE"),a=s("iTQ0V"),u=s("2Upmy"),c=s("dkOnS"),l=s("cfA1B");const d=e=>{var t;const n=(0,a.useSwapperStore)((e=>e.sellFungible)),s=null!==(t=(0,a.useSwapperStore)((e=>e.buyFungible)))&&void 0!==t?t:i.INITIAL_BUY_FUNGIBLE,d=(0,a.useSwapperStore)((e=>e.setSellAmount)),p=(0,a.useSwapperStore)((e=>e.setUiSellAmount)),m=(0,l.useSwapSetSellAsset)(e),f=(0,c.useSwapSetBuyAsset)(e),{currentQuote:g,multichainQuoteResponse:h}=(0,u.useQuote)(),y=String(g&&h&&s?(0,r.amountToFormattedAmount)(g.buyAmount,s.data.decimals):"");return(0,o.useCallback)((()=>{d(y),p(y),s&&m(s),n&&f(n)}),[d,y,p,s,n,m,f])}})),s.register("dkOnS",(function(t,n){e(t.exports,"useSwapSetBuyAsset",(function(){return u}));var o=s("29o0l"),r=s("iTQ0V"),i=s("2REEw"),a=s("j5sRo");function u(e){const t=(0,r.useSwapperStore)((e=>e.resetQuote)),n=(0,r.useSwapperStore)((e=>e.setBuyFungible)),s=(0,r.useSwapperStore)((e=>e.buyFungible));return(0,o.useCallback)((o=>{if(s&&(0,i.areFungiblesEqual)(o,s))return;const r=(0,a.getAnalyticsAsset)(o);e.capture("swapperUpdateToAsset",{asset:r}),n(o),t()}),[e,s,t,n])}})),s.register("j5sRo",(function(t,n){e(t.exports,"getAnalyticsAsset",(function(){return i}));var o=s("iOvk1"),r=s("5slFC");function i(e){return{chain:o.Chain.Solana,type:"fungible",address:e.type===r.FungibleTokenType.SPL?e.data.mintAddress:void 0,symbol:e.data.symbol}}})),s.register("cfA1B",(function(t,n){e(t.exports,"useSwapSetSellAsset",(function(){return u}));var o=s("29o0l"),r=s("iTQ0V"),i=s("2REEw"),a=s("j5sRo");function u(e){const t=(0,r.useSwapperStore)((e=>e.buyFungible)),n=(0,r.useSwapperStore)((e=>e.sellFungible)),s=(0,r.useSwapperStore)((e=>e.setBuyFungible)),u=(0,r.useSwapperStore)((e=>e.setSellFungible)),c=(0,r.useSwapperStore)((e=>e.resetQuote)),l=null==n?void 0:n.data.amount;return(0,o.useCallback)((o=>{if(n&&(0,i.areFungiblesEqual)(o,n))return;const r=(0,a.getAnalyticsAsset)(o);e.capture("swapperUpdateFromAsset",{asset:r}),u(o),t&&n&&(0,i.areFungiblesEqual)(o,t)&&s(n),o&&(null==n?void 0:n.data.chain.id)!==o.data.chain.id&&(c(),s(void 0)),o&&o.data.amount!==l&&u(o)}),[e,u,t,n,l,s,c])}})),s.register("9gwVO",(function(t,n){e(t.exports,"useSwapCardProps",(function(){return f}));var o=s("iOvk1"),r=s("4xLuU"),i=s("8BJCs"),a=s("3FT47"),u=s("fx45f"),c=s("aRVCJ"),l=s("2hSLz"),d=s("fQWxX"),p=s("lfgtT"),m=s("2Upmy");function f({transactionHooks:e,priceHooks:t,accountHooks:n}){var s,f;const{bestBuyAmount:g,currentQuote:h,hasNoRoutes:y,multichainQuoteResponse:S,quotes:v,isFetchingQuote:w}=(0,m.useQuote)(),b=(0,l.useExchangeRate)(g,S,h),A=(0,r.usePriceImpact)((0,u.getSwapPriceImpact)(h)),k=(0,i.useSlippage)(null==S?void 0:S.simulationTolerance),T=(0,p.useProvider)((0,c.getSwapQuoteSources)(h)),E=(0,a.getSwapExecutionDuration)(h),F=(null===(s=null==S?void 0:S.sellToken)||void 0===s?void 0:s.chainId)?o.Chains.getChainName(S.sellToken.chainId):void 0,x=(null===(f=null==S?void 0:S.buyToken)||void 0===f?void 0:f.chainId)?o.Chains.getChainName(S.buyToken.chainId):void 0;return{exchangeRate:b,hasNoRoutes:y,priceImpact:A,slippage:k,provider:T,fees:(0,d.useFees)({transactionHooks:e,priceHooks:t,accountHooks:n}),nrOfQuotes:v.length,executionDuration:E,isFetchingQuote:w,sellNetwork:F,buyNetwork:x}}})),s.register("3FT47",(function(t,n){e(t.exports,"getSwapExecutionDuration",(function(){return r}));var o=s("iHaNO");const r=e=>e&&(0,o.isBridgeQuote)(e)?e.executionDuration:0})),s.register("fx45f",(function(t,n){e(t.exports,"getSwapPriceImpact",(function(){return r}));var o=s("iHaNO");const r=e=>e?(0,o.isBridgeQuote)(e)?void 0:e.priceImpact:0})),s.register("aRVCJ",(function(t,n){e(t.exports,"getSwapQuoteSources",(function(){return i}));var o=s("5gM9U"),r=s("iHaNO");const i=e=>{var t;return e?(0,r.isBridgeQuote)(e)?(0,o.getBridgeTools)(e):null!==(t=null==e?void 0:e.sources)&&void 0!==t?t:[]:[]}})),s.register("5gM9U",(function(t,n){e(t.exports,"getBridgeTools",(function(){return o}));const o=e=>e.steps.map((e=>e.tool))})),s.register("2hSLz",(function(n,o){e(n.exports,"useExchangeRate",(function(){return d}));var r=s("kAKNF"),i=s("29o0l"),a=s("Nt4tV"),u=s("iTQ0V"),c=s("4TvVB");const l=t(r)(1);function d(e,n,o){const[s,d]=(0,i.useState)(!1),p=(0,i.useCallback)((()=>d(!s)),[s]),m=(0,u.useSwapperStore)((e=>e.sellFungible)),f=(0,u.useSwapperStore)((e=>e.buyFungible));return(0,i.useMemo)((()=>{let i=!1,u="";if(n&&o){const n=null==f?void 0:f.data,d=null==m?void 0:m.data;if(n&&d){const{buyAmount:p,sellAmount:m}=o,f=(0,a.amountToUiAmount)(p,n.decimals),g=(0,a.amountToUiAmount)(m,d.decimals),h=f.dividedBy(g),y=`1 ${d.symbol} ≈ ${(0,c.formatTokenAmountGreaterThan1)(h)} ${n.symbol}`,S=`1 ${n.symbol} ≈ ${(0,c.formatTokenAmountGreaterThan1)(l.dividedBy(h))} ${d.symbol}`;i=new(t(r))(o.buyAmount).isEqualTo(e),u=s?S:y}}return{isBestRate:i,rate:u,flip:p}}),[e,o,s,n,m,f,p])}})),s.register("4TvVB",(function(n,o){e(n.exports,"formatTokenAmountGreaterThan1",(function(){return u})),e(n.exports,"amountToFormattedAmountGreaterThan1",(function(){return c}));var r=s("kAKNF"),i=s("Nt4tV");const a=e=>e.isGreaterThanOrEqualTo(1)?"0,0.[00]":"0,0.[00000]",u=e=>{const n=t(r)(e);return(0,i.formatTokenAmount)(e,a(n))},c=(e,n)=>{const o=new(t(r))(e).div(new(t(r))(10).pow(n));return(0,i.formatTokenAmount)(o,a(o))}})),s.register("fQWxX",(function(n,o){e(n.exports,"useFees",(function(){return h}));var r=s("iOvk1"),i=s("5slFC"),a=s("kAKNF"),u=s("29o0l"),c=s("iTQ0V"),l=s("aUSVN"),d=s("lB74b"),p=s("iHaNO"),m=s("f4EDE"),f=s("997BK"),g=s("2Upmy");const h=({transactionHooks:e,priceHooks:n,accountHooks:o})=>{var s,h;const{currentQuote:y}=(0,g.useQuote)(),S=(0,f.useInitialSellFungible)({accountHooks:o}),v=null!==(s=(0,c.useSwapperStore)((e=>e.sellFungible)))&&void 0!==s?s:S,w=(0,c.useSwapperStore)((e=>e.gasEstimation)),b=(0,c.useSwapperStore)((e=>e.isFetchingGasEstimation)),A=(0,c.useSwapperStore)((e=>e.maxGasEstimation)),k=null!==(h=null==v?void 0:v.data.chain.id)&&void 0!==h?h:r.NetworkIDs.Solana.Mainnet,{data:T={}}=n.usePrices({queries:[{type:"id",data:[i.SOLANA_TOKEN_VALUES.coingeckoId,i.ETHER_TOKEN_VALUES.coingeckoId,i.MATIC_TOKEN_VALUES.coingeckoId]}]}),{data:E,isFetching:F}=e.useGasEstimationPrice(k,(0,m.aggregateGasEstimation)(w)),{data:x}=e.useGasEstimationPrice(k,(0,m.aggregateGasEstimation)(A)),I=b||F,P=(0,u.useMemo)((()=>{var e,n,o,r,s;if((0,p.isBridgeQuote)(y)){const o=y.steps.flatMap((e=>e.feeCosts)).find((e=>"phantom"===e.name));return{amount:new(t(a))(null!==(e=null==o?void 0:o.amount)&&void 0!==e?e:0),uiAmount:"",pct:parseFloat(null!==(n=null==o?void 0:o.percentage)&&void 0!==n?n:"0")}}const i=(null!==(o=null==y?void 0:y.fees)&&void 0!==o?o:[]).find((e=>"phantom"===e.type));return{amount:new(t(a))(null!==(r=null==i?void 0:i.amount)&&void 0!==r?r:0),uiAmount:"",pct:null!==(s=null==i?void 0:i.percentage)&&void 0!==s?s:0}}),[y]),C=(0,u.useMemo)((()=>{var e,n,o;if((0,p.isBridgeQuote)(y))return{amount:new(t(a))(0),uiAmount:"",pct:0};const r=(null!==(e=null==y?void 0:y.fees)&&void 0!==e?e:[]).find((e=>"Token account deposits"===e.name));return{amount:new(t(a))(null!==(n=null==r?void 0:r.amount)&&void 0!==n?n:0),uiAmount:(null==r?void 0:r.amount)?(0,l.formatFee)(k,new(t(a))(r.amount),T):"",pct:null!==(o=null==r?void 0:r.percentage)&&void 0!==o?o:0}}),[y,k,T]),N=(0,u.useMemo)((()=>{if(!y||!(0,p.isBridgeQuote)(y))return{amount:new(t(a))(0),uiAmount:"",pct:0};const e=(0,d.getBridgeStepsFees)(y);return{amount:e,uiAmount:(0,l.formatFee)(k,e,T),pct:0}}),[k,y,T]),M=(0,u.useMemo)((()=>{var e,n,o,s;return Object.assign(Object.assign({amount:null!==(e=y&&(null==E?void 0:E.gasEstimationAmount))&&void 0!==e?e:new(t(a))(0),uiAmount:null!==(n=y&&(null==E?void 0:E.gasEstimationPriceUSD))&&void 0!==n?n:""},r.Chains.isEVMNetworkID(k)?{maxAmount:null!==(o=y&&(null==x?void 0:x.gasEstimationAmount))&&void 0!==o?o:new(t(a))(0),maxUiAmount:null!==(s=y&&(null==x?void 0:x.gasEstimationPriceUSD))&&void 0!==s?s:""}:{}),{pct:0})}),[y,null==E?void 0:E.gasEstimationAmount,null==E?void 0:E.gasEstimationPriceUSD,null==x?void 0:x.gasEstimationAmount,null==x?void 0:x.gasEstimationPriceUSD,k]),U=(0,u.useMemo)((()=>{var e;const t=C.amount.plus(M.amount).plus(N.amount),n=r.Chains.isEVMNetworkID(k)?C.amount.plus(null!==(e=M.maxAmount)&&void 0!==e?e:0).plus(N.amount):void 0;return Object.assign({amount:t,uiAmount:(0,l.formatFee)(k,t,T),pct:0},r.Chains.isEVMNetworkID(k)&&n?{maxAmount:n,maxUiAmount:(0,l.formatFee)(k,n,T)}:{})}),[C.amount,M.amount,M.maxAmount,N.amount,k,T]);return(0,u.useMemo)((()=>({phantomFee:P,networkFee:M,tokenAccountFee:C,totalFees:U,nonIncludedFees:N,isFetchingFees:I})),[P,M,C,U,N,I])}})),s.register("aUSVN",(function(n,o){e(n.exports,"formatFee",(function(){return c}));var r=s("5slFC"),i=s("kAKNF"),a=s("Nt4tV"),u=s("4TvVB");function c(e,n,o){if(n.lte(0))return"";const{coingeckoId:s,decimals:c,symbol:l}=r.NATIVE_TOKEN_MAP[e];if(!s||!c||!l)return"";const d=n.div(new(t(i))(10).pow(c)),p=o[s];if(!(null==p?void 0:p.usd))return`${(0,u.formatTokenAmountGreaterThan1)(d.toString())} ${l}`;const m=d.times(p.usd).toNumber(),f=(0,a.formatDollarAmount)(m,{minimumAmount:1e-6,decimalFormatSmallNumbers:"0.[00000]"});return"$NaN"!==f?f:""}})),s.register("lB74b",(function(n,o){e(n.exports,"getBridgeStepsFees",(function(){return i}));var r=s("kAKNF");const i=e=>e.steps.reduce(((e,n)=>e.plus(new(t(r))(n.nonIncludedNonGasFees))),new(t(r))(0))})),s.register("f4EDE",(function(n,o){e(n.exports,"aggregateGasEstimation",(function(){return u}));var r=s("iOvk1"),i=s("7gANb"),a=s("kAKNF");const u=e=>{if(e&&0!==e.length)return(0,i.isEthereumGasEstimation)(e[0])?e.reduce(((e,t)=>Object.assign(Object.assign({},e),{gasLimit:e.gasLimit.plus(t.gasLimit)})),{networkID:r.Chains.ethereum.mainnetID,gasLimit:new(t(a))(0),maxFeePerGas:e[0].maxFeePerGas,maxPriorityFeePerGas:e[0].maxPriorityFeePerGas}):(0,i.isSolanaGasEstimation)(e[0])?e.reduce(((e,t)=>Object.assign(Object.assign({},e),{value:e.value+t.value})),{networkID:r.Chains.solana.mainnetID,value:0}):void 0}})),s.register("lfgtT",(function(t,n){e(t.exports,"useProvider",(function(){return i}));var o=s("29o0l"),r=s("aglkA");function i(e){return(0,o.useMemo)((()=>(0,r.parseSwapSources)(e)),[e])}})),s.register("8vAsr",(function(t,n){e(t.exports,"useSwapConfirmationProps",(function(){return O}),(function(e){return O=e}));var o=s("h0VH5"),r=s("iOvk1"),i=s("43063"),a=s("7mQ3Y"),u=s("5uSEV"),c=s("29o0l"),l=s("Nt4tV"),d=s("2UOPE"),p=s("3pIvT"),m=s("l7Y64"),f=s("a6NKv"),g=s("iTQ0V");s("f2tU6");var h=s("huZwj");s("d0HjU");var y=s("60dsO"),S=s("3FT47"),v=s("fx45f"),w=s("aRVCJ"),b=s("eJ1ND"),A=s("4MdgS"),k=s("kRcwf"),T=s("fQWxX"),E=s("997BK"),F=s("lfgtT"),x=s("2Upmy"),I=s("jVgYF"),P=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{u(o.next(e))}catch(e){s(e)}}function a(e){try{u(o.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const C=new Error("Scan results are not valid"),N=e=>e.resourceType===r.Caip19ResourceType.address?r.Chains.isEVMNetworkID(e.chainId)?e.address.toLowerCase():e.address:e.slip44,M=(e,t)=>t.find((t=>t.data.tokenAddress===N(e))),U=({sellFungible:e,buyFungible:t,sellAmount:n,buyAmount:o,provider:r,isBridge:s,t:i})=>{var a,u;const c=e.data.symbol,d=t.data.symbol,p=(0,l.amountToUiAmount)(null!=n?n:0,null!==(a=e.data.decimals)&&void 0!==a?a:0),m=(0,l.amountToUiAmount)(null!=o?o:0,null!==(u=t.data.decimals)&&void 0!==u?u:0);return{topLeft:{label:`${i(s?"transactionsPendingBridging":"transactionsPendingSwapping")} on ${r}`},topRight:{label:`${m} ${d}`,color:"#21E56F"},bottomLeft:{label:`${c} ${String.fromCharCode(8594)} ${d}`},bottomRight:{label:`${p} ${c}`}}};function O({accountSigner:e,storage:t,fungibleHooks:n,priceHooks:s,settingsHooks:O,transactionHooks:R,accountHooks:L,analytics:_,asyncSwapAnalytics:D,isLedger:B,onError:H,priorityFeeService:Q,isSwapSimulationDisabled:V}){var j,G,z,K,q,$,W,J;const{t:Y}=(0,i.useTranslation)(),X=(0,E.useInitialSellFungible)({accountHooks:L}),Z=d.CHAIN_TO_USDC_FUNGIBLE.get(X.data.chain.id),{currentQuote:ee,multichainQuoteResponse:te}=(0,x.useQuote)(),ne=null!==(j=(0,g.useSwapperStore)((e=>e.buyFungible)))&&void 0!==j?j:Z,oe=null!==(G=(0,g.useSwapperStore)((e=>e.sellFungible)))&&void 0!==G?G:X,re=(0,g.useSwapperStore)((e=>e.buyUsdValue)),se=(0,g.useSwapperStore)((e=>e.sellUsdValue)),ie=(0,g.useSwapperStore)((e=>e.setSellFungible)),ae=(0,g.useSwapperStore)((e=>e.resetSwapper)),ue=(0,g.useSwapperStore)((e=>e.maxGasEstimation)),{connection:ce}=L.useSelectedSolanaConnection(),{buyAmount:le,sellAmount:de}=null!=ee?ee:{buyAmount:"0",sellAmount:"0"},pe=(0,l.amountToUiAmount)(le,ne.data.decimals).toNumber(),me=(0,l.amountToUiAmount)(de,oe.data.decimals).toNumber(),fe=(0,S.getSwapExecutionDuration)(ee),ge=(0,y.formatSecondsAsSwapTime)(fe,Y),[he]=(0,c.useState)(ge),ye=(0,F.useProvider)((0,w.getSwapQuoteSources)(ee)),Se=(0,T.useFees)({transactionHooks:R,priceHooks:s,accountHooks:L}),ve=(0,k.useAnalyticsPayload)({buyToken:ne,sellToken:oe,buyAmount:null!==(z=null==ee?void 0:ee.buyAmount.toString())&&void 0!==z?z:"",sellAmount:null!==(K=null==ee?void 0:ee.sellAmount.toString())&&void 0!==K?K:"",phantomFeeUiAmount:Se.phantomFee.uiAmount,priceImpact:(0,v.getSwapPriceImpact)(ee),provider:ye,buyAssetUsdValue:re,sellAssetUsdValue:se}),we=null!==(q=null==oe?void 0:oe.data.chain.id)&&void 0!==q?q:r.NetworkIDs.Solana.Mainnet,{data:be}=L.useSelectedMultiChainAccount(),Ae=(0,c.useMemo)((()=>{var e;return null!==(e=null==be?void 0:be.addresses)&&void 0!==e?e:[]}),[be]),ke=(0,c.useMemo)((()=>{var e,t;return null!==(t=null===(e=Ae.find((e=>e.networkID===(null==oe?void 0:oe.data.chain.id))))||void 0===e?void 0:e.address)&&void 0!==t?t:""}),[Ae,oe]),{data:Te,isSuccess:Ee}=(0,f.useSwapTransactions)({accountHooks:L,callerAddress:ke,priorityFeeService:Q,quote:ee,sellFungible:oe}),Fe=(0,I.useSwapScanTransaction)({accountHooks:L,swapTransactions:Te}),xe=(0,c.useMemo)((()=>V?{isValid:!0,isLoading:!1}:Fe),[V,Fe]),Ie=(null==Te?void 0:Te.transactions.length)||0,[Pe,Ce]=(0,c.useState)(),Ne=(0,c.useMemo)((()=>{var e;return null!==(e=null==Pe?void 0:Pe.id)&&void 0!==e?e:""}),[Pe]),{data:Me}=O.usePreferredExplorers(),Ue=(0,c.useMemo)((()=>{if(!Ne)return;const e=null==Me?void 0:Me.explorers[we];return(0,u.generateExplorerUrl)({networkID:we,endpoint:"transaction",explorerType:e,param:Ne})}),[Ne,we,Me]),[Oe,Re]=(0,c.useState)(!1),[Le,_e]=(0,c.useState)("loading"),De="success"===Le,Be="failure"===Le,He=!!Pe,[Qe,Ve]=(0,c.useState)(void 0),{notEnoughSol:je,txErrorMessage:Ge}=(0,p.useSwapError)(Qe),{mutateAsync:ze}=(0,m.useMultichainSwapFungibles)({accountSigner:e,storage:t,accountIdentifier:null!==($=null==be?void 0:be.identifier)&&void 0!==$?$:"",networkID:we}),Ke=(0,c.useCallback)((e=>P(this,void 0,void 0,(function*(){_.capture("swapperSwapSuccess",ve);const t=(0,o.chainFromNetworkID)(e.networkID);t.chainType!==a.AddressType.EVM&&t.chainType!==a.AddressType.Solana||D.then((n=>n.transactionStatus(e.id,Object.assign(Object.assign({},t),{status:{type:"confirmed"}})))),ae(),(0,A.updateSellFungibleAmount)({sellAmount:null==ee?void 0:ee.sellAmount.toString(),sellFungible:oe,setSellFungible:ie}),n.invalidateTokens(Ae)}))),[Ae,_,ve,ee,n,ae,oe,ie,D]),{isSuccess:qe,isError:$e}=R.useWaitForTransactionConfirmation(Ke,Pe);(0,c.useEffect)((()=>{const e=(null==Pe?void 0:Pe.networkID)?(0,o.chainFromNetworkID)(Pe.networkID):null;qe?_e("success"):$e&&(_e("failure"),(null==e?void 0:e.chainType)!==a.AddressType.EVM&&(null==e?void 0:e.chainType)!==a.AddressType.Solana||!(null==Pe?void 0:Pe.id)||D.then((t=>t.transactionStatus(Pe.id,Object.assign(Object.assign({},e),{status:{type:"error"}})))))}),[qe,$e,D,Pe]);const We=null!==(J=null===(W=null==Te?void 0:Te.transactionPairs)||void 0===W?void 0:W.flatMap((e=>[N(e.sellToken),N(e.buyToken)])))&&void 0!==J?J:[],Je=[...new Set(We)],{fungibles:Ye}=n.useFungibles({keys:Je}),Xe=(0,c.useMemo)((()=>{const e={pendingSwapActivityRows:[],pendingApprovalActivityRows:[]};return Te?"evm"===Te.type?Te.transactionTypes.reduce(((e,t,n)=>{var o,r;let s,i=oe,a=ne;const u=Te.transactionPairs;if(u&&u[n]){const e=u[n];i=null!==(o=M(e.sellToken,Ye))&&void 0!==o?o:oe,a=null!==(r=M(e.buyToken,Ye))&&void 0!==r?r:ne,s=e.approvalMetadata}if(t.includes("approval")){const t=i.data.symbol;e.pendingApprovalActivityRows.push({topLeft:s?{label:`${Y("transactionsPendingApproving")} ${s.symbol}`}:{label:`${Y("transactionsPendingApproving")} ${t}`}})}else e.pendingSwapActivityRows.push(U({sellFungible:i,buyFungible:a,sellAmount:null==ee?void 0:ee.sellAmount,buyAmount:null==ee?void 0:ee.buyAmount,provider:ye,isBridge:t.includes("bridge"),t:Y}));return e}),e):Te.transactionTypes.reduce(((e,t,n)=>{var o,r;let s=oe,i=ne;const a=Te.transactionPairs;if(a&&a[n]){const e=a[n];s=null!==(o=M(e.sellToken,Ye))&&void 0!==o?o:oe,i=null!==(r=M(e.buyToken,Ye))&&void 0!==r?r:ne}return e.pendingSwapActivityRows.push(U({sellFungible:s,buyFungible:i,sellAmount:null==ee?void 0:ee.sellAmount,buyAmount:null==ee?void 0:ee.buyAmount,provider:ye,isBridge:t.includes("bridge"),t:Y})),e}),e):e}),[Te,oe,ne,Ye,Y,null==ee?void 0:ee.sellAmount,null==ee?void 0:ee.buyAmount,ye]),Ze=(0,c.useCallback)((()=>P(this,void 0,void 0,(function*(){if(Re(!0),_e("loading"),Ce(void 0),Ve(void 0),!ee)throw new Error("Trying to execute swap with no current quote");if(!te)throw new Error("Trying to execute swap with no multichain quote response");if(!ue||0===(null==ue?void 0:ue.length))throw new Error("No gas estimation available");if(!Te)throw new Error("No swap transactions available");try{if(!xe.isValid)throw C;const e=yield ze({type:r.Chains._DO_NOT_USE_getAddressType(we),callerAddress:ke,swapTransactions:Te,pendingSwapActivityRows:Xe.pendingSwapActivityRows,pendingApprovalActivityRows:Xe.pendingApprovalActivityRows,gasEstimation:ue,connection:ce}),t=(0,o.chainFromNetworkID)(we);t.chainType===a.AddressType.Solana?D.then((n=>n.submittedTransaction(e.id,Object.assign(Object.assign({},t),{method:"signAndSendTransaction"})))):t.chainType===a.AddressType.EVM&&D.then((n=>n.submittedTransaction(e.id,Object.assign(Object.assign({},t),{method:"eth_sendRawTransaction"})))),Ce(e)}catch(e){const t=(0,h.parseSwapError)(e);_e("failure"),Ve(t),H&&e.message!==C.message&&H(t),_.capture("swapperSwapFailure",{data:Object.assign(Object.assign({},ve.data),{error:t.message})})}}))),[ee,te,ue,Te,xe.isValid,ze,we,ke,Xe.pendingSwapActivityRows,Xe.pendingApprovalActivityRows,ce,D,H,_,ve]),et=(0,c.useMemo)((()=>Oe||!xe.isLoading&&Ee),[Oe,xe,Ee]);return{sellAsset:{amount:me,symbol:oe.data.symbol,networkID:oe.data.chain.id},buyAsset:{amount:pe,symbol:ne.data.symbol,networkID:ne.data.chain.id},estimatedTime:he,isBridge:(0,b.isBridgeSwap)(oe.data.chain.id,ne.data.chain.id),isSuccess:De,isFailure:Be,isLedger:B,isClosable:He,notEnoughSol:je,txError:Qe,txErrorMessage:Ge,txLink:null!=Ue?Ue:"",executeSwap:Ze,resetSwapper:ae,numberOfTransactions:Ie,isReadyToExecute:et,addressType:r.Chains._DO_NOT_USE_getAddressType(we)}}})),s.register("4MdgS",(function(t,n){function o({sellAmount:e,sellFungible:t,setSellFungible:n}){if(t&&e){const o=Object.assign({},t);o.data.amount=String(Number(t.data.amount)-Number(e)),n(o)}}e(t.exports,"updateSellFungibleAmount",(function(){return o}))})),s.register("kRcwf",(function(t,n){e(t.exports,"useAnalyticsPayload",(function(){return i}));var o=s("29o0l"),r=s("igrkF");function i({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:n,sellToken:s,buyAmount:i,sellAmount:a,phantomFeeUiAmount:u,priceImpact:c,provider:l}){return(0,o.useMemo)((()=>{const o=(0,r.legacyAnalyticsPayload)({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:n,sellToken:s,buyAmount:i,sellAmount:a,phantomFeeUiAmount:u,priceImpact:c,provider:l});return o?{data:o}:{}}),[e,n,i,t,u,c,l,a,s])}})),s.register("jVgYF",(function(t,n){e(t.exports,"useSwapScanTransaction",(function(){return d}));var o=s("iOvk1"),r=s("7gANb"),i=s("29o0l"),a=s("iTQ0V"),u=s("5LE7h"),c=s("997BK"),l=s("2Upmy");const d=({accountHooks:e,swapTransactions:t})=>{var n,s,d;const p=(0,c.useInitialSellFungible)({accountHooks:e}),m=null!==(n=(0,a.useSwapperStore)((e=>e.sellFungible)))&&void 0!==n?n:p,f=null!==(s=null==m?void 0:m.data.chain.id)&&void 0!==s?s:o.NetworkIDs.Solana.Mainnet,{data:g}=e.useSelectedChainAddress({address:m.data.walletAddress,networkID:m.data.chain.id}),h=null!==(d=null==g?void 0:g.address)&&void 0!==d?d:"",{currentQuote:y,multichainQuoteResponse:S}=(0,l.useQuote)();let v=null;"evm"===(null==t?void 0:t.type)&&o.Chains.isEVMNetworkID(f)&&(v={networkID:f,origin:"https://phantom.app",userAccount:h,transactions:t.transactions}),"solana"===(null==t?void 0:t.type)&&o.Chains.isSolanaNetworkID(f)&&(v={networkID:f,origin:"https://phantom.app",userAccount:h,transactions:t.transactions});const w=r.simulations.useScanTransaction({label:"useSwapScanTransaction",params:v});return(0,i.useMemo)((()=>{var e,t;return{isValid:(0,u.validateScanResult)({simulationResults:null===(t=null===(e=w.data)||void 0===e?void 0:e.evaluation)||void 0===t?void 0:t.simulationResults,scanResultError:w.isError,quote:y,sellToken:null==S?void 0:S.sellToken,buyToken:null==S?void 0:S.buyToken,simulationTolerance:null==S?void 0:S.simulationTolerance}),isLoading:w.isLoading}}),[w,y,S])}})),s.register("5LE7h",(function(n,o){e(n.exports,"validateScanResult",(function(){return m}));var r=s("iOvk1"),i=s("csW2r"),a=s("7gANb"),u=s("kAKNF"),c=s("lB74b"),l=s("iHaNO");const d="swap-validation",p=e=>t=>t.rawInfo.data.contract.address===(e=>{var t;if(e.resourceType===r.Caip19ResourceType.nativeToken){if(["60","966"].includes(e.slip44))return"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"}else if(e.resourceType===r.Caip19ResourceType.address)return null!==(t=e.address)&&void 0!==t?t:"";return""})(e),m=({simulationResults:e,scanResultError:n,quote:o,sellToken:s,buyToken:m,simulationTolerance:f=.01})=>{var g,h;if(n)return!0;if(!(o&&e&&s&&m&&f))return i.telemetry.addBreadcrumb(d,`Missing necessary args: ${JSON.stringify({quote:!!o,simulationResults:!!e,sellToken:s,buyToken:m,simulationTolerance:f})}`,i.Severity.Info),!1;if(["SIMULATION_FAILED"].includes(null!==(h=null===(g=e.error)||void 0===g?void 0:g.kind)&&void 0!==h?h:""))return!0;if(e.error)return i.telemetry.addBreadcrumb(d,`Simulation has error: ${JSON.stringify({sellToken:s,buyToken:m,error:e.error})}`,i.Severity.Info),!1;let y,S;if("isRecentBlockhashExpired"in e)return!0;{const n=e.expectedStateChanges.filter((e=>[a.simulations.StateChangeKind.Erc20Transfer,a.simulations.StateChangeKind.NativeAssetTransfer].includes(e.rawInfo.kind)));y=n.filter(p(m)).reduce(((e,n)=>{const{before:o,after:r}=n.rawInfo.data.amount,s=new(t(u))(o),i=new(t(u))(r);return e.plus(i.minus(s))}),new(t(u))(0)),S=n.filter(p(s)).reduce(((e,n)=>{const{before:o,after:r}=n.rawInfo.data.amount,s=new(t(u))(o),i=new(t(u))(r);return e.plus(s.minus(i))}),new(t(u))(0))}const v=s.resourceType===r.Caip19ResourceType.nativeToken,w=new(t(u))(o.buyAmount),b=new(t(u))(o.sellAmount),A=y.minus(w).dividedBy(w).absoluteValue();let k=S.minus(b);if(v&&(0,l.isBridgeQuote)(o)){const e=(0,c.getBridgeStepsFees)(o);k=k.minus(e)}k=k.dividedBy(b).absoluteValue();const T=((0,l.isBridgeQuote)(o)||A.lt(f))&&k.lt(f);return T||i.telemetry.addBreadcrumb(d,`Diff is larger than simulationTolerance: ${JSON.stringify({sellToken:s,buyToken:m,buyDiff:A.toString(),sellDiff:k.toString(),simulationTolerance:f})}`,i.Severity.Info),T}})),s.register("ipDsT",(function(n,o){e(n.exports,"useSwapProvidersProps",(function(){return h}));var r=s("iOvk1"),i=s("5slFC"),a=s("43063"),u=s("kAKNF"),c=s("29o0l"),l=s("iTQ0V"),d=s("lPpwS"),p=s("f4EDE"),m=s("2Upmy"),f=s("6aawr");const g=(e,t)=>{let n="";return e.resourceType===r.Caip19ResourceType.nativeToken?n=(0,i.networkIdToNativeTokenFungibleKey)(e.chainId):e.address&&(n=e.address),t.find((e=>e.data.key.toLowerCase()===n.toLowerCase()))};function h({enableBridgePairs:e,enableNextJupiterClient:n,enableNativeBridgePairs:o,accountHooks:r,fungibleHooks:s,transactionHooks:h,priceHooks:y,getApiEnvironment:S,analytics:v}){const{t:w}=(0,a.useTranslation)(),{bestBuyAmount:b,multichainQuoteResponse:A,isFetchingQuote:k,quotes:T,selectedProviderIndex:E}=(0,m.useQuote)(),F=(0,l.useSwapperStore)((e=>e.setSelectedProviderIndex)),x=(0,l.useSwapperStore)((e=>e.maxGasEstimation)),I=(0,l.useSwapperStore)((e=>e.sellFungible)),{assets:P,isFetching:C}=(0,f.useSwapBuyAssetList)({enableBridgePairs:e,enableNextJupiterClient:n,enableNativeBridgePairs:o,fungibleHooks:s,accountHooks:r,getApiEnvironment:S}),N=null==I?void 0:I.data.chain.id,{data:M}=h.useGasEstimationPrice(N,(0,p.aggregateGasEstimation)(x)),{data:U}=y.usePrices({queries:[{type:"id",data:[i.SOLANA_TOKEN_VALUES.coingeckoId,i.ETHER_TOKEN_VALUES.coingeckoId,i.MATIC_TOKEN_VALUES.coingeckoId]}]}),O="xchain"===(null==A?void 0:A.type),R=(0,c.useMemo)((()=>{var e;if(!A||0===P.length)return[];const{buyToken:n}=A,o=g(n,P);return o?O?(0,d.parseBridgeProviders)({quotes:T,buyTokenDecimals:o.data.decimals,buyTokenSymbol:o.data.symbol,networkIDForFees:N,networkFee:null!==(e=null==M?void 0:M.gasEstimationAmount)&&void 0!==e?e:new(t(u))(0),priceMap:U,t:w}):(0,d.parseSwapProviders)({quotes:T,bestBuyAmount:b,buyTokenDecimals:o.data.decimals,buyTokenSymbol:o.data.symbol,bestPriceLabel:w("swapFeesBestPrice")}):[]}),[A,P,T,b,w,N,M,U,O]),L=(0,c.useCallback)((e=>{const t=R[e];v.capture("swapperProviderSelected",{data:{provider:t.name}}),F(e)}),[F,R,v]);return{rows:R,selectedProviderIndex:E,isLoadingProviders:k||C||!1,setSelectedProviderIndex:L}}})),s.register("lPpwS",(function(n,o){e(n.exports,"parseSwapProviders",(function(){return y})),e(n.exports,"parseBridgeProviders",(function(){return S}));var r=s("RVqnc"),i=s("kAKNF"),a=s("aUSVN"),u=s("60dsO"),c=s("lB74b"),l=s("5gM9U"),d=s("4TvVB"),p=s("aglkA"),m=s("iHaNO");const f="FASTEST",g=["RECOMMENDED",f],h=e=>{if((0,m.isBridgeQuote)(e))return(0,p.parseSwapSources)((0,l.getBridgeTools)(e));const{sources:t}=e;return(0,p.parseSwapSources)(t)},y=({quotes:e,bestBuyAmount:n,buyTokenDecimals:o,buyTokenSymbol:r,bestPriceLabel:s})=>e.map((e=>{const{buyAmount:a}=e,u=new(t(i))(a),c=new(t(i))(u).minus(n),l=(0,d.amountToFormattedAmountGreaterThan1)(c,o);return{name:h(e),fee:c.isNaN()?"-":c.isZero()?s:`${l} ${r}`}})),S=({quotes:e,buyTokenDecimals:t,buyTokenSymbol:n,networkIDForFees:o,networkFee:s,priceMap:i,t:l})=>e.filter(m.isBridgeQuote).map((e=>{var p;const{buyAmount:m,executionDuration:y,steps:S,tags:v}=e,w=(0,c.getBridgeStepsFees)(e).plus(s),b=v.filter((e=>g.includes(e))).map((e=>({key:e,text:l(`swapProvidersTag${(0,r.capitalizeFirstLetter)(e)}`)}))),A=v.includes(f),k=S.find((e=>!!e.tool.logoURI));return{name:h(e),fee:o&&i?l("swapProvidersFee",{fee:(0,a.formatFee)(o,w,i)}):"",amount:`${(0,d.amountToFormattedAmountGreaterThan1)(m,t)} ${n}`,time:{text:(0,u.formatSecondsAsSwapTime)(y,l),isFast:A||y<=300},tags:b,logoURI:null!==(p=null==k?void 0:k.tool.logoURI)&&void 0!==p?p:""}}))})),s.register("5WhLj",(function(n,o){e(n.exports,"useSwapReviewButtonProps",(function(){return f}));var r=s("5slFC"),i=s("kAKNF"),a=s("29o0l"),u=s("Nt4tV"),c=s("iTQ0V"),l=s("hCIG6"),d=s("eJ1ND"),p=s("fQWxX"),m=s("2Upmy");function f({accountHooks:e,fungibleHooks:n,transactionHooks:o,priceHooks:s}){var f;const{currentQuote:g,isFetchingQuote:h}=(0,m.useQuote)(),y=(0,c.useSwapperStore)((e=>e.hasNoRoutes)),S=(0,c.useSwapperStore)((e=>e.sellFungible)),v=(0,c.useSwapperStore)((e=>e.sellAmount)),w=null==S?void 0:S.data.chain.id,b=(0,c.useSwapperStore)((e=>e.gasEstimation)),A=(0,c.useSwapperStore)((e=>e.maxGasEstimation)),k=(0,c.useSwapperStore)((e=>e.buyFungible)),T=null==k?void 0:k.data.chain.id,{fungible:E}=n.useFungible({key:w?(0,r.networkIdToNativeTokenFungibleKey)(w):void 0}),{fungible:F}=n.useFungible({key:T?(0,r.networkIdToNativeTokenFungibleKey)(T):void 0}),x=new(t(i))(null!==(f=null==F?void 0:F.data.amount)&&void 0!==f?f:0),I=(0,d.isBridgeSwap)(w,T),P=I&&x.isZero(),{totalFees:C}=(0,p.useFees)({transactionHooks:o,priceHooks:s,accountHooks:e}),N=S?(0,l.getMaxSellAmount)(S,C.amount,I):"0",M=!!(null==S?void 0:S.type)&&(0,r.isNative)(null==S?void 0:S.type),U=null==S?void 0:S.data.decimals,O=null==S?void 0:S.data.chain.id,R=(0,a.useMemo)((()=>{var e,n;return M?new(t(i))((0,u.uiAmountToAmount)(v,null!=U?U:0)).plus(null!==(e=C.maxAmount)&&void 0!==e?e:C.amount):null!==(n=C.maxAmount)&&void 0!==n?n:C.amount}),[M,v,U,C.amount,C.maxAmount]),L=E?(0,u.amountToFormattedAmount)(E.data.amount,E.data.decimals):"-",_=E?(0,u.amountToFormattedAmount)(R,E.data.decimals):"-",D=(0,a.useMemo)((()=>{var e;return new(t(i))(null!==(e=null==E?void 0:E.data.amount)&&void 0!==e?e:0).lt(R)}),[null==E?void 0:E.data.amount,R]),B=new(t(i))(v).isLessThanOrEqualTo(new(t(i))(N));return{canSwap:!!S&&!!g&&B&&!y&&!!((null!=b?b:[]).length>0&&(null!=A?A:[]).length>0)&&!h,hasEnoughAssets:B,hasNoRoutes:y,hasNoFundsForFees:D,hasLowDestinationNetworkBalance:P,sourceNativeToken:{networkId:O,balance:L,required:_}}}})),s.register("5Soz0",(function(n,o){e(n.exports,"useSwapReviewProps",(function(){return y}));var r=s("iOvk1"),i=s("5slFC"),a=s("kAKNF"),u=s("29o0l"),c=s("Nt4tV"),l=s("iTQ0V");s("d0HjU");var d=s("gCUUK"),p=s("lDJ5X"),m=s("4TvVB"),f=s("997BK"),g=s("2Upmy");const h={network:{id:r.Chains.solana.mainnetID,name:r.Chains.solana.name,symbol:r.Chains.solana.tokenSymbol,imageUrl:r.Chains.solana.iconUrl},tokenType:i.FungibleTokenType.SolanaNative,symbol:"",logoUri:"",tokenAddress:"",amount:"",amountUsd:""};function y({priceHooks:e,accountHooks:n,getApiEnvironment:o}){var r;const s=(0,l.useSwapperStore)((e=>e.buyFungible)),y=(0,f.useInitialSellFungible)({accountHooks:n}),S=null!==(r=(0,l.useSwapperStore)((e=>e.sellFungible)))&&void 0!==r?r:y,v=(0,l.useSwapperStore)((e=>e.sellAmount)),w=(0,l.useSwapperStore)((e=>e.setBuyUsdValue)),b=(0,l.useSwapperStore)((e=>e.setSellUsdValue)),A=(0,u.useMemo)((()=>{const e=[];return s&&S&&(e.push(s),e.push(S)),Object.assign({getApiEnvironment:o},(0,i.tokensToTokenPriceQueries)(e))}),[s,o,S]),{data:k}=e.usePrices(A),{currentQuote:T,multichainQuoteResponse:E}=(0,g.useQuote)();return(0,u.useMemo)((()=>{var e,n;if(!(E&&T&&s&&S))return{buyToken:h,sellToken:h};const o=null==s?void 0:s.data,r=null==S?void 0:S.data;if(!o||!r)return{buyToken:h,sellToken:h};let i="",u="",l="",f="";const{buyAmount:g}=T,y=(0,c.amountToUiAmount)(g,o.decimals),A=t(a)(v),F=String(y).split(".")[0].length,x=v.split(".")[0].length,I=null===(e=o.symbol)||void 0===e?void 0:e.length,P=null===(n=r.symbol)||void 0===n?void 0:n.length,C=F&&I?F+I:0,N=x&&P?x+P:0;l=`${(0,d.formatTokenAmountForReviewScreen)(A,N)} ${r.symbol}`,i=`${(0,d.formatTokenAmountForReviewScreen)(y,C)} ${o.symbol}`;const M=(0,p.extractUsdRate)(s,k),U=(0,p.extractUsdRate)(S,k);if(null==M?void 0:M.usd){const e=y.multipliedBy(M.usd);u=`$${(0,m.formatTokenAmountGreaterThan1)(e)}`,w(M.usd)}if(null==U?void 0:U.usd){const e=A.multipliedBy(U.usd);f=`$${(0,m.formatTokenAmountGreaterThan1)(e)}`,b(U.usd)}return{buyToken:{network:o.chain,tokenType:s.type,symbol:o.symbol,logoUri:o.logoUri,tokenAddress:o.tokenAddress,amount:i,amountUsd:u},sellToken:{network:r.chain,tokenType:S.type,symbol:r.symbol,logoUri:r.logoUri,tokenAddress:r.tokenAddress,amount:l,amountUsd:f}}}),[E,s,S,T,v,w,b,k])}})),s.register("02Lw2",(function(t,n){e(t.exports,"useSwapSellAssetProps",(function(){return b}));var o=s("29o0l"),r=s("9CoSy"),i=s("m2d5Y"),a=s("24hfq"),u=s("Nt4tV"),c=s("2UOPE"),l=s("j3ma1"),d=s("iTQ0V");s("d0HjU");var p=s("gCUUK"),m=s("hCIG6"),f=s("eJ1ND"),g=s("fQWxX"),h=s("2nOi3"),y=s("997BK"),S=s("k03LJ"),v=s("5KI92");const w=500;function b({transactionHooks:e,priceHooks:t,accountHooks:n,fungibleHooks:s,getApiEnvironment:b,queryClient:A,isBalanceHidden:k,enableBridgePairs:T,enableNextJupiterClient:E,enableNativeBridgePairs:F}){var x;const I=(0,y.useInitialSellFungible)({accountHooks:n}),P=null!==(x=(0,d.useSwapperStore)((e=>e.sellFungible)))&&void 0!==x?x:I,C=(0,d.useSwapperStore)((e=>e.buyFungible)),N=(0,d.useSwapperStore)((e=>e.sellAmount)),M=(0,d.useSwapperStore)((e=>e.uiSellAmount)),U=(0,d.useSwapperStore)((e=>e.setSellAmount)),O=(0,d.useSwapperStore)((e=>e.setSellFungible)),R=(0,d.useSwapperStore)((e=>e.setUiSellAmount)),L=(0,v.useSwapAssetCaip19)(P),_=null==P?void 0:P.data.key,{fungible:D}=s.useFungible({key:_}),B=(0,S.useSupportedNetworkIDs)({accountHooks:n}),H=null==P?void 0:P.data.chain.id,Q=null==C?void 0:C.data.chain.id,[V,j]=i.useDebouncedChangeHandler(N,U,w),{totalFees:G}=(0,g.useFees)({transactionHooks:e,priceHooks:t,accountHooks:n}),z=(0,f.isBridgeSwap)(H,Q),K=null==P?void 0:P.data.amount,q=P?P.data.decimals:0,$=(0,o.useMemo)((()=>(0,m.getMaxSellAmount)(P,G.amount,z)),[P,G,z]),W=new(0,a.BigNumber)(null!=N?N:0).isGreaterThan(new(0,a.BigNumber)($)),J=P&&P.data.symbol?P.data.symbol:"",Y=N.split(".")[0].length,X=J.length,Z=Y&&X?Y+X:0,ee=k?`${c.BALANCE_HIDDEN_TEXT}`:`${(0,p.formatTokenAmountForReviewScreen)((0,u.amountToUiAmount)(K,q),Z)}`,te=(0,o.useCallback)((e=>{const t=(0,u.formatTokenAmountInputs)(e.substring(0,r.MOBILE_SWAP_INPUT_MAX_LENGTH)),n=(0,u.formatTokenAmountToMaxDecimals)(t,q);R(n),j(n)}),[q,j,R]),ne=(0,o.useCallback)((()=>{te($)}),[$,te]);(0,o.useEffect)((()=>{D&&D.data.amount!==K&&O(D)}),[D,K,O]),(0,o.useEffect)((()=>{N&&(0,l.prefetchSwapPairs)({sellToken:L,supportedNetworkIDs:B,enableBridgePairs:T,enableNextJupiterClient:E,enableNativeBridgePairs:F,getApiEnvironment:b,queryClient:A})}),[L,B,T,E,F,b,A,N]);const oe=(0,h.useHasSwapMinimumSellAmount)(t);return{assetButtonTitle:J,decimals:q,formattedMaxSellAmount:ee,sellFungible:P,notEnoughAssets:W,uiSellAmount:M,hasMinimumSellAmount:oe,setMaxSellAmount:ne,updateSellAmount:te}}Object.keys(i)})),s.register("gb4iB",(function(t,n){e(t.exports,"useFeeBreakdown",(function(){return a}));var o=s("43063"),r=s("29o0l"),i=s("Nt4tV");function a(e){const{t:t}=(0,o.useTranslation)();return(0,r.useMemo)((()=>{const{networkFee:n,phantomFee:o,tokenAccountFee:r,nonIncludedFees:s}=e;return{networkFee:{label:t("swapQuoteNetwork"),value:n.uiAmount,maxValue:n.maxUiAmount},bridgeFee:{label:t("swapQuoteBridgeFee"),value:s.uiAmount,maxValue:s.maxUiAmount},tokenAccountFee:{label:t("swapQuoteOneTimeTokenAccount"),value:r.uiAmount},phantomFeePercent:{label:o.pct?t("swapQuoteFeeDisclaimer",{feePercentage:(0,i.formatPercentage)(o.pct)}):"",value:o.pct?`${o.pct}`:""}}}),[e,t])}})),s.register("kRqRr",(function(t,n){e(t.exports,"swapperShouldDehydrateQueryPredicate",(function(){return r}));const o=[s("dOGoW").SWAPPER_QUERY_KEYS_PREFIX.pairs],r=e=>{const t=String(e.queryKey[1]);return o.includes(t)}})),s.register("3JFMB",(function(t,n){e(t.exports,"createSwapAnalytics",(function(){return r}));var o=s("h0VH5");const r=e=>new(0,o.SequenceAnalytics)(e,"swap")}))}();
//# sourceMappingURL=swapper.71addccc.js.map
define=__define;})(window.define);